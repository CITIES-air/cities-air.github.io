"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[538],{8124:function(t,e,r){var n=r(1413),o=r(885),i=(r(2791),r(5953)),a=r(6015),s=r(4565),l=r(9530),c=r(3085),u=r(9388),h=r(4011),d=r(5445),f=r(3511),v=r(4809),p=r(184),g=function(t){var e,r,n=t.sensorData,o=t.isScreen;return o&&n.current.sensor_status===h.vI.active?null:(0,p.jsxs)(s.Z,{variant:o?"h6":"caption",sx:{mt:0,fontWeight:o&&"500 !important"},children:[(null===(e=n.current)||void 0===e?void 0:e.sensor_status)!==h.vI.active&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.Z,{sx:{"& *":{color:"".concat(f.Z[3].lightThemeColor," !important")},mr:.5}}),"Offline.\xa0"]}),"Last update:",null!==(r=n.current)&&void 0!==r&&r.timestamp?" ".concat((0,h.Zj)(n.current.timestamp)," ago"):"--"]})};e.Z=function(t){var e=t.currentData,r=t.temperatureUnitPreference,u=t.isScreen,f=void 0===u||u,m=t.orderOfItems;return(0,p.jsx)(i.ZP,{container:!0,justifyContent:"center",sx:{"& .MuiSvgIcon-root":{verticalAlign:"sub",fontSize:f?null:"1rem"},"& *":{fontWeight:"500"},"& .condensedFont":{fontFamily:"IBM Plex Sans Condensed, sans-serif !important","& *":{fontFamily:"IBM Plex Sans Condensed, sans-serif !important"}}},children:Object.entries(e).map((function(t,u){var y,x,Z,w,b,_,j,S,C,k,q,I,M,U,P=(0,o.Z)(t,2),T=P[0],A=P[1];return(0,p.jsxs)(i.ZP,(0,n.Z)((0,n.Z)({item:!0,order:m&&m[u]},(U=Object.keys(e).length,{xs:Math.max(12/U,6),sm:Math.max(12/U,4),lg:f?12/U:Math.min(5,Math.max(12/U,3))})),{},{sx:(null===(y=A.current)||void 0===y?void 0:y.sensor_status)!==h.vI.active&&{"& *":{color:"".concat(v.Z.universal.palette.inactiveSensor)}},children:[(0,p.jsxs)(a.Z,{sx:{"& *":{color:null===(x=A.current)||void 0===x?void 0:x.color}},children:[(0,p.jsx)(s.Z,{variant:f?"h4":"h5",fontWeight:"500",className:"condensedFont",children:(null===(Z=A.sensor)||void 0===Z?void 0:Z.location_long)||(null===(w=A.sensor)||void 0===w?void 0:w.location_short)||"No Location Name"}),(0,p.jsx)(s.Z,{variant:f?"h1":"h2",fontWeight:"500",lineHeight:f?.8:.9,children:(null===(b=A.current)||void 0===b?void 0:b.aqi)||"--"}),(0,p.jsx)(s.Z,{variant:f?"h4":"h5",fontWeight:"500",className:"condensedFont",children:(null===(_=A.current)||void 0===_?void 0:_.category)||"--"})]}),(0,p.jsxs)(a.Z,{sx:{"& *":{color:f?(null===(j=A.current)||void 0===j?void 0:j.sensor_status)===h.vI.active?"#c8dcff":v.Z.universal.palette.inactiveSensor:"text.secondary"},mt:f?2:1},className:"condensedFont",children:[(0,p.jsxs)(s.Z,{variant:f?"h6":"body1",children:[(0,p.jsx)(l.Z,{}),(0,d.Lo)({rawTemp:(null===(S=A.current)||void 0===S?void 0:S.temperature)||"--",currentUnit:d.fG.celsius,returnUnit:r}),"\xa0\xa0-\xa0",(0,p.jsx)(c.Z,{sx:{transform:"scaleX(0.9)"}}),null!==(C=A.current)&&void 0!==C&&C.rel_humidity?Math.round(null===(k=A.current)||void 0===k?void 0:k.rel_humidity):"--","%"]}),["outdoors","indoors_gym"].includes(null===(q=A.sensor)||void 0===q?void 0:q.location_type)&&(0,p.jsx)(s.Z,{variant:f?"body1":"body2",sx:{fontWeight:"300 !important"},children:(0,d.qu)({rawTemp:null===(I=A.current)||void 0===I?void 0:I.temperature,currentUnit:d.fG.celsius,rel_humidity:null===(M=A.current)||void 0===M?void 0:M.rel_humidity,returnUnit:r})}),g({sensorData:A,isScreen:f})]}),A.sensor_status!==h.vI.active&&(0,p.jsx)(s.Z,{variant:f?"h6":"body1",className:"condensedFont",children:(0,h.Tm)(A)})]}),T)}))})}},6538:function(t,e,r){r.r(e),r.d(e,{default:function(){return S}});var n=r(885),o=r(2791),i=r(6871),a=r(1781),s=r(2087),l=r(4346),c=r(4565),u=r(5953),h=r(4162),d=r(6015),f=r(5629),v=r(2069),p=r(4011),g=(r(5445),r(1197)),m=r(2377),y=r(3511),x=r(4809),Z=r(184),w=function(t){var e,r,i,a,s=t.data,l=(0,o.useState)(!0),c=(0,n.Z)(l,2),u=(c[0],c[1],(0,o.useRef)()),h=(0,o.useRef)(),f=(0,o.useRef)(),v=(0,o.useRef)(),w=(0,o.useRef)(),b=200,_=30,j=80,S=70,C=g.jvg().x((function(t){return i(t.timestamp)})).y((function(t){return a(t.aqi)})).curve(g.YY7.tension(0));return(0,o.useEffect)((function(){if(s&&u.current&&h.current&&f.current&&v.current&&w.current){g.Ys(u.current),e=u.current.clientWidth,r=u.current.clientHeight-_,g.Ys(h.current).selectAll("*").remove(),g.Ys(f.current).selectAll("*").remove(),g.Ys(v.current).selectAll("*").remove(),g.Ys(w.current).selectAll("*").remove(),g.Ys(h.current).attr("opacity",.5),g.Ys(f.current).attr("filter","brightness(0.8) contrast(1.2) saturate(1.2)"),Object.entries(s).forEach((function(t){var e,r=(0,n.Z)(t,2),o=(r[0],r[1]);if(null===(e=o.historical)||void 0===e||e.forEach((function(t){t.timestamp=new Date(t.timestamp),t.aqi=(0,m.Z)(t["pm2.5"]).aqi})),o.historical&&Array.isArray(o.historical)){var i=g.Fp7(o.historical,(function(t){return t.aqi}));i>b&&(b=i)}})),b=50*Math.ceil(b/50),y.Z.forEach((function(t){b>=t.aqiUS.low&&b<=t.aqiUS.high&&(b=t.aqiUS.high)}));var t=new Date,o=new Date;o.setHours(o.getHours()-6),i=g.Xf().domain([o,t]).rangeRound([S,e-j]),a=g.BYU().domain([0,b]).range([r+_,_]);for(var l=Math.floor((y.Z[1].aqiUS.high-y.Z[0].aqiUS.high)/b*r/2),c=Math.floor(l/5),d=0;d<y.Z.length;d++){var Z=y.Z[d];if(b<=Z.aqiUS.low)break;var k=50*Math.ceil((Z.aqiUS.high-Z.aqiUS.low)/50);g.Ys(h.current).append("rect").attr("x",0).attr("y",r-Z.aqiUS.high/b*r+_).attr("width",e).attr("height",k/b*r).attr("fill",Z.lightThemeColor),g.Ys(f.current).append("text").attr("x",c).attr("y",r-Z.aqiUS.low/b*r-3.5*c+_).attr("fill",Z.lightThemeColor).attr("font-size",l).text(50*Math.floor(Z.aqiUS.low/50)),g.Ys(f.current).append("text").attr("class","category-text-graph-sm").attr("x",c+2).attr("y",r-Z.aqiUS.low/b*r-c+_).attr("fill",Z.lightThemeColor).attr("font-size",l/2).text(Z.category)}g.Ys(v.current).append("rect").attr("x",0).attr("y",0).attr("width",e).attr("height",_).attr("fill","white");var q=g.i$Z("%H:%M");g.Ys(v.current).append("g").attr("transform","translate(0,".concat(_,")")).call(g.F5q(i).tickSize(-r).ticks(g.Z_i.every(120)).tickFormat((function(t){return q(t)}))).attr("font-size",l/2.25).attr("color",x.Z.universal.palette.inactiveSensor).select(".domain").remove(),g.Ys(v.current).selectAll("line").attr("stroke","white").attr("stroke-width",2).attr("opacity",.5),Object.entries(s).forEach((function(t){var e,r,o,s=(0,n.Z)(t,2),c=(s[0],s[1]);g.Ys(w.current).append("path").datum(c.historical||[]).attr("x",S).attr("class","line").attr("d",C).attr("fill","transparent").attr("stroke","black").attr("stroke-width","5px").attr("opacity","outdoors"===(null===(e=c.sensor)||void 0===e?void 0:e.location_type)?1:.5);var u=(null===(r=c.historical)||void 0===r?void 0:r.length)>0?null===(o=c.historical)||void 0===o?void 0:o[0]:null;if(u){var h,d,f,v,Z=y.Z[(0,m.Z)(u["pm2.5"]).aqi_category_index],b=g.Ys(w.current).append("g").attr("transform","translate("+i(u.timestamp)+","+a(u.aqi)+")").attr("fill",(null===(h=c.current)||void 0===h?void 0:h.sensor_status)===p.vI.active?Z.lightThemeColor:x.Z.universal.palette.inactiveSensor);(null===(d=c.current)||void 0===d?void 0:d.sensor_status)===p.vI.active&&b.append("circle").attr("cx",0).attr("cy",0).attr("filter","brightness(0.5)").attr("class","pulse-ring").attr("r",25),b.append("circle").attr("cx",0).attr("cy",0).attr("stroke","#666").attr("class",(null===(f=c.current)||void 0===f?void 0:f.sensor_status)===p.vI.active&&"pulse-dot").attr("r",10),b.append("text").attr("class","location-label").attr("x",15).attr("y",0).attr("fill","black").attr("alignment-baseline","middle").attr("text-anchor","left").attr("font-size",l/3).text((0,p.KN)(null===(v=c.sensor)||void 0===v?void 0:v.location_short));for(var _=document.getElementsByClassName("location-label"),j=1;j<_.length;j++){var k=_[j-1],q=_[j],I=(0,p.Pk)(k.getBoundingClientRect(),q.getBoundingClientRect());0!==I&&(k.setAttribute("y",10*I),q.setAttribute("y",10*-I))}}}))}}),[s]),(0,Z.jsx)(d.Z,{sx:{"& .pulse-ring":{animation:"pulse-ring 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite","@keyframes pulse-ring":{"0%":{transform:"scale(0.2)"},"80%":{},"100%":{opacity:0}}},"& .pulse-dot":{animation:"pulse-dot 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite","@keyframes pulse-dot":{"0%":{transform:"scale(0.5)"},"50%":{transform:"scale(1)",filter:"brightness(1.2) contrast(1.2) saturate(1.2)"},"100%":{transform:"scale(0.5)"}}}},width:"100%",height:"100%",children:(0,Z.jsxs)("svg",{id:"recent-historical-graph",width:"100%",height:"100%",ref:u,children:[(0,Z.jsx)("g",{ref:h}),(0,Z.jsx)("g",{ref:v}),(0,Z.jsx)("g",{ref:f}),(0,Z.jsx)("g",{ref:w})]})})},b=r(925),_=r(8124),j=r(8206),S=function(t){var e=t.title,r=t.temperatureUnitPreference,g=(0,o.useContext)(a.S),m=g.authenticated,S=g.checkAuthentication,C=(0,i.s0)();(0,o.useEffect)((function(){!0===S&&!1===m&&C("/login")}),[m,S]),(0,o.useEffect)((function(){document.title=e}),[e]);var k=(0,o.useState)(),q=(0,n.Z)(k,2),I=q[0],M=q[1],U=(0,o.useState)({}),P=(0,n.Z)(U,2),T=P[0],A=P[1];(0,o.useEffect)((function(){function t(){return 0!==[0,0,1,1,0,0,1,1,0,0,1,1][(new Date).getMonth()]}M(t());var e=setInterval((function(){M(t())}),864e5);return function(){clearInterval(e)}}),[]),(0,o.useEffect)((function(){var t,e=window.location.href.match(/\/screen\/(.+)/);if(e&&e.length>1){t="https://api.citiesair.com/screen/".concat(e[1]),(0,j.bE)(t).then((function(t){A(t)})).catch((function(t){return console.log(t)}));var r=setInterval((function(){(0,j.bE)(t).then((function(t){A(t)})).catch((function(t){return console.log(t)}))}),3e5);return function(){clearInterval(r)}}}),[]);var E=function(){if(!Object.values(T).every((function(t){var e;return(null===(e=t.current)||void 0===e?void 0:e.sensor_status)===p.vI.active})))return null;for(var t,e,r=0;r<Object.values(T).length;r++){var n,o=Object.values(T)[r];if("outdoors"===(null===(n=o.sensor)||void 0===n?void 0:n.location_type)){if((t=o.current.aqi)<=y.Z[0].aqiUS.high)return null}else e=o.current.aqi}var i,a=t/e;if(a>=2)i="".concat(parseFloat(a).toFixed(1)," times");else{if(!(a>1.2))return null;i="".concat(Math.round((t-e)/e*100),"%")}return(0,Z.jsx)(s.ZP,{children:(0,Z.jsx)(l.Z,{primary:(0,Z.jsxs)(Z.Fragment,{children:["Indoors air is",(0,Z.jsx)(c.Z,{component:"span",color:"".concat(y.Z[0].lightThemeColor," !important"),children:" ".concat(i," ")}),"better than outdoors"]})})})};return(0,Z.jsxs)(u.ZP,{container:!0,alignContent:"stretch",alignItems:"stretch",height:"100vh",sx:{overflow:"hidden",background:"white","& *":{fontWeight:"500 !important"},"& .condensedFont":{fontFamily:"IBM Plex Sans Condensed, sans-serif !important","& *":{fontFamily:"IBM Plex Sans Condensed, sans-serif !important"}},"& .flashingRed":{"& .MuiTypography-root ":{color:"".concat(y.Z[3].lightThemeColor," !important"),opacity:.8},color:"".concat(y.Z[3].lightThemeColor," !important"),animation:"flashingRed 3s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite","@keyframes flashingRed":{"0%":{opacity:1},"50%":{opacity:.5},"100%":{opacity:1}}}},children:[(0,Z.jsx)(u.ZP,{item:!0,xs:6,sx:{py:3,px:2,order:I?1:0,background:"#212529"},children:(0,Z.jsxs)(h.Z,{direction:"column",justifyContent:"space-between",height:"100%",textAlign:"center",children:[(0,Z.jsxs)(d.Z,{children:[(0,Z.jsx)(c.Z,{variant:"h4",fontWeight:"500",color:"white",children:"PM2.5 AIR QUALITY INDEX"}),(0,Z.jsx)(c.Z,{variant:"h5",className:"condensedFont",color:x.Z.universal.palette.inactiveSensor,children:"Particulate Matter < 2.5\u03bcm"})]}),(0,Z.jsx)(u.ZP,{container:!0,justifyContent:"space-around",children:(0,Z.jsx)(_.Z,{currentData:T,temperatureUnitPreference:r})}),(0,Z.jsxs)(f.Z,{className:"condensedFont",sx:{listStyleType:"disclosure-closed","& .MuiTypography-root":{fontSize:"1.5rem"},"& .MuiListItem-root":{display:"list-item",ml:3,p:0,pr:3},"& .MuiTypography-root, .MuiListItem-root":{color:x.Z.universal.palette.inactiveSensor}},children:[(0,Z.jsx)(E,{}),Object.entries(T).map((function(t){var e,r,o,i=(0,n.Z)(t,2),a=i[0],c=i[1];return(null===(e=c.current)||void 0===e?void 0:e.healthSuggestion)&&(0,Z.jsx)(s.ZP,{className:(null===(r=c.current)||void 0===r?void 0:r.aqi)>=y.Z[2].aqiUS.low&&"flashingRed",children:(0,Z.jsx)(l.Z,{primary:null===(o=c.current)||void 0===o?void 0:o.healthSuggestion})},a)}))]})]})}),(0,Z.jsxs)(u.ZP,{item:!0,xs:6,sx:{order:I?0:1},children:[(0,Z.jsx)(d.Z,{sx:{position:"absolute",top:0,right:!I&&0,left:I&&0,width:"5vw",height:"5vw",m:1},children:(0,Z.jsx)(v.Z,{})}),(0,Z.jsxs)(u.ZP,{container:!0,alignContent:"space-between",justifyContent:"center",height:"100%",textAlign:"center",children:[(0,Z.jsx)(u.ZP,{item:!0,xs:12,sx:{pt:3,px:2},children:(0,Z.jsx)(c.Z,{variant:"h4",fontWeight:"500",sx:{color:"black"},children:"AN INITIATIVE BY CITIESair"})}),(0,Z.jsx)(u.ZP,{item:!0,xs:2,children:(0,Z.jsx)(d.Z,{height:"auto",width:"100%",children:(0,Z.jsx)(b.ZP,{size:256,style:{height:"auto",maxWidth:"100%",width:"100%"},value:"".concat((0,p.p7)(document.location.href),"?source=").concat((0,p.c9)(document.location.href)),viewBox:"0 0 256 256"})})}),(0,Z.jsx)(u.ZP,{item:!0,xs:12,height:"70%",className:"condensedFont",sx:{"& *":{fontWeight:"600 !important"}},children:(0,Z.jsx)(w,{data:T})})]})]})]})}},4011:function(t,e,r){r.d(e,{Zj:function(){return n},vI:function(){return o},Ay:function(){return a},Tm:function(){return s},KN:function(){return l},p7:function(){return c},c9:function(){return u},Pk:function(){return h}});var n=function(t){var e=new Date(t),r=new Date-e,n=Math.floor(r/1e3),o=Math.floor(n/60),i=Math.floor(o/60),a=Math.floor(i/24);return a>0?"".concat(a,"d"):i>0?"".concat(i,"h"):o>0?"".concat(o,"m"):"".concat(n,"s")},o={active:"active",temporaryOffline:"temporaryOffline",offline:"offline"},i=[{name:o.active,cutoffInHours:{low:0,high:2}},{name:o.temporaryOffline,cutoffInHours:{low:3,high:6}},{name:o.offline,cutoffInHours:{low:7,high:1/0}}],a=function(t){for(var e=0;e<i.length;e++){var r=i[e];if(r.cutoffInHours.low<=t&&t<=r.cutoffInHours.high)return r.name}},s=function(t){switch(t.sensor_status){case o.active:return null;case o.temporaryOffline:return"Last seen: ".concat(t.lastSeen,"h ago");case o.offline:return"Sensor offline";default:return null}},l=function(t){return t?t.charAt(0).toUpperCase()+t.slice(1):null},c=function(t){return new URL(t).hostname},u=function(t){var e="screen",r=t.split(e);return"".concat(e).concat(r.pop())},h=function(t,e){return t.bottom<e.top||t.top>e.bottom?0:t.top<e.top?-1:1}},2377:function(t,e,r){var n=r(3511);function o(t,e,r,n,o){return parseInt((t-e)/(r-n)*(o-n)+e)}e.Z=function(t){if(null==t)return{aqi:null,aqi_category_index:null};for(var e=0;e<n.Z.length;e++){var r=n.Z[e];if(t>=r.rawPM2_5.low&&t<=r.rawPM2_5.high)return{aqi:o(r.aqiUS.high,r.aqiUS.low,r.rawPM2_5.high,r.rawPM2_5.low,t),aqi_category_index:r.id}}}},3511:function(t,e,r){var n=r(4809),o=[{id:0,category:"Good",lightThemeColor:n.Z.light.palette.chart.optionsColors.aqi[0],darkThemeColor:n.Z.dark.palette.chart.optionsColors.aqi[0],aqiUS:{low:0,high:50},rawPM2_5:{low:0,high:12},description:"Air quality is satisfactory, and air pollution poses little or no risk",healthSuggestions:{outdoors:"Enjoy outdoor activities, the air is great!",indoors_generic:"Enjoy clean indoor air",indoors_dining_hall:"Enjoy clean dining hall air",indoors_gym:"Enjoy clean air for physical activities indoors",indoors_vulnerable:"Enjoy clean indoor air"}},{id:1,category:"Moderate",lightThemeColor:n.Z.light.palette.chart.optionsColors.aqi[1],darkThemeColor:n.Z.dark.palette.chart.optionsColors.aqi[1],aqiUS:{low:51,high:100},rawPM2_5:{low:12.1,high:35.4},description:"Air quality is acceptable. However, there may be a risk for some people, particularly those who are unusually sensitive to air pollution",healthSuggestions:{outdoors:"Children and individuals with respiratory issues might need to reduce prolonged outdoor exertion",indoors_generic:"Indoor air is acceptable, but not great",indoors_dining_hall:"Indoor air is acceptable, but not great<br>Avoid Grill area",indoors_gym:"Indoor air is acceptable, but not great",indoors_vulnerable:"Indoor air is acceptable, but not great"}},{id:2,category:"Unhealthy for Sensitive Groups",lightThemeColor:n.Z.light.palette.chart.optionsColors.aqi[2],darkThemeColor:n.Z.dark.palette.chart.optionsColors.aqi[2],aqiUS:{low:101,high:150},rawPM2_5:{low:35.5,high:55.4},description:"Members of sensitive groups may experience health effects. The general public is less likely to be affected",healthSuggestions:{outdoors:"Children and individuals with respiratory issues should limit outdoor exertion",indoors_dining_hall:"Consider take-aways<br>Avoid Grill area",indoors_gym:"Individuals with respiratory issues should lower the intensity of indoor exercises",indoors_vulnerable:"Monitor closely individuals with respiratory issues for any symptom"}},{id:3,category:"Unhealthy",lightThemeColor:n.Z.light.palette.chart.optionsColors.aqi[3],darkThemeColor:n.Z.dark.palette.chart.optionsColors.aqi[3],aqiUS:{low:151,high:200},rawPM2_5:{low:55.5,high:150.4},description:"Some members of the general public may experience health effects; members of sensitive groups may experience more serious health effects",healthSuggestions:{outdoors:"Everyone should limit outdoor activities<br>Wear masks when going outside",indoors_dining_hall:"Consider take-aways<br>Avoid Grill area<br>Come back at off-peak hours",indoors_gym:"Everyone should lower the intensity of indoor exercises",indoors_vulnerable:"Monitor closely individuals with respiratory issues for any symptom"}},{id:4,category:"Very Unhealthy",lightThemeColor:n.Z.light.palette.chart.optionsColors.aqi[4],darkThemeColor:n.Z.dark.palette.chart.optionsColors.aqi[4],aqiUS:{low:201,high:300},rawPM2_5:{low:150.5,high:250.4},description:"Health alert: The risk of health effects is increased for everyone",healthSuggestions:{outdoors:"Avoid outdoor activities at all cost<br>Wear N95 masks when going outside",indoors_dining_hall:"Consider take-aways<br>Avoid Grill area<br>Come back at off-peak hours",indoors_gym:"Indoor air quality is not suitable for any physical activities",indoors_vulnerable:"Monitor closely individuals with respiratory issues for any symptom"}},{id:5,category:"Hazardous",lightThemeColor:n.Z.light.palette.chart.optionsColors.aqi[5],darkThemeColor:n.Z.dark.palette.chart.optionsColors.aqi[5],aqiUS:{low:300,high:500},rawPM2_5:{low:250.5,high:550.5},description:"Health warning of emergency conditions: everyone is more likely to be affected",healthSuggestions:{outdoors:"Avoid outdoor activities at all cost<br>Wear N95 masks when going outside",indoors_dining_hall:"Consider take-aways<br>Avoid Grill area<br>Come back at off-peak hours",indoors_gym:"Indoor air quality is not suitable for any physical activities",indoors_vulnerable:""}}];e.Z=o},8206:function(t,e,r){r.d(e,{bE:function(){return f},RO:function(){return v}});var n=r(1413),o=r(885),i=r(5861),a=r(4687),s=r.n(a),l=r(8914),c=r(4011),u=r(2377),h=r(3511),d=r(3540),f=function(){var t=(0,i.Z)(s().mark((function t(e){var r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,l.m)(e,"json",!0);case 3:if(r=t.sent){t.next=6;break}throw new Error("Returned data is empty");case 6:return t.prev=6,t.abrupt("return",v(r));case 10:t.prev=10,t.t0=t.catch(6),console.error("Error: data is not iterable",t.t0);case 13:t.next=18;break;case 15:throw t.prev=15,t.t1=t.catch(0),new Error("Error fetching data: ".concat(t.t1.message));case 18:case"end":return t.stop()}}),t,null,[[0,15],[6,10]])})));return function(e){return t.apply(this,arguments)}}(),v=function(t){return Object.entries(t).map((function(t){var e,r,i=(0,o.Z)(t,2),a=(i[0],i[1]),s=new Date,l=new Date(null===(e=a.current)||void 0===e?void 0:e.timestamp),f=Math.round((s-l)/1e3/3600);if(a.current&&(a.current.lastSeenInHours=f,a.current.sensor_status=(0,c.Ay)(f)),null!==(r=a.current)&&void 0!==r&&r["pm2.5"]){var v=(0,u.Z)(a.current["pm2.5"]);if(v){var p,g,m=h.Z[v.aqi_category_index];if(a.current.aqi=v.aqi,a.current.category=m.category,a.current.sensor_status===c.vI.active)a.current=(0,n.Z)((0,n.Z)({},a.current),{},{color:m.lightThemeColor,healthSuggestion:m.healthSuggestions[null===(p=a.sensor)||void 0===p?void 0:p.location_type]&&(0,d.ZP)(m.healthSuggestions[null===(g=a.sensor)||void 0===g?void 0:g.location_type])})}}})),t}}}]);
//# sourceMappingURL=538.1857e3d1.chunk.js.map