{"version":3,"file":"static/js/127.2f69aae0.chunk.js","mappings":"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","sources":["Components/AirQuality/AQIexplanation.jsx","Components/AirQuality/AirQualityIndexTable.jsx","Components/ExpandableSection.jsx","Graphs/Subchart/SubchartUtils/SeriesSelector.jsx","Graphs/GoogleChartHelper.jsx","Graphs/Subchart/SubchartUtils/GoogleChartStyleWrapper.jsx","Utils/Gradient/GradientUtils.jsx","Graphs/Subchart/NivoCharts/NivoCalendarChart.jsx","Components/DateRangePicker/DateRangePickerUtils.jsx","Components/DateRangePicker/AggregationTypeToggle.jsx","Components/DateRangePicker/CustomDateRangePicker.jsx","Graphs/Subchart/SubChart.jsx","Components/CollapsibleSubtitle.jsx","Graphs/Subchart/SubchartUtils/DataTypeDropDown.jsx","Graphs/ChartComponentWrapper.jsx","Components/AirQuality/AirQualityIndexLegendQuickGlance.jsx","Components/DatasetDownload/DatasetDownloadDialog.jsx","Components/AirQuality/AirQualityScreen/ScreenDropDownMenu.jsx","Components/SchoolSelector.jsx","Components/LoadMoreChartsButton.jsx","Pages/Project.jsx","Pages/Dashboard.jsx"],"sourcesContent":["import { useContext } from 'react';\r\nimport { Typography } from '@mui/material';\r\nimport parse from 'html-react-parser';\r\nimport { replacePlainHTMLWithMuiComponents } from '../../Utils/Utils';\r\nimport AirQualityIndexTable from './AirQualityIndexTable';\r\nimport ExpandableSection from '../ExpandableSection';\r\nimport { PreferenceContext } from '../../ContextProviders/PreferenceContext';\r\n\r\nconst Explanation = {\r\n  title: \"Air Quality Index Explanation for Particulate Matter (PM2.5 & PM10)\",\r\n  subtitle: \"CITIESair uses the <a href='https://www.airnow.gov/aqi/aqi-basics/'>Air Quality Index (AQI)</a> developed by the United States Environmental Protection Agency (EPA) to communicate different levels of Particulate Matter (PM). PM are microscopic particles small enough to be suspended in the air for a long period of time. Depends on the size, PM can be categorized into: PM10 (coarse particles <10µm) and PM2.5 (very fine particles <2.5µm). PM2.5 is smaller and can penetrate deeper and lodge into the lungs and internal organs, causing respiratory and cardiovascular diseases. PM2.5's origin is skewed towards more anthropogenic emissions, while PM10 are more likely to come from natural dust in the UAE.<br/><br/>To calculate AQI from raw concentrations of PM2.5 and PM10 concentration (µg/m³), different breakpoints and piecewise linear function are utilized (read more <a href='https://en.wikipedia.org/wiki/Air_quality_index#United_States'>here</a>). Higher AQI values correspond to poorer air quality and greater heath risks to humans.<br><br>The US EPA sets thresholds for PM2.5 concentration, recently updated in February 2024: <sup>[1]</sup><ul><li><b>Annual average</b>: 9.0 µg/m³, corresponding to US AQI <b>50</b></li><li><b>24-hour average</b>: 35.0 µg/m³, corresponding to US AQI <b>100</b></li></ul>In 2021, the World's Heath Organization (WHO) proposed a new guideline for PM2.5<sup>[2]</sup> with stricter thresholds than those of the US EPA:<ul><li><b>Annual average</b>: 5.0 µg/m³, corresponding to US AQI <b>21</b></li><li><b>24-hour average</b>: 15.0 µg/m³, corresponding to US AQI <b>56</b></li></ul>\",\r\n  reference: \"[1] \\\"National Ambient Air Quality Standards (NAAQS) for PM.\\\" EPA, Environmental Protection Agency, https://www.epa.gov/pm-pollution/national-ambient-air-quality-standards-naaqs-pm.<br>[2] World Health Organization. \\\"WHO global air quality guidelines: particulate matter (PM2. 5 and PM10), ozone, nitrogen dioxide, sulfur dioxide and carbon monoxide: executive summary.\\\" (2021).\",\r\n}\r\n\r\nconst AQIexplanation = () => {\r\n  const { themePreference } = useContext(PreferenceContext);\r\n\r\n  return (\r\n    <ExpandableSection\r\n      title={Explanation.title}\r\n      content={(\r\n        <>\r\n          <AirQualityIndexTable themePreference={themePreference} />\r\n          <Typography\r\n            component=\"div\"\r\n            variant=\"body1\"\r\n            color=\"text.secondary\"\r\n            sx={{ mt: 2 }}\r\n          >\r\n            {parse(Explanation.subtitle, {\r\n              replace: replacePlainHTMLWithMuiComponents,\r\n            })}\r\n          </Typography>\r\n          <ExpandableSection\r\n            title={\"Reference\"}\r\n            content={(\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                {parse(Explanation.reference, {\r\n                  replace: replacePlainHTMLWithMuiComponents,\r\n                })}\r\n              </Typography>\r\n            )}\r\n          />\r\n        </>\r\n      )}\r\n    />\r\n  )\r\n};\r\n\r\nexport default AQIexplanation;","import { Box, Table, TableBody, TableCell, TableHead, TableRow, styled } from '@mui/material';\r\nimport parse from 'html-react-parser';\r\nimport { replacePlainHTMLWithMuiComponents } from '../../Utils/Utils';\r\nimport AQIdatabase from '../../Utils/AirQuality/AirQualityIndexHelper';\r\nimport { useContext } from 'react';\r\nimport { PreferenceContext } from '../../ContextProviders/PreferenceContext';\r\n\r\nexport const StyledTable = styled(Table)(({ theme, isTiny }) => ({\r\n  minWidth: isTiny || 700,\r\n  '& th, td': {\r\n    fontSize: isTiny ? '0.625rem' : '0.6875rem',\r\n    color: theme.palette.text.secondary,\r\n    [theme.breakpoints.down('sm')]: {\r\n      fontSize: isTiny ? '0.5rem' : '0.6875rem',\r\n    },\r\n  },\r\n  '& th': {\r\n    fontWeight: 500,\r\n    color: theme.palette.text.primary,\r\n    lineHeight: '1rem'\r\n  }\r\n}));\r\n\r\nfunction AirQualityIndexTable(props) {\r\n  const { themePreference } = useContext(PreferenceContext);\r\n\r\n  const { isTiny, hideAQIDescription } = props;\r\n\r\n  const returnFormattedBreakpoints = (low, high) => {\r\n    if (high === Infinity) return `${low}+`;\r\n    else return `${low} - ${high}`;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Box overflow=\"auto\">\r\n        <StyledTable size=\"small\" isTiny={isTiny}>\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell sx={{ pr: 0 }}>\r\n                <Box sx={{ width: '1em', height: '1em' }} />\r\n              </TableCell>\r\n              <TableCell sx={{ pl: 1 }}>\r\n                Category\r\n              </TableCell>\r\n              <TableCell align=\"right\">US AQI</TableCell>\r\n              <TableCell align=\"right\">\r\n                PM2.5\r\n                (µg/m\r\n                <sup>3</sup>\r\n                )\r\n              </TableCell>\r\n              <TableCell align=\"right\">\r\n                PM10\r\n                (µg/m\r\n                <sup>3</sup>\r\n                )\r\n              </TableCell>\r\n              {!hideAQIDescription && <TableCell align=\"left\">Description</TableCell>}\r\n              {!hideAQIDescription && <TableCell align=\"left\">CITIESair&apos; Suggested Actions</TableCell>}\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {AQIdatabase.map((element, index) => (\r\n              <TableRow\r\n                key={index}\r\n                sx={{ '&:last-child td, &:last-child th': { border: 0 } }}\r\n              >\r\n                <TableCell sx={{ pr: 0 }}>\r\n                  <Box sx={{ width: '1em', height: '1em', backgroundColor: element.color[themePreference] }} />\r\n                </TableCell>\r\n                <TableCell sx={{ pl: 1 }}>\r\n                  {element.category}\r\n                </TableCell>\r\n                <TableCell align=\"right\" sx={{ whiteSpace: \"nowrap\" }}>\r\n                  {returnFormattedBreakpoints(element.aqiUS.low, element.aqiUS.high)}\r\n                </TableCell>\r\n                <TableCell align=\"right\" sx={{ whiteSpace: \"nowrap\" }}>\r\n                  {returnFormattedBreakpoints(element.rawPM2_5.low, element.rawPM2_5.high)}\r\n                </TableCell>\r\n                <TableCell align=\"right\" sx={{ whiteSpace: \"nowrap\" }}>\r\n                  {returnFormattedBreakpoints(element.rawPM10.low, element.rawPM10.high)}\r\n                </TableCell>\r\n                {!hideAQIDescription && <TableCell align=\"left\">{element.description}</TableCell>}\r\n                {!hideAQIDescription\r\n                  && (\r\n                    <TableCell align=\"left\">\r\n                      {\r\n                        parse(element.healthSuggestions.outdoors, {\r\n                          replace: replacePlainHTMLWithMuiComponents,\r\n                        })\r\n                      }\r\n                    </TableCell>\r\n                  )}\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </StyledTable>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default AirQualityIndexTable;\r\n","// disable eslint for this file\r\n/* eslint-disable */\r\nimport { useState } from 'react';\r\nimport { styled } from '@mui/material/styles';\r\n\r\nimport MuiAccordion from '@mui/material/Accordion';\r\nimport MuiAccordionSummary from '@mui/material/AccordionSummary';\r\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\r\nimport { Box, Typography, Tooltip } from '@mui/material';\r\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\r\nimport InfoIcon from '@mui/icons-material/Info';\r\nimport * as Tracking from '../Utils/Tracking';\r\n\r\nconst StyledAccordion = styled(MuiAccordion)(({ theme, expanded }) => ({\r\n  color: theme.palette.text.secondary,\r\n  backgroundImage: 'none',\r\n  backgroundColor: expanded ? theme.palette.background.default : 'transparent',\r\n  boxShadow: expanded ? theme.shadows : 'none',\r\n  transition: 'none',\r\n}));\r\n\r\nconst StyledAccordionSummary = styled(MuiAccordionSummary)(({ theme, expanded }) => ({\r\n  marginTop: expanded ? theme.spacing(2) : 0,\r\n  flexDirection: 'row-reverse',\r\n  paddingLeft: expanded ? theme.spacing(1) : 0,\r\n  '& .MuiTypography-root': {\r\n    color: theme.palette.text.primary,\r\n    textDecoration: 'underline',\r\n    transition: 'none',\r\n    '&:hover': {\r\n      color: theme.palette.primary.main,\r\n    },\r\n  },\r\n  '& .MuiAccordionSummary-content.Mui-expanded': {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nconst TooltipText = {\r\n  expand: \"Click to expand section\",\r\n  collapse: \"Click to collapse section\"\r\n}\r\n\r\nconst ExpandableSection = ({ title, content }) => {\r\n  const [expanded, setExpanded] = useState(undefined);\r\n\r\n  const handleAccordionChange = (panel) => (event, isExpanded) => {\r\n    setExpanded(isExpanded ? panel : undefined);\r\n    Tracking.sendEventAnalytics(\r\n      isExpanded ? Tracking.Events.expandSection : Tracking.Events.collapseSection,\r\n      {\r\n        section: title\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <StyledAccordion\r\n        expanded={expanded === \"panel1\"}\r\n        onChange={handleAccordionChange(\"panel1\")}\r\n        transitionDuration={0}\r\n      >\r\n        <StyledAccordionSummary expanded={expanded} expandIcon={<ArrowDropDownIcon />} aria-controls=\"panel1a-content\" id=\"panel1a-header\">\r\n          <Tooltip title={expanded ? TooltipText.collapse : TooltipText.expand} enterDelay={0} leaveDelay={200}>\r\n            <Typography component=\"a\" variant=\"body1\">\r\n              {title}\r\n              <InfoIcon sx={{ fontSize: \"1rem\", marginLeft: \"0.25rem\" }} />\r\n            </Typography>\r\n          </Tooltip>\r\n        </StyledAccordionSummary>\r\n        <MuiAccordionDetails>\r\n          {content}\r\n        </MuiAccordionDetails>\r\n      </StyledAccordion>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default ExpandableSection;","/* eslint-disable */\r\nimport { useState, useEffect } from 'react';\r\nimport { Stack, Grid, MenuItem, FormControl, Select, Chip, Radio, Checkbox, Typography, Switch } from \"@mui/material\";\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\nimport VisibilityIcon from '@mui/icons-material/Visibility';\r\n\r\nconst SELECT_ALL = 'Display All Series';\r\n\r\nconst ITEM_HEIGHT = 48;\r\nconst ITEM_PADDING_TOP = 8;\r\n\r\nexport default function SeriesSelector(props) {\r\n  const { items: itemsFromChart,\r\n    selectorID,\r\n    allowMultiple,\r\n    seriesLabel,\r\n    onSeriesSelection,\r\n    displayChip = true\r\n  } = props;\r\n\r\n  const theme = useTheme();\r\n\r\n  const MenuProps = {\r\n    PaperProps: {\r\n      style: {\r\n        maxHeight: ITEM_HEIGHT * 5.55 + ITEM_PADDING_TOP,\r\n        overflow: 'visible !important',\r\n        background: theme.palette.customAlternateBackground\r\n      }\r\n    },\r\n    anchorOrigin: {\r\n      vertical: \"bottom\",\r\n      horizontal: \"left\"\r\n    },\r\n    transformOrigin: {\r\n      vertical: \"top\",\r\n      horizontal: \"left\"\r\n    },\r\n    getContentAnchorEl: null\r\n  };\r\n\r\n  const [items, setItems] = useState(itemsFromChart);\r\n  const [selectAll, setSelectAll] = useState(allowMultiple); // default: all is selected if multiSelect is true\r\n\r\n  useEffect(() => {\r\n    setItems(itemsFromChart);\r\n  }, [itemsFromChart]);\r\n\r\n  useEffect(() => {\r\n    setSelectAll(items.every(item => item.selected)); // set selectAll if all items are selected\r\n  }, [items]);\r\n\r\n  const handleChange = (event) => {\r\n    // Get the array of the currently selected value(s)\r\n    const {\r\n      target: { value }\r\n    } = event;\r\n\r\n    // If the current selection has SELECT_ALL\r\n    // Behavior:\r\n    // - If SELECT_ALL is being selected now, then set all items to selected\r\n    // - IF SELECT_ALL is being de-selected now, then set all items but the first one to be unselected \r\n    // (to make sure there's always at least 1 item being selected)\r\n    if (value.includes(SELECT_ALL)) {\r\n      const updatedItems = items.map((item, index) => ({ ...item, selected: index == 0 ? true : !selectAll }));\r\n      onSeriesSelection({ newDataColumns: updatedItems });\r\n      setSelectAll(!selectAll);\r\n    }\r\n    // Else, if an ordinary item is selected/de-selected:\r\n    else {\r\n      const selectedItems = items.filter(item => value.includes(item.label));\r\n      const updatedItems = items.map(item => ({\r\n        ...item,\r\n        selected: selectedItems.some(selectedItem => selectedItem.label === item.label)\r\n      }));\r\n      onSeriesSelection({ newDataColumns: updatedItems });\r\n      setSelectAll(false);\r\n    }\r\n  };\r\n\r\n  const handleItemToggle = (item) => {\r\n    const updatedItems = items.map(existingItem =>\r\n      existingItem.label === item.label ? { ...existingItem, selected: !existingItem.selected } : existingItem\r\n    );\r\n    onSeriesSelection({ newDataColumns: updatedItems });\r\n  };\r\n\r\n  const renderedLabel = (selected) => {\r\n    const returnNumSeriesDisplayed = () => {\r\n      return `${selected.length}/${items.length} ${seriesLabel || \"\"} displayed`;\r\n    };\r\n\r\n    return (\r\n      <Stack direction=\"row\" alignItems=\"center\" spacing={0.5}>\r\n        <VisibilityIcon fontSize=\"1.5rem\" sx={{ color: theme.palette.text.secondary }} />\r\n        <Typography variant=\"caption\" color=\"text.secondary\">\r\n          {/* show # of series selected if multiSelect. show cur selected serie if singleSelect */}\r\n          {allowMultiple ? returnNumSeriesDisplayed() : selected}\r\n        </Typography>\r\n      </Stack>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Stack spacing={1} direction=\"row\" alignItems=\"center\">\r\n      <FormControl\r\n        sx={{\r\n          [theme.breakpoints.down('sm')]: { width: '100%' },\r\n          minWidth: '200px',\r\n          '& .MuiInputBase-root': { borderRadius: `${theme.shape.borderRadius}px` }\r\n        }}\r\n        size=\"small\"\r\n      >\r\n        <Select\r\n          labelId={`${selectorID}-label`}\r\n          id={selectorID}\r\n          multiple={allowMultiple}\r\n          value={items.filter(item => item.selected).map(item => item.label)}\r\n          onChange={handleChange}\r\n          MenuProps={MenuProps}\r\n          renderValue={(selected) => renderedLabel(selected)}\r\n          sx={{ fontSize: '0.75em' }}\r\n        >\r\n          {/* Display all available items, together with checkbox for each item to select from */}\r\n          {items.map((item) => (\r\n            <MenuItem\r\n              disabled={\r\n                // If there is only 1 selected item and this is the selected item\r\n                // Then, prevent user from de-select this item too\r\n                // To ensure at least there is 1 selected item at all times\r\n                (items.filter(item => item.selected).length === 1 && item.selected) ? true : false\r\n              }\r\n              key={item.label}\r\n              value={item.label}\r\n              sx={{\r\n                backgroundColor: 'unset !important',\r\n                \"&:hover\": {\r\n                  backgroundColor: 'inherit !important',\r\n                }\r\n              }}\r\n            >\r\n              { /* checkboxes for MultiSelect, radioButtons for singleSelect*/}\r\n              {allowMultiple ? <Checkbox\r\n                checked={item.selected}\r\n                onClick={() => handleItemToggle(item)}\r\n\r\n                sx={{ p: 0.25, transform: 'scale(0.8)' }} />\r\n                : <Radio\r\n                  checked={item.selected}\r\n                  onChange={() => handleChange(item)}\r\n\r\n                  sx={{ p: 0.25, transform: 'scale(0.8)' }} />\r\n              }\r\n              <Typography variant='caption'>{item.label}</Typography>\r\n            </MenuItem>\r\n          ))}\r\n\r\n          {/* Show the option to select all if multiSelect is true*/}\r\n          {allowMultiple && <MenuItem key={SELECT_ALL} value={SELECT_ALL} sx={{\r\n            borderTop: 'solid 0.5px', borderColor: theme.palette.text.secondary,\r\n            position: 'sticky', bottom: 0, zIndex: 99999, marginBottom: theme.spacing(-1),\r\n            background: theme.palette.customAlternateBackground,\r\n            \"&:hover\": {\r\n              background: theme.palette.customAlternateBackground\r\n            }\r\n          }}>\r\n            <Stack direction='row' width='100%' alignItems='center' justifyContent='space-between'>\r\n              <Typography fontWeight={500} variant='caption' sx={{ pl: 1 }}>{SELECT_ALL}</Typography>\r\n              <Switch\r\n                checked={selectAll}\r\n                onClick={() => handleItemToggle(SELECT_ALL)}\r\n                sx={{ transform: 'scale(0.8)' }}\r\n              />\r\n            </Stack>\r\n          </MenuItem>\r\n          }\r\n        </Select>\r\n      </FormControl>\r\n\r\n      {/* Display only selected items in the Grids, and only in landscape mode and if multiSelect is true*/}\r\n      {(displayChip && allowMultiple) && <Grid container spacing={1}\r\n        sx={{\r\n          [theme.breakpoints.down('sm')]: {\r\n            display: 'none'\r\n          },\r\n        }}\r\n      >\r\n        {items.filter(item => item.selected).map((item) => (\r\n          <Grid item key={item.label}>\r\n            <Chip\r\n              label={<Typography variant='caption'>{item.label}</Typography>}\r\n              size=\"small\"\r\n              {...(items.filter(item => item.selected).length !== 1 && { onDelete: () => handleItemToggle(item) })}\r\n            />\r\n          </Grid>\r\n        ))}\r\n      </Grid>}\r\n\r\n\r\n    </Stack>\r\n  );\r\n}\r\n","/* eslint-disable */\r\n\r\nexport const ChartControlType = {\r\n  CategoryFilter: { position: 'top', stackDirection: 'column' },\r\n  DateRangeFilter: { position: 'bottom', stackDirection: 'column-reverse' },\r\n  ChartRangeFilter: { position: 'bottom', stackDirection: 'column-reverse' },\r\n  NumberRangeFilter: { position: 'top', stackDirection: 'column' }\r\n}\r\n// Async function to fetch data from sheet using Google Visualization query language\r\nexport const fetchDataFromSheet = ({ chartData, subchartIndex }) => {\r\n  const urlParams =\r\n    subchartIndex == null\r\n      ? {\r\n        headers: chartData.headers || 1,\r\n        query: chartData.query,\r\n        gid: chartData.gid,\r\n      }\r\n      : {\r\n        headers:\r\n          chartData.headers\r\n          || chartData.subcharts[subchartIndex].headers\r\n          || null,\r\n        query:\r\n          chartData.query\r\n          || chartData.subcharts[subchartIndex].query\r\n          || null,\r\n        gid:\r\n          chartData.gid\r\n          || chartData.subcharts[subchartIndex].gid\r\n          || null,\r\n      };\r\n\r\n  const url = `https://docs.google.com/spreadsheets/d/${chartData.sheetId}/gviz/tq?gid=${urlParams.gid}&headers=${urlParams.headers}&tqx${urlParams.query ? `&tq=${encodeURIComponent(urlParams.query)}` : ''}`;\r\n  const query = new google.visualization.Query(url);\r\n\r\n  return new Promise((resolve, reject) => {\r\n    query.send(response => {\r\n      if (response.isError()) {\r\n        reject(response.getMessage() + ' ' + response.getDetailedMessage());\r\n      } else {\r\n        resolve(response);\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nexport const transformDataForNivo = (dataTable, dataColumn, tooltipColumn) => {\r\n  const data = JSON.parse(dataTable.toJSON())\r\n  const transformed = [];\r\n\r\n  const parseDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const year = date.getFullYear();\r\n    const month = date.getMonth() + 1;\r\n    const day = date.getDate();\r\n    const formattedDate = `${year}-${month < 10 ? '0' + month : month}-${day < 10 ? '0' + day : day}`;\r\n    return formattedDate;\r\n  }\r\n\r\n  data.rows.forEach(row => {\r\n    // Get the date string from the first column \r\n    const dateString = row.c[0].f;\r\n    // Parse and convert the date string to a 'YYYY-MM-DD' format\r\n    const formattedDate = parseDate(dateString);\r\n    // Get the data from the appropriate column\r\n    const value = row.c[dataColumn]?.v;\r\n    // Get the tooltip from the appropriate column\r\n    const tooltip = row.c[tooltipColumn]?.v;\r\n\r\n    // If the date string and value are both valid, push them into the result array\r\n    if (dateString && value !== undefined && value !== null) {\r\n      transformed.push({\r\n        day: formattedDate,\r\n        value: value,\r\n        tooltip: tooltip\r\n      });\r\n    }\r\n  });\r\n\r\n  // Get dateRange (from - to)\r\n  const dateStrings = transformed.map(item => item.day);\r\n  const dateRange = getDateRangeForCalendarChart(dateStrings);\r\n\r\n  // Get valueRange (min - max)\r\n  const values = transformed.map(item => item.value);\r\n  const valueRange = getValueRangeForCalendarChart(values);\r\n\r\n  return {\r\n    data: transformed,\r\n    dateRange: dateRange,\r\n    valueRange: valueRange\r\n  };\r\n};\r\nexport const getDateRangeForCalendarChart = (dateStrings) => {\r\n  return {\r\n    min: dateStrings.reduce((min, current) => (current < min ? current : min)),\r\n    max: dateStrings.reduce((max, current) => (current > max ? current : max))\r\n  }\r\n}\r\nexport const getValueRangeForCalendarChart = (values) => {\r\n  return { min: Math.min(...values), max: Math.max(...values) }\r\n}\r\n\r\n// Function to generate a random ID for the google chart container\r\nexport const generateRandomID = () => {\r\n  return Math.random().toString(36).substr(2, 9); // Generates a random string of length 9\r\n}\r\n\r\n// -------- Chart options --------\r\n\r\nconst hideAnnotations = {\r\n  stem: {\r\n    length: 0,\r\n  },\r\n  textStyle: {\r\n    opacity: 0,\r\n  },\r\n  boxStyle: null,\r\n};\r\n\r\nconst returnResponsiveFontSizeInPixels = ({ isPortrait, isSmaller }) => {\r\n  return (\r\n    isSmaller ? (isPortrait ? 6 : 8) : (isPortrait ? 8 : 10)\r\n  );\r\n}\r\n\r\nexport const returnGenericOptions = (props) => {\r\n  const { chartData, subchartIndex, isPortrait, isHomepage, theme } = props;\r\n\r\n  // Define some shared styling rules for the chart\r\n  const axisTitleTextStyle = {\r\n    italic: false,\r\n    bold: true,\r\n    color: theme.palette.chart.axisTitle,\r\n    fontSize: returnResponsiveFontSizeInPixels({ isPortrait })\r\n  };\r\n  const axisTextStyle = {\r\n    color: theme.palette.chart.axisText,\r\n    fontSize: returnResponsiveFontSizeInPixels({ isPortrait })\r\n  };\r\n\r\n  // ---- Formulate the options for this specific chart:\r\n  // 1. Populate first with subchart's options (if any)\r\n  let options = chartData.subcharts?.[subchartIndex].options\r\n    ? { ...chartData.subcharts[subchartIndex].options }\r\n    : {};\r\n\r\n  // 2. Append own chart's options and then populate with universal options for all charts\r\n  options = {\r\n    ...options,\r\n    ...chartData.options,\r\n    theme: 'material',\r\n    curveType: options.curveType || chartData.options?.curveType || 'function',\r\n    crosshair: { orientation: 'both', trigger: 'focus', opacity: 0.5 },\r\n    backgroundColor: { fill: chartData.options?.backgroundColor?.fill || 'transparent' },\r\n    chartArea: {\r\n      ...chartData.options?.chartArea,\r\n      width: isPortrait ? (chartData.options?.chartArea?.width?.portrait || '80%') : (chartData.options?.chartArea?.width?.landscape || '75%'),\r\n      height: isPortrait ? (chartData.options?.chartArea?.height?.portrait || '60%') : (chartData.options?.chartArea?.height?.landscape || '70%'),\r\n    },\r\n    width: isPortrait ? (chartData.options?.width?.portrait || '100%') : (chartData.options?.width?.landscape || '100%'),\r\n    // if there is a filter, we make space for the chartFilter from the chart's height.\r\n    // value is divided in 2 because the calculation is applied twice due to\r\n    // how react-google-charts nest components\r\n    height: chartData.height || '100%',\r\n    tooltip: {\r\n      isHtml: true,\r\n      showColorCode: false\r\n    },\r\n    legend: {\r\n      alignment: isPortrait ? 'center' : 'start',\r\n      position:\r\n        chartData.options?.legend?.position\r\n        ?? (isPortrait ? 'top' : 'right'),\r\n      scrollArrows: {\r\n        activeColor: theme.palette.chart.axisTitle,\r\n        inactiveColor: theme.palette.text.secondary,\r\n      },\r\n      pagingTextStyle: {\r\n        fontSize: 10,\r\n        color: theme.palette.chart.axisTitle,\r\n        bold: true,\r\n      }\r\n    }\r\n  };\r\n\r\n  // 3. Append to vAxis and hAxis properties\r\n  options.vAxis = {\r\n    ...options.vAxis,\r\n    format: options.vAxis?.format ?? 'decimal',\r\n    title: options.vAxis?.title ?? '',\r\n    viewWindow: {\r\n      min: options.vAxis?.viewWindow?.min ?? 0,\r\n      max: options.vAxis?.viewWindow?.max ?? null,\r\n      max: options.vAxis?.viewWindow?.max ?? null,\r\n    },\r\n  };\r\n  options.hAxis = {\r\n    ...options.hAxis,\r\n    title: options.hAxis?.title ?? '',\r\n  };\r\n  // 3.1. If in portrait mode, slant the text of the hAxis\r\n  if (isPortrait) {\r\n    options.hAxis = {\r\n      ...options.hAxis,\r\n      slantedText: true,\r\n      slantedTextAngle: 30,\r\n    };\r\n  }\r\n\r\n  // 4. Override with custom colors:\r\n  // 4.1. Color scheme of all the series of this chart\r\n  if (typeof options.colors === 'string' || !options.colors) options.colors = theme.palette.chart.optionsColors[options.colors || 'multiColor'];\r\n  // 4.2. Individual color of a single serie (if given)\r\n  if (options.series) {\r\n    Object.values(options.series).forEach((_serie) => {\r\n      const serie = _serie;\r\n      if (serie.color === 'default') {\r\n        serie.color = theme.palette.primary.main;\r\n      }\r\n    });\r\n  }\r\n  // 4.3. Color of the trendline\r\n  if (options.trendlines) {\r\n    options.trendlines.forEach((_item) => {\r\n      const item = _item;\r\n      item.color = theme.palette.primary.main;\r\n    });\r\n  }\r\n  // 4.4. Color axis of the Calendar chart\r\n  if (options.colorAxis) {\r\n    switch (options.colorAxis.colors) {\r\n      case 'matchingColor':\r\n        options.colorAxis.colors = [\r\n          theme.palette.chart.colorAxisFirstColor,\r\n          theme.palette.chart.optionsColors.multiColor[options.colorAxis.colorIndex],\r\n        ];\r\n        break;\r\n      case 'default':\r\n        options.colorAxis.colors = [\r\n          theme.palette.chart.colorAxisFirstColor,\r\n          theme.palette.NYUpurple,\r\n        ];\r\n        break\r\n      // If not any of the above, then the colorAxis should be from the chart (aqi/temperature/humidity...)\r\n      default:\r\n        try {\r\n          options.colorAxis = theme.palette.chart.colorAxes[options.colorAxis.colors]\r\n        } catch {\r\n          options.colorAxis = []\r\n        }\r\n        break;\r\n    }\r\n  }\r\n  // 4.5. Colors of other elements of the chart (typographies and gridlines)\r\n  options.vAxis = {\r\n    ...options.vAxis,\r\n    titleTextStyle: axisTitleTextStyle,\r\n    textStyle: axisTextStyle,\r\n    gridlines: {\r\n      ...options.vAxis?.gridlines,\r\n      color: options.vAxis?.gridlines?.color || theme.palette.chart.gridlines\r\n    },\r\n    minorGridlines: { count: 0 },\r\n  };\r\n  options.hAxis = {\r\n    ...options.hAxis,\r\n    titleTextStyle: axisTitleTextStyle,\r\n    textStyle: axisTextStyle,\r\n    gridlines: {\r\n      ...options.hAxis?.gridlines,\r\n      color: options.hAxis?.gridlines?.color || theme.palette.chart.gridlines\r\n    },\r\n    minorGridlines: {\r\n      ...options.hAxis?.minorGridlines,\r\n      color: options.hAxis?.gridlines?.color || theme.palette.chart.gridlines,\r\n    },\r\n  };\r\n  options.legend = {\r\n    ...options.legend,\r\n    textStyle: axisTextStyle,\r\n  };\r\n  options.annotations = {\r\n    ...options.annotations,\r\n    highContrast: true,\r\n    textStyle: {\r\n      color: theme.palette.primary.contrastText,\r\n      fontSize: returnResponsiveFontSizeInPixels({ isPortrait, isSmaller: true }),\r\n      opacity: 0.8\r\n    },\r\n    stem: {\r\n      ...options.annotations?.stem,\r\n      color: theme.palette.chart.axisTitle,\r\n      thickness: 2\r\n    },\r\n    boxStyle: {\r\n      rx: theme.shape.borderRadius, // rounded corners\r\n      ry: theme.shape.borderRadius,\r\n      fill: theme.palette.chart.annotationBoxFill,\r\n      fillOpacity: 0.5\r\n    },\r\n  };\r\n\r\n  // 5. If the chart is displayed on the homepage, override the options with:\r\n  if (isHomepage) {\r\n    options = {\r\n      ...options,\r\n      chartArea: {\r\n        ...options.chartArea,\r\n        width: '80%',\r\n        height: '80%'\r\n      },\r\n      seriesSelector: false,\r\n      pointSize: 0,\r\n      enableInteractivity: false,\r\n      annotations: hideAnnotations,\r\n      legend: 'none',\r\n      vAxis: {\r\n        ...options.vAxis,\r\n        textPosition: 'none',\r\n        titleTextStyle: {\r\n          ...options.vAxis.titleTextStyle,\r\n          bold: false\r\n        },\r\n        gridlines: { color: 'transparent', count: 0 },\r\n        viewWindowMode: 'maximized'\r\n      },\r\n      hAxis: {\r\n        ...options.hAxis,\r\n        textPosition: 'none',\r\n        gridlines: { color: 'transparent', count: 0 },\r\n        titleTextStyle: {\r\n          ...options.hAxis.titleTextStyle,\r\n          bold: false\r\n        }\r\n      },\r\n    };\r\n  }\r\n\r\n  return options;\r\n}\r\n\r\nexport const returnCalendarChartOptions = (existingOptions) => {\r\n  const calendarDimensions = calculateCalendarDimensions({ cellSizeMin: 14, cellSizeMax: 18 });\r\n  return {\r\n    ...existingOptions,\r\n    width: calendarDimensions.chartWidth,\r\n    calendar: {\r\n      cellSize: calendarDimensions.cellSize,\r\n      yearLabel: {\r\n        fontSize: calendarDimensions.yearLabelFontSize\r\n      }\r\n    },\r\n    noDataPattern: {\r\n      backgroundColor: 'none',\r\n      color: 'none',\r\n    },\r\n  }\r\n}\r\n\r\nexport const returnChartControlUI = (props) => {\r\n  const { chartControl, mainChartData, mainChartOptions, subchartIndex, theme, isPortrait } = props;\r\n  let chartControlUI = {\r\n    ...chartControl.options?.ui,\r\n    snapToData: true\r\n  };\r\n\r\n  // Assign the appropriate UI for chartControl based on controlType (if existed)\r\n  if (chartControl.controlType === 'ChartRangeFilter') {\r\n    chartControlUI = {\r\n      ...chartControlUI,\r\n      chartType: mainChartData.chartType,\r\n      chartView: {\r\n        columns:\r\n          mainChartData.columns\r\n          || (mainChartData.subcharts\r\n            && mainChartData.subcharts[subchartIndex].columns)\r\n          || null\r\n          || null,\r\n      },\r\n      chartOptions: {\r\n        ...mainChartOptions,\r\n        hAxis: {\r\n          ...mainChartOptions.hAxis,\r\n          textPosition: 'out',\r\n          textStyle: { color: theme.palette.chart.axisText, fontSize: returnResponsiveFontSizeInPixels({ isPortrait, isSmaller: true }) },\r\n          title: null\r\n        },\r\n        vAxis: {\r\n          ...mainChartOptions.vAxis,\r\n          title: null\r\n        },\r\n        annotations: hideAnnotations,\r\n        legend: null,\r\n      }\r\n    };\r\n  }\r\n  return chartControlUI;\r\n}\r\n\r\nconst calculateCalendarDimensions = ({ cellSizeMin, cellSizeMax }) => {\r\n  const cellSize = Math.min(Math.max((window.innerWidth * 0.9) / 58, cellSizeMin), cellSizeMax);\r\n  return {\r\n    chartWidth: cellSize * 56, // fixed ratio\r\n    cellSize,\r\n    yearLabelFontSize: cellSize * 2\r\n  };\r\n};\r\n\r\nexport const addTouchEventListenerForChartControl = ({ controlWrapper, chartID }) => {\r\n  const touchHandler = (event) => {\r\n    var touches = event.changedTouches,\r\n      first = touches[0],\r\n      type = '';\r\n\r\n    switch (event.type) {\r\n      case 'touchstart':\r\n        type = 'mousedown';\r\n        break;\r\n      case 'touchmove':\r\n        type = 'mousemove';\r\n        break;\r\n      case 'touchend':\r\n        type = 'mouseup';\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    var simulatedEvent = new MouseEvent(type, {\r\n      bubbles: true,\r\n      cancelable: true,\r\n      view: window,\r\n      detail: 1,\r\n      screenX: first.screenX,\r\n      screenY: first.screenY,\r\n      clientX: first.clientX,\r\n      clientY: first.clientY,\r\n      button: 0, // left button\r\n      relatedTarget: null,\r\n    });\r\n\r\n    first.target.dispatchEvent(simulatedEvent);\r\n    event.preventDefault();\r\n  }\r\n\r\n  let isMounted = true; // Flag to track component's mount status\r\n  if (!controlWrapper) return;\r\n\r\n  const controlDOM = document.querySelector(`#control-${chartID}`);\r\n  if (!controlDOM) return;\r\n\r\n  ['touchstart', 'touchmove', 'touchend', 'touchcancel']\r\n    .forEach((touchEvent) => {\r\n      controlDOM.addEventListener(touchEvent, touchHandler, { capture: true });\r\n    });\r\n\r\n  return () => {\r\n    isMounted = false; // Component is unmounting\r\n\r\n    ['touchstart', 'touchmove', 'touchend', 'touchcancel'].forEach((touchEvent) => {\r\n      controlDOM.removeEventListener(touchEvent, touchHandler, { capture: true });\r\n    });\r\n  };\r\n}","import { Box } from '@mui/material/';\r\nimport { styled } from '@mui/material/styles';\r\n\r\nconst GoogleChartStyleWrapper = styled(Box, {\r\n  shouldForwardProp: (prop) => prop !== 'gradientBackgroundId' && prop !== 'isPortrait',\r\n})(({ theme, isPortrait, gradientBackgroundId }) => ({\r\n  // CSS for optional gradient background \r\n  '& svg>g:nth-of-type(2)>rect:first-of-type': {\r\n    fill: `url(#${gradientBackgroundId})`,\r\n    fillOpacity: 1,\r\n    filter: 'contrast(0.4) brightness(1.4)'\r\n  },\r\n\r\n  // CSS for HTML tooltip\r\n  '& .google-visualization-tooltip, .nivo-tooltip': {\r\n    width: 'unset !important',\r\n    maxWidth: '350px',\r\n    height: 'unset',\r\n    padding: '1em',\r\n    boxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\r\n    mozBoxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\r\n    webkitBoxShadow: '0px 2px 2px 0px rgba(204, 204, 204, 0.6)',\r\n    border: 'solid 1px',\r\n    borderColor: theme.palette.text.secondaryRGB,\r\n    fontSize: `${isPortrait ? 9 : 12}px`,\r\n    color: theme.palette.chart.tooltip.text,\r\n    background: theme.palette.chart.tooltip.background,\r\n    borderRadius: theme.shape.borderRadius,\r\n    '& ul': {\r\n      margin: '0 !important',\r\n      '& li': {\r\n        margin: '0 !important',\r\n        padding: '0 !important',\r\n        '& span': {\r\n          fontSize: `${isPortrait ? 9 : 12}px !important`,\r\n          color: `${theme.palette.chart.tooltip.text} !important`,\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  // -------- chartControl's additional stylings\r\n  '& .goog-menuitem-highlight, .goog-menuitem-hover': {\r\n    backgroundColor: `${theme.palette.primary} !important`\r\n  },\r\n\r\n  // CategoryFilter\r\n  '& .google-visualization-controls-categoryfilter': {\r\n    fontSize: '0.85rem',\r\n    marginTop: '0.75rem',\r\n    marginBottom: '-0.75rem',\r\n\r\n    '& .goog-inline-block > .goog-menu-button': {\r\n      marginTop: 0\r\n    },\r\n\r\n    '& .goog-menu-button-hover .goog-menu-button-outer-box, .goog-menu-button-hover .goog-menu-button-inner-box': {\r\n      borderColor: 'inherit !important'\r\n    },\r\n\r\n    '& .google-visualization-controls-label': {\r\n      color: theme.palette.text.secondary,\r\n      fontWeight: 500,\r\n      verticalAlign: 'middle',\r\n      marginBottom: '0.25rem'\r\n    },\r\n    '& .goog-menu-button-outer-box': {\r\n      backgroundColor: theme.palette.background.paper,\r\n      border: 'unset',\r\n\r\n      '& .goog-menu-button-inner-box': {\r\n        paddingTop: theme.spacing(0.5),\r\n        paddingBottom: theme.spacing(0.5),\r\n        paddingLeft: theme.spacing(2),\r\n        paddingRight: theme.spacing(2),\r\n        border: 'solid',\r\n        borderWidth: '0.5px',\r\n        borderRadius: theme.shape.borderRadius,\r\n        borderColor: theme.palette.text.secondary,\r\n\r\n        '& .goog-menu-button-caption': {\r\n          color: theme.palette.text.secondary\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  // DateRangeFilter\r\n  '& .google-visualization-controls-rangefilter': {\r\n    width: '100%',\r\n    fontSize: '0.75rem',\r\n    '& .goog-inline-block': {\r\n      width: '100%',\r\n    },\r\n    '& .google-visualization-controls-slider-horizontal': {\r\n      width: '90%',\r\n      margin: '0 5%',\r\n    },\r\n    '& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(1)': {\r\n      position: 'absolute',\r\n      top: '1.5em',\r\n      left: '5%'\r\n    },\r\n    '& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(2)': {\r\n      position: 'absolute',\r\n      top: '1.5em',\r\n      right: '5%'\r\n    },\r\n    '& .google-visualization-controls-slider-handle': {\r\n      background: theme.palette.primary.main\r\n    },\r\n    '& .google-visualization-controls-rangefilter-thumblabel': {\r\n      color: theme.palette.text.secondary,\r\n      padding: 0,\r\n      fontWeight: 500\r\n    },\r\n    '& .google-visualization-controls-slider-thumb': {\r\n      background: theme.palette.primary.main,\r\n      border: 'unset',\r\n      borderRadius: theme.shape.borderRadius\r\n    }\r\n  },\r\n\r\n  // These are the paths showing on top of the line chart\r\n  // and the stroke around the bar/column chart\r\n  // when the user hovers on the legend to make the serie stand out\r\n  // by Google Chart's default doesn't change color based on light/dark theme, but we modify here:\r\n  '& path[stroke-opacity=\"0.3\"], path[stroke-opacity=\"0.1\"], path[stroke-opacity=\"0.05\"], rect[stroke-opacity]': {\r\n    stroke: theme.palette.text.primary,\r\n    strokeWidth: 3\r\n  },\r\n\r\n  // Cursor of series in legends\r\n  '& [column-id]:not(:empty)': {\r\n    cursor: 'pointer',\r\n    ':hover': {\r\n      fontWeight: 600\r\n    }\r\n  }\r\n}));\r\n\r\nexport default GoogleChartStyleWrapper;\r\n","import { isValidArray } from \"../Utils\";\r\n\r\nconst normalizeColorStopOffsets = ({ offsets, minOffset, maxOffset }) => {\r\n  return offsets.map(offset => (offset - minOffset) / (maxOffset - minOffset));\r\n}\r\n\r\nconst normalizeColorStops = ({ colors, optionalMinValue, optionalMaxValue }) => {\r\n  if (!isValidArray(colors)) return [\r\n    { color: \"#fff\", offset: 0 },\r\n    { color: \"#fff\", offset: 1 }\r\n  ];\r\n\r\n  // No offsets provided, generate equally spaced offsets\r\n  if (typeof colors[0] === 'string') {\r\n    const totalColors = colors.length;\r\n    return colors.map((color, index) => ({\r\n      color: color,\r\n      offset: index / (totalColors - 1)\r\n    }));\r\n  }\r\n  // Offsets are provided, normalize them\r\n  else {\r\n    let clampedStops = colors;\r\n    if (optionalMinValue) {\r\n      clampedStops = colors.filter(colorStop => colorStop.offset >= optionalMinValue);\r\n    }\r\n    if (optionalMaxValue) {\r\n      clampedStops = colors.filter(colorStop => colorStop.offset <= optionalMaxValue);\r\n    }\r\n    const offsets = clampedStops.map(colorStop => colorStop.offset);\r\n\r\n    const minOffset = optionalMinValue || Math.min(...offsets);\r\n    const maxOffset = optionalMaxValue || Math.max(...offsets);\r\n\r\n    const normalizedOffsets = normalizeColorStopOffsets({ offsets, minOffset, maxOffset });\r\n\r\n    return clampedStops.map((colorStop, index) => ({\r\n      color: colorStop.color,\r\n      offset: normalizedOffsets[index]\r\n    }));\r\n  }\r\n}\r\n\r\n// Function to return an array of STEPS discrete colors in a gradient from an array of starting colors\r\n// Used for NivoCalendarChart\r\nexport const generateDiscreteColorGradientArray = ({ colors, numSteps = 100 }) => {\r\n  function hexToRgb(hex) {\r\n    const shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\r\n    hex = hex.replace(shorthandRegex, function (m, r, g, b) {\r\n      return r + r + g + g + b + b;\r\n    });\r\n\r\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n    return result ? [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16)]\r\n      : [null, null, null];\r\n  }\r\n\r\n  function rgbToHex(r, g, b) {\r\n    return \"#\" + [r, g, b].map(x => {\r\n      const hex = x.toString(16);\r\n      return hex.length === 1 ? '0' + hex : hex;\r\n    }).join('');\r\n  }\r\n\r\n  function interpolateColor(color1, color2, factor) {\r\n    // Return immediately if the 2 colors are the same\r\n    if (color1.every((element, index) => element === color2[index])) return color1;\r\n\r\n    // Else, calculate the middle of the 2 colors\r\n    let result = color1.slice();\r\n    for (let i = 0; i < 3; i++) {\r\n      result[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));\r\n    }\r\n    return result;\r\n  }\r\n\r\n  const normalizedColors = normalizeColorStops({ colors });\r\n  normalizedColors.forEach((colorStop) => {\r\n    colorStop.color = hexToRgb(colorStop.color)\r\n  });\r\n\r\n  let colorArray = [];\r\n  const stepPositions = Array.from({ length: numSteps }, (_, i) => i / (numSteps - 1));\r\n\r\n  for (let i = 0; i < stepPositions.length; i++) {\r\n    const pos = stepPositions[i];\r\n    let color1, color2, offset1, offset2;\r\n\r\n    for (let j = 0; j < normalizedColors.length - 1; j++) {\r\n      if (pos >= normalizedColors[j].offset && pos <= normalizedColors[j + 1].offset) {\r\n        color1 = normalizedColors[j].color;\r\n        color2 = normalizedColors[j + 1].color;\r\n        offset1 = normalizedColors[j].offset;\r\n        offset2 = normalizedColors[j + 1].offset;\r\n        break;\r\n      }\r\n    }\r\n\r\n    const localFactor = (pos - offset1) / (offset2 - offset1);\r\n    const interpolatedColor = interpolateColor(color1, color2, localFactor);\r\n    colorArray.push(rgbToHex(...interpolatedColor));\r\n  }\r\n\r\n  return colorArray;\r\n};\r\n\r\n// Function to return CSS background from an array of colors (with or without offsets)\r\nexport const generateCssBackgroundGradient = ({ gradientDirection, colors }) => {\r\n  const normalizedColors = normalizeColorStops({ colors });\r\n\r\n  return `linear-gradient(${gradientDirection}, ${normalizedColors.map(colorStop => `${colorStop.color} ${colorStop.offset * 100}%`).join(', ')})`;\r\n}\r\n\r\nexport const generateSvgFillGradient = ({ colors, optionalMinValue, optionalMaxValue }) => {\r\n  const normalizedColors = normalizeColorStops({ colors, optionalMinValue, optionalMaxValue });\r\n\r\n  return normalizedColors.map(colorStop => ({\r\n    color: colorStop.color,\r\n    offset: colorStop.offset * 100 + '%'\r\n  }));\r\n};\r\n\r\n// Gradient for background of the Google Charts\r\nexport const BackgroundGradient = ({ id, colors }) => (\r\n  <svg width={0} height={0} visibility=\"hidden\">\r\n    <defs>\r\n      <linearGradient id={id} x1=\"0\" y1=\"1\" x2=\"0\" y2=\"0\">\r\n        {colors.map((colorStop, index) => (\r\n          <stop key={index} offset={colorStop.offset} stopColor={colorStop.color} />\r\n        ))}\r\n      </linearGradient>\r\n    </defs>\r\n  </svg>\r\n);","/* eslint-disable */\r\nimport { ResponsiveCalendar } from '@nivo/calendar';\r\nimport { useEffect, useRef } from 'react';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { Box, Chip, Typography } from '@mui/material';\r\n\r\nimport parse from 'html-react-parser';\r\nimport { replacePlainHTMLWithMuiComponents } from '../../../Utils/Utils';\r\nimport { generateDiscreteColorGradientArray, generateCssBackgroundGradient } from '../../../Utils/Gradient/GradientUtils';\r\n\r\nexport const yearSpacing = 40;\r\n\r\nexport const getCalendarChartMargin = (isPortrait) => {\r\n    return isPortrait\r\n        ? { top: 20, right: 0, bottom: 0, left: 20 }\r\n        : { top: 30, right: 40, bottom: 0, left: 40 }\r\n}\r\n\r\nexport const CalendarChart = (props) => {\r\n    const { data, dateRange, valueRangeBoxTitle, valueRange, isPortrait, options } = props;\r\n\r\n    const calendarChartMargin = getCalendarChartMargin(isPortrait);\r\n\r\n    const theme = useTheme();\r\n\r\n    // Function to extract tooltip text from HTML tooltip\r\n    const extractTooltipText = (tooltip) => {\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(tooltip, 'text/html');\r\n        return doc.body.innerHTML;\r\n    };\r\n\r\n    // Function to check if a date is in the first two rows of the chart\r\n    // Used to anchor the tooltip to the bottom while hovering over\r\n    // the first two rows of the chart\r\n    const inFirstTwoRowsOfChart = (dateStr, dateRange) => {\r\n        const date = new Date(dateStr);\r\n        const dayOfWeek = date.getDay();\r\n\r\n        // Check if the date is Sunday (0) or Monday (1)\r\n        const isFirstTwoDaysOfWeek = dayOfWeek === 0 || dayOfWeek === 1;\r\n\r\n        // Extract the first year from the date range once\r\n        const firstYear = new Date(dateRange.min).getFullYear();\r\n\r\n        // Check if the date is in the first year of the date range\r\n        const isInFirstYear = date.getFullYear() === firstYear;\r\n\r\n        return isFirstTwoDaysOfWeek && isInFirstYear;\r\n    };\r\n\r\n    const colors = generateDiscreteColorGradientArray({\r\n        colors: options?.colorAxis?.colors,\r\n        numSteps: options?.colorAxis?.gradientSteps\r\n    });\r\n\r\n    const showLegend = () => {\r\n        return (\r\n            <ValueRangeBox\r\n                title={valueRangeBoxTitle}\r\n                valueRange={valueRange}\r\n                colorAxis={options?.colorAxis}\r\n                isPortrait={isPortrait}\r\n            />\r\n        )\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {options?.legend?.position !== \"none\" && showLegend()}\r\n            {showLegend()}\r\n            <ResponsiveCalendar\r\n                data={data}\r\n                from={dateRange?.min}\r\n                to={dateRange?.max}\r\n                emptyColor={'transparent'}\r\n                theme={{\r\n                    text: {\r\n                        fill: theme.palette.text.secondary,\r\n                    },\r\n                    fontSize: '0.75rem',\r\n                    tooltip: {\r\n                        container: {\r\n                            background: theme.palette.mode === 'dark' ? '#2b2b2b' : '#fff',\r\n                            color: theme.palette.text.primary,\r\n                        },\r\n                    },\r\n                    axis: {\r\n                        ticks: {\r\n                            line: {\r\n                                stroke: theme.palette.mode === 'dark' ? '#2b2b2b' : '#fff',\r\n                            },\r\n                            text: {\r\n                                fill: theme.palette.text.primary,\r\n                            },\r\n                        },\r\n                    },\r\n                    grid: {\r\n                        line: {\r\n                            stroke: theme.palette.mode === 'dark' ? '#2b2b2b' : '#fff',\r\n                        },\r\n                    },\r\n                }}\r\n                colors={colors}\r\n                minValue={options?.colorAxis?.minValue}\r\n                maxValue={options?.colorAxis?.maxValue}\r\n                margin={calendarChartMargin}\r\n                yearSpacing={yearSpacing}\r\n                monthBorderColor={theme.palette.text.primary}\r\n                monthBorderWidth={1}\r\n                daySpacing={0.25}\r\n                dayBorderWidth={0}\r\n                tooltip={({ day, value, color }) => {\r\n                    const tooltipData = data.find(item => item.day === day);\r\n                    const tooltipText = tooltipData ? extractTooltipText(tooltipData.tooltip) : '';\r\n\r\n                    return (\r\n                        <CustomTooltip\r\n                            day={day}\r\n                            color={color}\r\n                            tooltipText={tooltipText}\r\n                            dateRange={dateRange}\r\n                            inFirstTwoRowsOfChart={inFirstTwoRowsOfChart}\r\n                        />\r\n                    );\r\n                }}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\n// Custom tooltip component for the Calendar chart\r\nconst CustomTooltip = ({ day, color, tooltipText, dateRange, inFirstTwoRowsOfChart }) => {\r\n    const tooltipBoxRef = useRef(null);\r\n\r\n    // If the cell hovered over is in the first two rows of the chart,\r\n    // move the tooltip to the bottom of the chart\r\n    // Read subsequent comments to understand why we need to do this\r\n    useEffect(() => {\r\n        if (tooltipBoxRef.current && inFirstTwoRowsOfChart(day, dateRange)) {\r\n            const parentDiv = tooltipBoxRef.current.parentElement;\r\n            if (parentDiv) {\r\n                parentDiv.style.top = '11vh';\r\n            }\r\n        }\r\n    }, [tooltipBoxRef, inFirstTwoRowsOfChart]);\r\n\r\n\r\n    // Note that our Box is just a container 'inside' the tooltip\r\n    // The tooltip itself is actually the Box's parent div\r\n    return (\r\n        <Box ref={tooltipBoxRef} className='nivo-tooltip'>\r\n            <Chip sx={{ backgroundColor: color, mr: 0.5, height: '10px', width: '10px', borderRadius: '50%' }} />\r\n            {parse(tooltipText, { replace: replacePlainHTMLWithMuiComponents })}\r\n        </Box>\r\n    );\r\n};\r\n\r\nconst ValueRangeBox = ({ title, valueRange, colorAxis, isPortrait }) => {\r\n    if (valueRange?.min === null || valueRange?.max === null) return null;\r\n\r\n    const { colors, minValue, maxValue } = colorAxis;\r\n    const theme = useTheme();\r\n\r\n    const calculateMarkerPositionOnRangeBox = (value) => {\r\n        const position = ((value - minValue) / (maxValue - minValue)) * 100;\r\n        return `${position}%`;\r\n    };\r\n\r\n    const labelStyle = {\r\n        position: 'absolute',\r\n        fontSize: '0.75rem',\r\n        color: theme.palette.text.secondary,\r\n        lineHeight: 1,\r\n        textAlign: 'center',\r\n        transform: 'translateX(-50%)',\r\n        minWidth: '75px'\r\n    };\r\n    const topLabelStyle = {\r\n        top: '-1.35rem'\r\n    };\r\n    const bottomLabelStyle = {\r\n        bottom: '-1.25rem'\r\n    };\r\n\r\n    const triangleStyle = {\r\n        position: 'absolute',\r\n        width: 0,\r\n        height: 0,\r\n        borderLeft: '0.25rem solid transparent',\r\n        borderRight: '0.25rem solid transparent',\r\n        transform: 'translateX(-50%)',\r\n    };\r\n    const topTriangleStyle = {\r\n        top: '-0.5rem',\r\n        borderTop: `0.25rem solid ${theme.palette.text.secondary}`\r\n    };\r\n    const bottomTriangleStyle = {\r\n        bottom: '-0.5rem',\r\n        borderBottom: `0.25rem solid ${theme.palette.text.secondary}`\r\n    };\r\n\r\n    return (\r\n        <Box sx={{\r\n            position: 'sticky',\r\n            width: 'fit-content',\r\n            marginTop: '1.5rem',\r\n            float: 'right',\r\n            right: (isPortrait ? '0' : '50px')\r\n        }}>\r\n            <Typography sx={{\r\n                display: 'inline',\r\n                position: 'absolute',\r\n                textAlign: 'right',\r\n                transform: 'translateX(calc(-100% - 0.5rem))',\r\n                fontSize: '0.75rem',\r\n                lineHeight: 1.25,\r\n                fontWeight: 500,\r\n                color: 'text.secondary'\r\n            }}>\r\n                {title}\r\n            </Typography>\r\n            <Box sx={{\r\n                background: generateCssBackgroundGradient({ gradientDirection: 'to right', colors: colors }),\r\n                color: theme.palette.text.secondary,\r\n                border: `1px solid ${theme.palette.text.secondary}`,\r\n                width: isPortrait ? '250px' : '300px',\r\n                height: '1rem',\r\n                position: 'relative',\r\n                justifyContent: 'space-between',\r\n            }}>\r\n                <span style={{ ...labelStyle, ...topLabelStyle, left: calculateMarkerPositionOnRangeBox(valueRange.min) }}>min: {valueRange.min}</span>\r\n                <span style={{ ...labelStyle, ...bottomLabelStyle, left: calculateMarkerPositionOnRangeBox(valueRange.max) }}>max: {valueRange.max}</span>\r\n                <div style={{ ...triangleStyle, ...topTriangleStyle, left: calculateMarkerPositionOnRangeBox(valueRange.min) }}></div>\r\n                <div style={{ ...triangleStyle, ...bottomTriangleStyle, left: calculateMarkerPositionOnRangeBox(valueRange.max) }}></div>\r\n            </Box>\r\n        </Box>\r\n    );\r\n\r\n\r\n};\r\n\r\n","/* eslint-disable */\r\n\r\nimport { styled } from '@mui/material/styles';\r\nimport { Paper } from '@mui/material';\r\n\r\nimport { addDays, endOfDay, startOfDay } from \"date-fns\";\r\nimport AggregationType from './AggregationType';\r\n\r\nexport const returnCustomStaticRanges = ({ today, minDateOfDataset, aggregationType }) => {\r\n  const hourlyReturn = [\r\n    {\r\n      label: \"Last 14d\",\r\n      range: () => ({\r\n        startDate: startOfDay(addDays(today, -14)),\r\n        endDate: endOfDay(today)\r\n      })\r\n    },\r\n    {\r\n      label: \"Last 30d\",\r\n      range: () => ({\r\n        startDate: startOfDay(addDays(today, -30)),\r\n        endDate: endOfDay(today)\r\n      })\r\n    }\r\n  ];\r\n\r\n  const dailyReturn = [{\r\n    label: \"Last 90d\",\r\n    range: () => ({\r\n      startDate: startOfDay(addDays(today, -90)),\r\n      endDate: endOfDay(today)\r\n    })\r\n  },\r\n  {\r\n    label: \"Last 365d\",\r\n    range: () => ({\r\n      startDate: startOfDay(addDays(today, -365)),\r\n      endDate: endOfDay(today)\r\n    })\r\n  },\r\n  {\r\n    label: \"All Time\",\r\n    range: () => ({\r\n      startDate: minDateOfDataset,\r\n      endDate: endOfDay(today)\r\n    })\r\n  }\r\n  ];\r\n\r\n  return (aggregationType === AggregationType.hourly) ? hourlyReturn : [...hourlyReturn, ...dailyReturn];\r\n};\r\n\r\nexport const StyledDateRangePicker = styled(Paper)(({ theme, showPickerPanel, smallScreen }) => ({\r\n  zIndex: showPickerPanel === true && 1000,\r\n  position: \"relative\",\r\n  padding: showPickerPanel ? theme.spacing(1) : 0,\r\n  margin: (showPickerPanel && !smallScreen) ? theme.spacing(-1) : 0,\r\n  maxWidth: '100%',\r\n  background: showPickerPanel ? theme.palette.customAlternateBackground : 'transparent',\r\n  boxShadow: showPickerPanel === false && 'none',\r\n  '& .rdrDayToday .rdrDayNumber span:after': {\r\n    background: theme.palette.secondary\r\n  },\r\n  '& .rdrDateDisplayWrapper, .rdrCalendarWrapper, .rdrDefinedRangesWrapper, .rdrStaticRange, .rdrDateDisplayItem': {\r\n    background: 'transparent'\r\n  },\r\n  '& .rdrDateInput': {\r\n    borderRadius: theme.shape.borderRadius,\r\n    boxShadow: 'none'\r\n  },\r\n  '& .rdrDateDisplayItemActive': {\r\n    border: showPickerPanel === false && 'none'\r\n  },\r\n  '& .rdrDateDisplay': {\r\n    margin: 0,\r\n    minWidth: \"20rem\"\r\n  },\r\n  '& .rdrDateDisplayItem': {\r\n    margin: 0,\r\n    borderRadius: showPickerPanel ? theme.shape.borderRadius : 0,\r\n    \"&:hover:not(.rdrDateDisplayItemActive)\": {\r\n      border: showPickerPanel ? `1px solid ${theme.palette.action.disabled}` : \"none\"\r\n    }\r\n  },\r\n  '& .rdrDateDisplayItem:hover:not(.rdrDateDisplayItemActive)': {\r\n    border: showPickerPanel === false && '1px solid transparent'\r\n  },\r\n  '& .rdrDateDisplayItem + .rdrDateDisplayItem': {\r\n    margin: 0\r\n  },\r\n  '& .rdrDateDisplayItem:first-of-type': {\r\n    borderRight: showPickerPanel === false && `1px solid ${theme.palette.action.disabled} !important`\r\n  },\r\n  '& .rdrMonthAndYearWrapper, .rdrInputRanges': {\r\n    display: showPickerPanel === false && 'none !important',\r\n    padding: 0\r\n  },\r\n  '& .rdrMonthName': {\r\n    display: 'none',\r\n  },\r\n  '& .rdrDefinedRangesWrapper, .rdrMonths': {\r\n    display: showPickerPanel === false && 'none'\r\n  },\r\n  '&  .rdrInfiniteMonths': {\r\n    visibility: showPickerPanel === false && 'hidden',\r\n    width: \"100% !important\",\r\n    maxWidth: \"675px\",\r\n    margin: \"auto\"\r\n  },\r\n  '& .rdrDateDisplayWrapper': {\r\n    minWidth: '18rem',\r\n    borderRadius: theme.shape.borderRadius,\r\n    border: showPickerPanel ? \"none\" : `1px solid ${theme.palette.action.disabled}`,\r\n    \"&:hover\": {\r\n      border: showPickerPanel ? \"none\" : `1px solid ${theme.palette.text.primary}`,\r\n    }\r\n  },\r\n  '& .rdrDateRangePickerWrapper': {\r\n    width: '100%',\r\n    flexDirection: 'column-reverse'\r\n  },\r\n  '& .rdrStaticRanges': {\r\n    flexDirection: 'row',\r\n    minWidth: '21rem'\r\n  },\r\n  '& .rdrStaticRangeLabel': {\r\n    color: theme.palette.text.secondary,\r\n    borderRadius: theme.shape.borderRadius,\r\n    padding: `${theme.spacing(0.5)} ${theme.spacing(1)}`\r\n  },\r\n  '& .rdrDefinedRangesWrapper': {\r\n    border: 'none',\r\n    width: '100%'\r\n  },\r\n  '& .rdrNextPrevButton': {\r\n    background: theme.palette.primary.main,\r\n    borderRadius: theme.shape.borderRadius,\r\n    opacity: 1,\r\n    '&:hover': {\r\n      opacity: 0.5,\r\n      background: theme.palette.primary.main\r\n    }\r\n  },\r\n  '& .rdrNextPrevButton > i': {\r\n    color: \"white\"\r\n  },\r\n  '& .rdrNextButton > i': {\r\n    borderColor: `transparent transparent transparent white`\r\n  },\r\n  '& .rdrPprevButton > i': {\r\n    borderColor: `transparent white transparent transparent`\r\n  },\r\n  '& .rdrStaticRange': {\r\n    border: 'none'\r\n  },\r\n  '& .rdrStaticRangeSelected > .rdrStaticRangeLabel, .rdrMonthAndYearPickers': {\r\n    color: theme.palette.primary.main\r\n  },\r\n  '& .rdrMonthAndYearPickers': {\r\n    fontSize: '1rem'\r\n  },\r\n  '& .rdrStaticRange:hover .rdrStaticRangeLabel, .rdrStaticRange:focus .rdrStaticRangeLabel': {\r\n    background: theme.palette.customBackground.toString()\r\n  },\r\n  '& .rdrDayNumber span': {\r\n    color: theme.palette.text.primary.toString()\r\n  },\r\n  '& .rdrDayPassive .rdrDayNumber span': {\r\n    opacity: 0.5\r\n  },\r\n  '& .rdrMonthAndYearWrapper select': {\r\n    color: theme.palette.text.secondary.toString(),\r\n    background: 'none',\r\n    padding: `${theme.spacing(1)} ${theme.spacing(2)}`,\r\n    '&:hover': {\r\n      border: `1px solid ${theme.palette.text.secondary}`\r\n    }\r\n  },\r\n  '& .rdrDateDisplayItem input': {\r\n    color: theme.palette.text.secondary\r\n  },\r\n  '& .rdrDayDisabled': {\r\n    backgroundColor: theme.palette.customBackground\r\n  },\r\n  '& .rdrDayEndOfMonth .rdrInRange, .rdrDayEndOfMonth .rdrStartEdge, .rdrDayEndOfWeek .rdrInRange, .rdrDayEndOfWeek .rdrStartEdge, .rdrEndEdge, .rdrDayEndOfMonth .rdrDayInPreview, .rdrDayEndOfMonth .rdrDayStartPreview, .rdrDayEndOfWeek .rdrDayInPreview, .rdrDayEndOfWeek .rdrDayStartPreview, .rdrDayEndPreview': {\r\n    borderTopRightRadius: '2rem',\r\n    borderBottomRightRadius: '2rem'\r\n  },\r\n  '& .rdrStartEdge, .rdrDayStartOfMonth .rdrInRange, .rdrDayStartOfMonth .rdrEndEdge, .rdrDayStartOfWeek .rdrInRange, .rdrDayStartOfWeek .rdrEndEdge, .rdrDayStartOfMonth .rdrDayInPreview, .rdrDayStartOfMonth .rdrDayEndPreview, .rdrDayStartOfWeek .rdrDayInPreview, .rdrDayStartOfWeek .rdrDayEndPreview, .rdrDayStartPreview': {\r\n    borderTopLeftRadius: '2rem',\r\n    borderBottomLeftRadius: '2rem'\r\n  },\r\n  '& .rdrStartEdge, .rdrDayStartOfWeek .rdrInRange, .rdrDayStartOfMonth .rdrInRange, .rdrDayStartOfMonth .rdrEndEdge, .rdrDayStartOfWeek .rdrEndEdge': {\r\n    left: 0\r\n  },\r\n  '& .rdrEndEdge, .rdrDayEndOfWeek .rdrInRange, .rdrDayEndOfMonth .rdrInRange, .rdrDayEndOfWeek .rdrStartEdge': {\r\n    right: 0\r\n  },\r\n  '& .rdrSelected, .rdrInRange, .rdrStartEdge, .rdrEndEdge': {\r\n    top: '0px',\r\n    bottom: '0px',\r\n  },\r\n  '& .rdrMonths': {\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  },\r\n  '& .rdrDay': {\r\n    marginBottom: \"1px\",\r\n    '& span': {\r\n      top: '0px',\r\n      bottom: '0px'\r\n    }\r\n  },\r\n  '& .rdrMonthsHorizontal': {\r\n    overflowY: 'hidden'\r\n  },\r\n  '& .rdrDateInput:first-of-type:before': {\r\n    content: '\"\"',\r\n    backgroundImage: `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' class='MuiSvgIcon-root' focusable='false' aria-hidden='true' viewBox='0 0 24 24' data-testid='DateRangeIcon'%3E%3Cpath d='M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z' fill='${theme.palette.text.secondary}'/%3E%3C/svg%3E\")`,\r\n    width: \"0.75rem\",\r\n    height: \"0.75rem\",\r\n    display: \"block\",\r\n    position: \"absolute\",\r\n    top: \"50%\",\r\n    transform: \"translateY(-50%)\",\r\n    left: \"0.75rem\"\r\n  },\r\n  '& .rdrStaticRangeSelected span': {\r\n    color: theme.palette.primary.main\r\n  },\r\n  '& .rdrDayToday .rdrDayNumber span:after': {\r\n    background: theme.palette.secondary.main,\r\n    width: \"0.25rem\",\r\n    height: \"0.25rem\",\r\n    borderRadius: \"50%\"\r\n  }\r\n}));","import { ToggleButton, ToggleButtonGroup, Typography, Stack } from '@mui/material';\r\n\r\nimport AggregationType from './AggregationType';\r\n\r\nexport default function AggregationTypeToggle({ aggregationType, setAggregationType, smallScreen }) {\r\n  const handleChange = (event, newType) => {\r\n    if (newType !== null) {\r\n      setAggregationType(newType);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Stack\r\n      direction=\"row\"\r\n      alignItems=\"center\"\r\n      spacing={1}\r\n    >\r\n      <Typography variant=\"caption\" display=\"block\" color=\"text.secondary\">\r\n        DATA AVERAGE\r\n      </Typography>\r\n\r\n      <ToggleButtonGroup\r\n        color=\"primary\"\r\n        value={aggregationType}\r\n        exclusive\r\n        onChange={handleChange}\r\n        aria-label=\"aggregation type toggle for graph average\"\r\n        size=\"small\"\r\n      >\r\n        <ToggleButton\r\n          size=\"small\"\r\n          sx={{ textTransform: \"capitalize !important\", px: 1.25, py: 0.5 }}\r\n          value={AggregationType.hourly}\r\n          aria-label={AggregationType.hourly}\r\n        >\r\n          {AggregationType.hourly}\r\n        </ToggleButton>\r\n        <ToggleButton\r\n          size=\"small\"\r\n          sx={{ textTransform: \"capitalize !important\", px: 1.25, py: 0.5 }}\r\n          value={AggregationType.daily}\r\n          aria-label={AggregationType.daily}\r\n        >\r\n          {AggregationType.daily}\r\n        </ToggleButton>\r\n      </ToggleButtonGroup>\r\n    </Stack >\r\n  );\r\n}","/* eslint-disable */\r\n\r\nimport { useState, useRef, useEffect, useContext } from 'react';\r\n\r\nimport { DateRangePicker, createStaticRanges } from 'react-date-range';\r\nimport 'react-date-range/dist/styles.css'; // main style file\r\nimport 'react-date-range/dist/theme/default.css'; // theme css file\r\n\r\nimport { CircularProgress, useMediaQuery, useTheme } from '@mui/material';\r\nimport { Alert, Button, Stack } from '@mui/material';\r\n\r\nimport { StyledDateRangePicker, returnCustomStaticRanges } from './DateRangePickerUtils';\r\nimport { ChartEndpoints, getHistoricalChartApiUrl } from '../../Utils/ApiUtils';\r\nimport AggregationTypeToggle from './AggregationTypeToggle';\r\nimport AggregationType from './AggregationType';\r\nimport { DashboardContext } from '../../ContextProviders/DashboardContext';\r\n\r\nimport { differenceInDays, isSameDay, format } from 'date-fns';\r\nimport { fetchDataFromURL } from '../DatasetDownload/DatasetFetcher';\r\n\r\nconst InvalidRangeMessages = {\r\n  tooLong: \"HOURLY data is limited to max 30d\",\r\n  sameDay: \"Start and end dates must be different\"\r\n}\r\n\r\nconst CustomDateRangePicker = (props) => {\r\n  const { minDateOfDataset, dataType } = props;\r\n\r\n  const { currentSchoolID, setIndividualChartData } = useContext(DashboardContext);\r\n  const [aggregationType, setAggregationType] = useState(AggregationType.hourly);\r\n\r\n  const today = new Date();\r\n\r\n  const [invalidRangeMessage, setInvalidRangeMessage] = useState();\r\n\r\n  const theme = useTheme();\r\n  const smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n\r\n  // Keep track of the date range being selected by the user\r\n  const [selectedRange, setSelectedRange] = useState([\r\n    { ...returnCustomStaticRanges({ today, minDateOfDataset })[0].range(), key: 'selection' } // Initialize with the range of the first static range\r\n  ]);\r\n\r\n  const [chartUrl, setChartUrl] = useState();\r\n\r\n  // Control displaying / hiding of the date range picker\r\n  const [showPickerPanel, setShowPickerPanel] = useState(false);\r\n  const paperRef = useRef(null);\r\n\r\n  const [isFetchingData, setIsFetchingData] = useState(false);\r\n\r\n  // Hide or show the date-range-picker panel\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (paperRef.current && !paperRef.current.contains(event.target)) {\r\n        setShowPickerPanel(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleClickOutside);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [paperRef]);\r\n\r\n  const checkValidRange = (selectedRange) => {\r\n    const { startDate, endDate } = selectedRange;\r\n\r\n    // Start date and end date can't be the same date\r\n    if (isSameDay(startDate, endDate)) {\r\n      setInvalidRangeMessage(InvalidRangeMessages.sameDay);\r\n      return;\r\n    }\r\n    else {\r\n      setInvalidRangeMessage(null);\r\n    }\r\n\r\n    // Restrict the selection to only 30 days if aggregationType is hourly\r\n    if (aggregationType === AggregationType.hourly) {\r\n      const diff = differenceInDays(endDate, startDate);\r\n      setInvalidRangeMessage((diff > 30) ? InvalidRangeMessages.tooLong : null);\r\n    }\r\n    // No restriction for daily aggregationType\r\n    else {\r\n      if (invalidRangeMessage !== null) setInvalidRangeMessage(null);\r\n    }\r\n  }\r\n\r\n  // Method to handle date range selection changes\r\n  const handleSelect = (ranges) => {\r\n    if (!ranges) return;\r\n\r\n    checkValidRange(ranges.selection)\r\n    setSelectedRange([ranges.selection]);\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkValidRange(selectedRange[0]);\r\n  }, [aggregationType]);\r\n\r\n  // Send query request to backend when APPLY button is clicked\r\n  // Check if a new date range is selected as well\r\n  const handleApplyButtonClick = (event) => {\r\n    if (invalidRangeMessage !== null) return;\r\n\r\n    event.stopPropagation(); // Prevents Paper onClick from firing\r\n\r\n    const newUrl = getHistoricalChartApiUrl({\r\n      endpoint: ChartEndpoints.historical,\r\n      school_id: currentSchoolID,\r\n      aggregationType: aggregationType,\r\n      dataType: dataType,\r\n      startDate: format(selectedRange[0].startDate, 'yyyy-MM-dd'), // only one range can be selected at a time --> [0]\r\n      endDate: format(selectedRange[0].endDate, 'yyyy-MM-dd')\r\n    });\r\n\r\n    if (newUrl !== chartUrl) {\r\n      setIsFetchingData(true);\r\n\r\n      fetchDataFromURL({\r\n        url: newUrl,\r\n        extension: 'json',\r\n        needsAuthorization: true\r\n      })\r\n        .then((data) => {\r\n          setIndividualChartData(0, data); // first chart -> chartIndex = 0\r\n          setChartUrl(newUrl);\r\n          setIsFetchingData(false);\r\n          setShowPickerPanel(false);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n\r\n  };\r\n\r\n  const renderApplyButtonLabel = () => {\r\n    return (\r\n      isFetchingData ? <CircularProgress disableShrink size=\"1.4375rem\" color=\"inherit\" /> : \"APPLY\"\r\n    )\r\n  };\r\n\r\n  return (\r\n    <StyledDateRangePicker\r\n      showPickerPanel={showPickerPanel}\r\n      smallScreen={smallScreen}\r\n      ref={paperRef}\r\n      elevation={8}\r\n      onClick={() => setShowPickerPanel(true)}\r\n    >\r\n      <Stack direction={\"column\"} spacing={1}>\r\n        <DateRangePicker\r\n          ranges={selectedRange}\r\n          onChange={handleSelect}\r\n          staticRanges={\r\n            createStaticRanges(\r\n              returnCustomStaticRanges({\r\n                today, minDateOfDataset, aggregationType\r\n              })\r\n            )\r\n          }\r\n          inputRanges={[]}\r\n          rangeColors={[theme.palette.primary.main, theme.palette.secondary.main, theme.palette.text.secondary]}\r\n          minDate={minDateOfDataset}\r\n          maxDate={today}\r\n          months={1}\r\n          showMonthAndYearPickers={false}\r\n          direction={\"horizontal\"}\r\n          fixedHeight={true}\r\n          preventSnapRefocus={true}\r\n          calendarFocus=\"backwards\"\r\n          startDatePlaceholder=\"Start Date\"\r\n          endDatePlaceholder=\"End Date\"\r\n          editableDateInputs={true}\r\n          showMonthArrow={true}\r\n        />\r\n\r\n        {showPickerPanel && (\r\n          <Stack\r\n            direction=\"column\"\r\n            alignItems=\"end\"\r\n            width=\"100%\"\r\n            spacing={1}\r\n          >\r\n            <AggregationTypeToggle\r\n              aggregationType={aggregationType}\r\n              setAggregationType={setAggregationType}\r\n              smallScreen={smallScreen}\r\n            />\r\n            <Stack direction=\"row\" spacing={1}>\r\n              {\r\n                invalidRangeMessage && displayErrorMessage(invalidRangeMessage)\r\n              }\r\n              <Button\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                disabled={invalidRangeMessage === null ? false : true}\r\n                onClick={handleApplyButtonClick}\r\n                sx={{\r\n                  zIndex: 1005,\r\n                  transform: \"translateY(-1px)\"\r\n                }}\r\n              >\r\n                {renderApplyButtonLabel()}\r\n              </Button>\r\n            </Stack>\r\n\r\n          </Stack>\r\n\r\n        )}\r\n      </Stack>\r\n\r\n    </StyledDateRangePicker>\r\n\r\n  );\r\n};\r\n\r\nconst displayErrorMessage = (invalidRangeMessage) => {\r\n  return (\r\n    <Alert\r\n      severity=\"error\"\r\n      sx={{\r\n        py: 0.5,\r\n        px: 1,\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        \"& div\": {\r\n          fontSize: \"0.75rem\",\r\n          p: 0\r\n        },\r\n        \"& .MuiAlert-icon\": {\r\n          fontSize: \"1rem\",\r\n          mr: 0.5\r\n        }\r\n      }}\r\n    >\r\n      {invalidRangeMessage}\r\n    </Alert>\r\n  )\r\n}\r\n\r\nexport default CustomDateRangePicker;\r\n","/* eslint-disable */\r\n\r\nimport { useState, useEffect, useContext, useMemo } from 'react';\r\n\r\nimport { GoogleContext } from '../../ContextProviders/GoogleContext';\r\n\r\nimport { Box, Stack, Grid, Alert } from '@mui/material/';\r\n\r\nimport { useTheme } from '@mui/material/styles';\r\nimport SeriesSelector from './SubchartUtils/SeriesSelector';\r\nimport { generateRandomID, returnGenericOptions, returnCalendarChartOptions, returnChartControlUI, ChartControlType, addTouchEventListenerForChartControl, getDateRangeForCalendarChart, getValueRangeForCalendarChart } from '../GoogleChartHelper';\r\n\r\nimport GoogleChartStyleWrapper from './SubchartUtils/GoogleChartStyleWrapper';\r\n\r\nimport LoadingAnimation from '../../Components/LoadingAnimation';\r\n\r\nimport { CalendarChart, getCalendarChartMargin, yearSpacing } from './NivoCharts/NivoCalendarChart'\r\nimport { generateSvgFillGradient, BackgroundGradient } from '../../Utils/Gradient/GradientUtils';\r\n\r\nimport CustomDateRangePicker from '../../Components/DateRangePicker/CustomDateRangePicker'\r\nimport { isValidArray } from '../../Utils/Utils';\r\nimport { returnSelectedDataType } from '../../Utils/AirQuality/DataTypes';\r\n\r\nconst dummyArray = [\r\n  ['', ''],\r\n  ['', 0],\r\n];\r\n\r\nconst NoChartToRender = ({ dataType }) => {\r\n  return (\r\n    <Alert severity=\"error\" sx={{ my: 2 }}>\r\n      This sensor does not have&nbsp;\r\n      <Box component=\"span\" textTransform=\"capitalize\">\r\n        {dataType}\r\n      </Box>\r\n      &nbsp;data\r\n    </Alert>\r\n  )\r\n}\r\n\r\nexport default function SubChart(props) {\r\n  // Props\r\n  const { chartData, subchartIndex, windowSize, isPortrait, isHomepage, height, maxHeight, selectedDataType, allowedDataTypes } = props;\r\n\r\n  // Use GoogleContext for loading and manipulating the Google Charts\r\n  const google = useContext(GoogleContext);\r\n\r\n  // States of the Google Charts\r\n  const [dataTable, setDataTable] = useState();\r\n  const [chartWrapper, setChartWrapper] = useState();\r\n  const [dashboardWrapper, setDashboardWrapper] = useState();\r\n  const [controlWrapper, setControlWrapper] = useState();\r\n\r\n  const [previousChartData, setPreviousChartData] = useState();\r\n\r\n  // Get the current theme\r\n  const theme = useTheme();\r\n\r\n  // To determine the first time the chart renders to show/hide the LoadingAnimation\r\n  const [isFirstRender, setIsFirstRender] = useState(true);\r\n\r\n  // To determine if the charts should be rendered or not\r\n  const [shouldRenderChart, setShouldRenderChart] = useState(true);\r\n  const [renderChartNow, setRenderChartNow] = useState(false);\r\n\r\n  // Keep track of the columns (series) of the chart\r\n  const [allInitialColumns, setAllInitialColumns] = useState();\r\n  const [dataColumns, setDataColumns] = useState();\r\n  const [initialVAxisRange, setInitialVAxisRage] = useState();\r\n\r\n  // Define the DOM container's ID for drawing the google chart inside\r\n  const [chartID, __] = useState(generateRandomID());\r\n\r\n  // Calendar chart's properties\r\n  const [chartTotalHeight, setChartTotalHeight] = useState(200);\r\n\r\n  // Get the options object for chart\r\n  let options = useMemo(() => {\r\n    let opts = returnGenericOptions({ ...props, theme });\r\n    if (chartData.chartType === 'Calendar') {\r\n      opts = returnCalendarChartOptions(opts);\r\n    }\r\n    return opts;\r\n  }, [props, theme, chartData.chartType]);\r\n  // State to store transformed data for CalendarChart\r\n  const [calendarData, setCalendarData] = useState(null);\r\n  const [calendarHeight, setCalendarHeight] = useState(200);\r\n  const [containerWidth, setContainerWidth] = useState(1200); // max width of the chart container\r\n  // Early exit for 'Calendar' chartType\r\n  if (chartData.chartType === 'Calendar') {\r\n    useEffect(() => {\r\n      const dataArray = chartData.dataArray\r\n        || (chartData.subcharts\r\n          && chartData.subcharts[subchartIndex].dataArray)\r\n        || null\r\n        || null;\r\n\r\n      if (!isValidArray(dataArray)) {\r\n        setShouldRenderChart(false);\r\n        return; // early return if there is no data to render\r\n      }\r\n\r\n      const dateStrings = dataArray.map(item => item.day);\r\n      const values = dataArray.map(item => item.value);\r\n      const dateRange = getDateRangeForCalendarChart(dateStrings);\r\n\r\n      setCalendarData({\r\n        data: dataArray,\r\n        dateRange: dateRange,\r\n        valueRange: getValueRangeForCalendarChart(values)\r\n      });\r\n\r\n      // Get the number of years in the dateRange\r\n      const startYear = new Date(dateRange.min).getFullYear();\r\n      const endYear = new Date(dateRange.max).getFullYear();\r\n      const numberOfYear = endYear - startYear + 1;\r\n\r\n      // Calculate the size of each cell\r\n      const cellSize = Math.min(containerWidth / 60, 20); // max cell size of 20\r\n      const yearHeight = cellSize * 7; // Height for one year\r\n\r\n      const calendarChartMargin = getCalendarChartMargin(isPortrait);\r\n\r\n      // Calculate the total height based on the number of years and margins\r\n      let totalHeight;\r\n      if (numberOfYear == 1) {\r\n        totalHeight = yearHeight + yearSpacing + calendarChartMargin.top + calendarChartMargin.bottom\r\n      }\r\n      else {\r\n        totalHeight = numberOfYear * (yearHeight + yearSpacing) + calendarChartMargin.top + calendarChartMargin.bottom;\r\n      }\r\n      setCalendarHeight(totalHeight);\r\n      setShouldRenderChart(true);\r\n    }, [chartData]);\r\n\r\n    return (\r\n      shouldRenderChart ? (\r\n        <GoogleChartStyleWrapper\r\n          isPortrait={isPortrait}\r\n          className={chartData.chartType}\r\n          style={{\r\n            position: 'relative',\r\n            minWidth: '700px',\r\n            minHeight: isPortrait ? '200px' : `${calendarHeight}px`,\r\n            height: `${calendarHeight}px`,\r\n            maxHeight: isPortrait ? '550px' : 'none',\r\n          }}\r\n        >\r\n          {calendarData ? (\r\n            <CalendarChart\r\n              data={calendarData.data}\r\n              dateRange={calendarData.dateRange}\r\n              valueRangeBoxTitle={returnSelectedDataType({ dataTypeKey: selectedDataType, dataTypes: allowedDataTypes, showUnit: true })}\r\n              valueRange={calendarData.valueRange}\r\n              isPortrait={isPortrait}\r\n              options={options}\r\n            />\r\n          ) : (\r\n            <Box sx={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\r\n              <LoadingAnimation />\r\n            </Box>\r\n          )}\r\n        </GoogleChartStyleWrapper>\r\n      ) : <NoChartToRender dataType={returnSelectedDataType({ dataTypeKey: selectedDataType, dataTypes: allowedDataTypes })} />\r\n    );\r\n  }\r\n\r\n  // Properties for chart control (if existed)\r\n  let hasChartControl = false;\r\n  let chartControlOptions;\r\n  // Only show the chart control if:\r\n  // It exists in the database (either for all subcharts or just for a particular subchart)\r\n  // And if the chart is currently not shown on homePage\r\n  let chartControl = chartData.control || chartData.subcharts?.[subchartIndex].control;\r\n  if (chartControl && (isHomepage !== true)) {\r\n    hasChartControl = true;\r\n\r\n    // Get the options for chartControl if hasChartControl\r\n    chartControlOptions = {\r\n      ...chartControl.options,\r\n      ui: returnChartControlUI({\r\n        chartControl,\r\n        mainChartData: chartData,\r\n        mainChartOptions: options,\r\n        subchartIndex,\r\n        theme,\r\n        isPortrait\r\n      })\r\n    };\r\n\r\n    // Swap touch events for mouse events on ChartRangeControl\r\n    // as it doesn't support touch events on mobile\r\n    if (chartControl.controlType === 'ChartRangeFilter') {\r\n      useEffect(() => {\r\n        const cleanupTouchEventListener = addTouchEventListenerForChartControl({ controlWrapper, chartID });\r\n        return cleanupTouchEventListener;\r\n      }, [controlWrapper]);\r\n    }\r\n  }\r\n\r\n  // Properties for selecting (showing or hiding) the serie(s)\r\n  const seriesSelector = options.seriesSelector || false;\r\n\r\n  // Properties for date-range-picker\r\n  const dateRangePicker = options.dateRangePicker || null;\r\n\r\n  // Properties for data formatters\r\n  const formatters = options.formatters || null;\r\n\r\n  // Set new options prop and re-render the chart if theme or isPortrait changes\r\n  useEffect(() => {\r\n    if (seriesSelector) handleSeriesSelection({ newDataColumns: dataColumns }); // this function set new options, too\r\n    else {\r\n      chartWrapper?.setOptions({\r\n        ...options,\r\n        ...(chartData.chartType === 'Calendar' && { height: chartTotalHeight })\r\n      });\r\n\r\n      chartWrapper?.draw();\r\n      if (hasChartControl) {\r\n        controlWrapper?.setOptions(chartControlOptions);\r\n        controlWrapper?.draw();\r\n      }\r\n    }\r\n  }, [theme, isPortrait, windowSize, chartTotalHeight]);\r\n\r\n  // Set new initialColumnsColors if the theme changes\r\n  // This only applies to when seriesSelector.method == \"setViewColumn\"\r\n  useEffect(() => {\r\n    if (!dataColumns) return;\r\n    if (seriesSelector && seriesSelector.method == \"setViewColumn\") {\r\n      setInitialColumnsColors({ dataColumns: dataColumns });\r\n      handleSeriesSelection({ newDataColumns: dataColumns });\r\n    }\r\n  }, [theme]);\r\n\r\n  const getInitialColumns = ({ chartWrapper, dataTable, seriesSelector }) => {\r\n    // Update the initial DataView's columns (often, all of the series are displayed initially)\r\n    var initialView = chartWrapper.getView();\r\n    // If (optional) columns is not specified in database\r\n    // Assign it from DataTable\r\n    if (initialView.columns == null) {\r\n      const viewFromDataTable = new google.visualization.DataView(dataTable);\r\n      chartWrapper.setView({\r\n        columns: viewFromDataTable.columns\r\n      });\r\n      initialView = chartWrapper.getView();\r\n    }\r\n\r\n    let shouldAssignDomainRoleToFistColumn = true; // variable to only assign type: 'domain' to the very first column\r\n    let dataSeriesIndex = 0;\r\n    const allInitialColumns = initialView.columns.map((col, index) => {\r\n      // A column can either be a number (that denotes the index of the sourceColumn) or an object\r\n      // The code below harmonize all columns to be an object to store crucial data to toggle their visibility\r\n      if (typeof col === 'number') col = {\r\n        role: shouldAssignDomainRoleToFistColumn ? 'domain' : 'data',\r\n        sourceColumn: col\r\n      }\r\n      col.label = dataTable.getColumnLabel(col.sourceColumn);\r\n      col.indexInAllInitialColumns = index;\r\n\r\n      shouldAssignDomainRoleToFistColumn = shouldAssignDomainRoleToFistColumn && false;\r\n\r\n      // Set the visibility of data column, \r\n      if (col.role === 'data') {\r\n        // If defaultSeriesToDisplayInitially is presented\r\n        // then, only show these series\r\n        if (seriesSelector.defaultSeriesToDisplayInitially) {\r\n          if (seriesSelector.defaultSeriesToDisplayInitially.includes(index)) {\r\n            col.selected = true;\r\n          }\r\n          else {\r\n            col.selected = false;\r\n          }\r\n        }\r\n        // If no defaultSeriesToDisplayInitially is presented\r\n        else {\r\n          // then, all data columns are selected if multiple series are selectable\r\n          if (seriesSelector.allowMultiple) {\r\n            col.selected = true;\r\n          } else {\r\n            // else for single serie selector, only first data column is selected\r\n            if (dataSeriesIndex === 0) {\r\n              col.selected = true;\r\n            } else {\r\n              col.selected = false;\r\n            }\r\n          }\r\n        }\r\n\r\n        col.seriesIndex = dataSeriesIndex;\r\n        dataSeriesIndex++;\r\n      }\r\n      return col;\r\n    });\r\n    setAllInitialColumns(allInitialColumns);\r\n    const initialVAxisRange = getInitialVAxisRange({ dataTable: dataTable, allInitialColumns: allInitialColumns });\r\n    setInitialVAxisRage(initialVAxisRange);\r\n    // To track selection, only get the columns that are:\r\n    // role === 'data'\r\n    // visibleInLegend !== false\r\n    const dataColumns = allInitialColumns.filter((col) => {\r\n      return col.role === 'data' && options.series?.[col.seriesIndex]?.visibleInLegend !== false;\r\n    });\r\n\r\n    if (seriesSelector.method === \"setViewColumn\") setInitialColumnsColors({ dataColumns: dataColumns });\r\n\r\n    setDataColumns(dataColumns);\r\n    return { initAllInitialColumns: allInitialColumns, initDataColumns: dataColumns };\r\n  };\r\n\r\n  const setInitialColumnsColors = ({ dataColumns }) => {\r\n    dataColumns.forEach((col) => {\r\n      // Assign inherit color to this data column\r\n      col.color = options.colors[col.seriesIndex % options.colors.length];\r\n      // Assign other inherit attributes from its serie object (if existed)\r\n      col.serieAttribute = options.series?.[col.seriesIndex];\r\n    });\r\n  }\r\n\r\n  const getInitialVAxisRange = ({ dataTable, allInitialColumns }) => {\r\n    let vAxisMin, vAxisMax;\r\n    allInitialColumns.forEach((col, index) => {\r\n      if (index === 0) return; // the first column is the domain (hAxis)\r\n      const range = dataTable.getColumnRange(col.sourceColumn);\r\n      if (!isNaN(range.min) && range.min) vAxisMin = vAxisMin ? Math.min(vAxisMin, range.min) : range.min;\r\n      if (!isNaN(range.max) && range.max) vAxisMax = vAxisMax ? Math.max(vAxisMax, range.max) : range.max;\r\n    });\r\n    return { min: vAxisMin, max: vAxisMax };\r\n  }\r\n\r\n  const handleSeriesSelection = ({\r\n    newDataColumns,\r\n    _allInitialColumns = allInitialColumns,\r\n    _chartWrapper = chartWrapper,\r\n    _controlWrapper = controlWrapper\r\n  }) => {\r\n    if (!_allInitialColumns) return;\r\n\r\n    setDataColumns(newDataColumns);\r\n\r\n    if (seriesSelector.method === \"toggleVisibility\" || seriesSelector.method === null) {\r\n      const hiddenSeriesObject = {};\r\n      newDataColumns.forEach((col) => {\r\n        if (!col.selected)\r\n          hiddenSeriesObject[col.seriesIndex] = {\r\n            color: 'transparent',\r\n            enableInteractivity: false,\r\n            visibleInLegend: false\r\n          }; // 'hide' the serie by making it transparent\r\n      });\r\n\r\n      _chartWrapper?.setOptions({\r\n        ...options,\r\n        series: {\r\n          ...options.series,\r\n          ...hiddenSeriesObject\r\n        }\r\n      });\r\n\r\n      if (hasChartControl) {\r\n        const currentControlOptions = _controlWrapper?.getOptions();\r\n        _controlWrapper?.setOptions({\r\n          ...currentControlOptions,\r\n          ui: {\r\n            ...currentControlOptions.ui,\r\n            chartOptions: {\r\n              ...currentControlOptions.ui.chartOptions,\r\n              series: {\r\n                ...options.series,\r\n                ...hiddenSeriesObject\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n    else if (seriesSelector.method === \"setViewColumn\") {\r\n      let newViewColumns = [];\r\n      newViewColumns.push(0); // this is the domain column\r\n      newDataColumns.forEach((dataColumn) => {\r\n        if (dataColumn.selected) {\r\n          newViewColumns.push(dataColumn);\r\n          // Find this dataColumn's supporting columns (whose role !== 'data')\r\n          // A dataColumn has its supporting columns (can be many) follow it immediately\r\n          for (let i = dataColumn.indexIn_ + 1; i < _allInitialColumns.length; i++) {\r\n            if (_allInitialColumns[i].role !== 'data') {\r\n              newViewColumns.push(_allInitialColumns[i]);\r\n            }\r\n            // If this loop encounter the next dataColumn, break the loop, all supporting columns for this dataColumn have been discovered\r\n            else {\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      });\r\n      _chartWrapper?.setView({ columns: newViewColumns });\r\n\r\n      const newOptions = { ...options };\r\n      // Preserve the initial vAxis range so that the vAxis doesn't shift based on the visible serie(s)\r\n      // newOptions.vAxis.viewWindow = {\r\n      //   min: (options.vAxis.viewWindow.min == null) ? initialVAxisRange.min : options.vAxis.viewWindow.min,\r\n      //   max: (options.vAxis.viewWindow.max == null) ? initialVAxisRange.max : options.vAxis.viewWindow.max,\r\n      // }\r\n      // Set the new color array\r\n      newOptions.colors = newDataColumns.filter((col) => col.selected).map((col) => col.color);\r\n      // Set the new series object (if any)\r\n      // this contains other series' attributes (lineWidth, seriesType...)\r\n      const series = {};\r\n      let selectedSeriesCount = 0;\r\n      newDataColumns.forEach((col) => {\r\n        if (!col.selected) return;\r\n        if (col.serieAttribute != null) {\r\n          series[selectedSeriesCount] = col.serieAttribute;\r\n        }\r\n        selectedSeriesCount++;\r\n      })\r\n      newOptions.series = series;\r\n      _chartWrapper?.setOptions(newOptions);\r\n\r\n      if (hasChartControl) {\r\n        const currentControlOptions = _controlWrapper?.getOptions();\r\n        _controlWrapper?.setOptions({\r\n          ...currentControlOptions,\r\n          ui: {\r\n            ...currentControlOptions.ui,\r\n            chartOptions: {\r\n              ...currentControlOptions.ui.chartOptions,\r\n              colors: newOptions.colors,\r\n              series: newOptions.series\r\n            },\r\n            chartView: {\r\n              columns: newViewColumns\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    // Call draw to apply the new DataView and 'refresh' the chart\r\n    _chartWrapper?.draw();\r\n\r\n    if (hasChartControl) {\r\n      _controlWrapper?.draw();\r\n    }\r\n  };\r\n\r\n  const reconstructFunctionFromJSONstring = (columns) => {\r\n    if (!columns) return;\r\n\r\n    const evaluatedColumns = [];\r\n    for (const column of columns) {\r\n      if (typeof column === 'number') {\r\n        // If it's a number, add it as-is\r\n        evaluatedColumns.push(column);\r\n      } else if (typeof column === 'object') {\r\n        if (column.calc && column.calc !== 'stringify') {\r\n          // If it's an object with a 'calc' property, evaluate the 'calc' function\r\n          // using new Function() and add the result to the evaluatedColumns array\r\n          const calcFunction = new Function(\"dataTable\", \"rowNum\", column.calc);\r\n          evaluatedColumns.push({\r\n            ...column,\r\n            calc: calcFunction,\r\n          });\r\n        } else {\r\n          // If it's an object without a 'calc' property, or with calc = 'stringify', add it as-is\r\n          evaluatedColumns.push(column);\r\n        }\r\n      }\r\n    }\r\n    return evaluatedColumns;\r\n  }\r\n\r\n  // Prepare to draw the chart if there is any change in chartData\r\n  // but only set flag renderChartNow if the chart should draw in the next rendering cycle\r\n  // to prevent chartID container not being mounted on time\r\n  useEffect(() => {\r\n    if (google && chartData) {\r\n      // Do not draw again if deep comparison between current chartData and previousChartData is true\r\n      if (JSON.stringify(chartData) === JSON.stringify(previousChartData)) return;\r\n      setPreviousChartData(chartData);\r\n\r\n      // Get and set the dataArray \r\n      const dataArray = chartData.dataArray\r\n        || (chartData.subcharts\r\n          && chartData.subcharts[subchartIndex].dataArray)\r\n        || null\r\n        || null;\r\n\r\n      const _shouldRenderChart = isValidArray(dataArray);\r\n      setShouldRenderChart(_shouldRenderChart);\r\n      if (_shouldRenderChart === true) {\r\n        setRenderChartNow(true);\r\n        const dataTable = google.visualization.arrayToDataTable(dataArray);\r\n\r\n        // Call functions for formatting the number if numberFormat is specified \r\n        if (formatters && typeof formatters === 'object') {\r\n          if (formatters.hasOwnProperty(\"numberFormatter\")) {\r\n            const numberFormat = new google.visualization.NumberFormat(formatters.numberFormatter.numberFormat);\r\n            formatters.numberFormatter.columns.forEach(col => numberFormat.format(dataTable, col));\r\n          }\r\n        }\r\n\r\n        setDataTable(dataTable);\r\n      }\r\n    }\r\n  }, [google, chartData]);\r\n\r\n  // Actually draw the chart now because chartID container is already mounted from shouldRenderChart flag\r\n  useEffect(() => {\r\n    if (renderChartNow === true) {\r\n      // Get dataColumn views\r\n      const columns = chartData.columns\r\n        || (chartData.subcharts\r\n          && chartData.subcharts[subchartIndex].columns)\r\n        || null\r\n        || null;\r\n      const reconstructedColumns = reconstructFunctionFromJSONstring(columns);\r\n\r\n      // Create chartWrapper\r\n      const thisChartWrapper = new google.visualization.ChartWrapper({\r\n        chartType: chartData.chartType,\r\n        dataTable: (!hasChartControl) ? dataTable : undefined,\r\n        options: options,\r\n        view: {\r\n          columns: reconstructedColumns\r\n        },\r\n        containerId: chartID\r\n      });\r\n      setChartWrapper(thisChartWrapper);\r\n\r\n      let thisControlWrapper;\r\n      if (hasChartControl) {\r\n        const thisDashboardWrapper = new google.visualization.Dashboard(\r\n          document.getElementById(`dashboard-${chartID}`));\r\n        setDashboardWrapper(thisDashboardWrapper);\r\n\r\n        google.visualization.events.addListener(thisDashboardWrapper, 'ready', onChartReady);\r\n        google.visualization.events.addListener(thisDashboardWrapper, 'error', handleChartError);\r\n\r\n        thisControlWrapper = new google.visualization.ControlWrapper({\r\n          controlType: chartControl.controlType,\r\n          options: chartControlOptions,\r\n          containerId: `control-${chartID}`\r\n        });\r\n        setControlWrapper(thisControlWrapper);\r\n\r\n        // Establish dependencies\r\n        thisDashboardWrapper.bind(thisControlWrapper, thisChartWrapper);\r\n\r\n        thisDashboardWrapper.draw(dataTable);\r\n      }\r\n      else {\r\n        google.visualization.events.addListener(thisChartWrapper, 'ready', onChartReady);\r\n        google.visualization.events.addListener(thisChartWrapper, 'error', handleChartError);\r\n        thisChartWrapper.draw();\r\n      }\r\n\r\n      // Run the seriesSelector for the first time\r\n      if (seriesSelector) {\r\n        const { initAllInitialColumns, initDataColumns } = getInitialColumns({ chartWrapper: thisChartWrapper, dataTable: dataTable, seriesSelector: seriesSelector });\r\n        handleSeriesSelection({\r\n          _allInitialColumns: initAllInitialColumns,\r\n          newDataColumns: initDataColumns,\r\n          _chartWrapper: thisChartWrapper,\r\n          _controlWrapper: thisControlWrapper\r\n        });\r\n      }\r\n\r\n      setRenderChartNow(false);\r\n    }\r\n  }, [renderChartNow])\r\n\r\n  const renderChart = () => {\r\n    const chartContainer = (\r\n      <Box\r\n        id={chartID}\r\n        sx={{ height: height, maxHeight: maxHeight }}\r\n      />\r\n    );\r\n\r\n    if (hasChartControl) {\r\n      return (\r\n        <Stack\r\n          id={`dashboard-${chartID}`}\r\n          direction={ChartControlType[chartControl.controlType]?.stackDirection || 'column-reverse'}\r\n          sx={{ height: '100%' }}\r\n        >\r\n          <Box\r\n            id={`control-${chartID}`}\r\n            sx={{\r\n              height: `calc(${height} / 8)`,\r\n              opacity: 0.8,\r\n              filter: 'saturate(0.3)'\r\n            }}\r\n          />\r\n          {chartContainer}\r\n        </Stack>\r\n      );\r\n    } else {\r\n      return chartContainer;\r\n    }\r\n  };\r\n\r\n  // Generate the gradient background if it exists in options parameter\r\n  const gradientBackgroundColor = options.gradientBackgroundColor;\r\n  let gradientBackgroundId, svgFillGradient;\r\n  if (gradientBackgroundColor) {\r\n    gradientBackgroundId = `${chartID}-backgroundGradient`;\r\n    svgFillGradient = generateSvgFillGradient({\r\n      colors: theme.palette.chart.colorAxes[gradientBackgroundColor].colors,\r\n      optionalMinValue: options.vAxis?.viewWindow?.min,\r\n      optionalMaxValue: options.vAxis?.viewWindow?.max\r\n    });\r\n  }\r\n\r\n  const onChartReady = () => {\r\n    if (!isFirstRender) return;\r\n    // Hide the circleProgress when chart finishes rendering the first time\r\n    setIsFirstRender(false);\r\n  };\r\n\r\n  const handleChartError = (error) => {\r\n    console.log(error);\r\n  }\r\n\r\n  const showAuxiliaryControls = () => {\r\n    if (!isFirstRender) {\r\n      return (\r\n        <Grid\r\n          container\r\n          mt={1}\r\n          sx={{\r\n            gap: 2,\r\n            [theme.breakpoints.down('sm')]: { gap: 1 }\r\n          }}\r\n        >\r\n          {seriesSelector &&\r\n            <Grid item\r\n              sx={{\r\n                [theme.breakpoints.down('sm')]: { width: '100%' }\r\n              }}\r\n            >\r\n              <SeriesSelector\r\n                items={dataColumns}\r\n                allowMultiple={seriesSelector.allowMultiple}\r\n                seriesLabel={seriesSelector.seriesLabel}\r\n                selectorID={`${chartData.title}-selector`}\r\n                onSeriesSelection={handleSeriesSelection}\r\n                displayChip={false}\r\n              />\r\n            </Grid>\r\n          }\r\n          {\r\n            dateRangePicker &&\r\n            <Grid item\r\n              sx={{\r\n                height: \"2rem\",\r\n                width: { [theme.breakpoints.down('sm')]: { width: '100%' } }\r\n              }} >\r\n              <CustomDateRangePicker dataType={selectedDataType} minDateOfDataset={new Date(dateRangePicker.minDate)} />\r\n            </Grid>\r\n          }\r\n        </Grid >\r\n      );\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    shouldRenderChart ?\r\n      <GoogleChartStyleWrapper\r\n        isPortrait={isPortrait}\r\n        gradientBackgroundId={gradientBackgroundId}\r\n        className={chartData.chartType}\r\n        position=\"relative\"\r\n        height=\"100%\"\r\n        minHeight={chartData.chartType === 'Calendar' && '200px'}\r\n      >\r\n        {/* Conditionally display loading animation here */}\r\n        {isFirstRender && (\r\n          <Box sx={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }}>\r\n            <LoadingAnimation />\r\n          </Box>\r\n        )}\r\n        {showAuxiliaryControls()}\r\n        {renderChart()}\r\n        {gradientBackgroundColor ? <BackgroundGradient id={gradientBackgroundId} colors={svgFillGradient} /> : null}\r\n      </GoogleChartStyleWrapper> : <NoChartToRender dataType={returnSelectedDataType({ dataTypeKey: selectedDataType, dataTypes: allowedDataTypes })} />\r\n  );\r\n}","import { useState, useRef } from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\nimport ClickAwayListener from '@mui/material/ClickAwayListener';\r\nimport parse from 'html-react-parser';\r\nimport { useMediaQuery, useTheme } from '@mui/material';\r\nimport { replacePlainHTMLWithMuiComponents } from '../Utils/Utils';\r\n\r\nfunction CollapsibleSubtitle({ text, wordLimit = 40, reference }) {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n  const theme = useTheme();\r\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\r\n  const subtitleRef = useRef(null);\r\n\r\n  const words = text.split(' ');\r\n\r\n  // If not on mobile or words are within limit, just display the full text\r\n  if (!isMobile || words.length / wordLimit <= 1.4) {\r\n    return (\r\n      <Box>\r\n        <Typography>{parse(text, { replace: replacePlainHTMLWithMuiComponents })}</Typography>\r\n        {reference && (\r\n          <Typography variant=\"caption\" color=\"text.secondary\">\r\n            {parse(reference, { replace: replacePlainHTMLWithMuiComponents })}\r\n          </Typography>\r\n        )}\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  let displayText = words.slice(0, wordLimit).join(' ');\r\n  const lastFullStop = displayText.lastIndexOf('.');\r\n\r\n  if (lastFullStop !== -1) {\r\n    displayText = displayText.slice(0, lastFullStop + 1);\r\n  }\r\n\r\n  // Do not collapse if the user clicks on the chart associated with the subtitle\r\n  const isClickWithinSharedParent = (event) => {\r\n    let { target } = event;\r\n    // .MuiContainer-root - Container for both the subtitle and the chart\r\n    const subtitleParent = subtitleRef.current.closest('.MuiContainer-root');\r\n    // Elements used to detect if the click is on a chart\r\n    const chartElements = new Set(['rect', 'path', 'svg', 'circle']);\r\n\r\n    while (target != null) {\r\n      // Check if a chart is clicked\r\n      if (chartElements.has(target.tagName)) {\r\n        // If the chart element and the subtitle element share the same container\r\n        // it means that the click is on the chart associated with the subtitle\r\n        // As such, we should not collapse the subtitle\r\n        const targetParent = target.closest('.MuiContainer-root');\r\n        return targetParent === subtitleParent;\r\n      }\r\n      target = target.parentNode; // Move up the DOM tree\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // Custom onClickAway handler\r\n  const handleOnClickAway = (event) => {\r\n    if (!isClickWithinSharedParent(event)) {\r\n      setIsExpanded(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ClickAwayListener onClickAway={handleOnClickAway}>\r\n      <Box ref={subtitleRef} onClick={() => setIsExpanded(!isExpanded)} style={{ cursor: 'pointer' }}>\r\n        {isExpanded ? (\r\n          <>\r\n            <Typography>{parse(text, { replace: replacePlainHTMLWithMuiComponents })}</Typography>\r\n            {reference && <Typography variant=\"caption\" color=\"text.secondary\">{parse(reference, { replace: replacePlainHTMLWithMuiComponents })}</Typography>}\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Typography display=\"inline\">\r\n              {parse(displayText, { replace: replacePlainHTMLWithMuiComponents })}\r\n              ...\r\n            </Typography>\r\n            <Typography display=\"inline\" color=\"text.primary\" fontWeight=\"500\" sx={{ ml: 0.5, '& :hover': { textDecoration: 'underline' } }}>\r\n              See more\r\n            </Typography>\r\n          </>\r\n        )}\r\n      </Box>\r\n    </ClickAwayListener>\r\n  );\r\n}\r\n\r\nexport default CollapsibleSubtitle;\r\n","import { useState } from \"react\";\r\nimport { Button, Menu, MenuItem, Typography } from \"@mui/material\";\r\nimport { isValidArray } from \"../../../Utils/Utils\";\r\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\r\nimport { returnSelectedDataType } from \"../../../Utils/AirQuality/DataTypes\";\r\n\r\nconst DataTypeDropDownMenu = ({ selectedDataType, dataTypes, fetchChartDataType }) => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  if (!isValidArray(dataTypes)) return null;\r\n\r\n  // If there is only 1 dataType, display it as a string of text\r\n  if (dataTypes.length <= 1) {\r\n    return (\r\n      <Typography display=\"inline\" variant=\"h6\" color=\"text.primary\">\r\n        {dataTypes[0].name_title}\r\n      </Typography>\r\n    )\r\n  }\r\n\r\n  // If there are more than 1 dataTypes to choose from, display a popup dropdown menu\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const handleMenuItemClick = (dataType) => {\r\n    fetchChartDataType(dataType);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        id=\"data-type-drop-down-menu-button\"\r\n        aria-controls={open ? 'data-type-drop-down-menu' : undefined}\r\n        aria-haspopup=\"true\"\r\n        aria-expanded={open ? 'true' : undefined}\r\n        onClick={handleClick}\r\n        variant=\"text\"\r\n        size=\"small\"\r\n        sx={{\r\n          p: 0,\r\n          minWidth: 'unset',\r\n          borderRadius: 0,\r\n          verticalAlign: 'top',\r\n          textTransform: 'unset'\r\n        }}\r\n      >\r\n        <Typography display=\"inline\" variant=\"h6\" borderBottom=\"dotted\">\r\n          {returnSelectedDataType({ dataTypeKey: selectedDataType, dataTypes: dataTypes, showUnit: true })}\r\n        </Typography>\r\n        <ArrowDropDownIcon />\r\n      </Button>\r\n      <Menu\r\n        id=\"data-type-drop-down-menu\"\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        MenuListProps={{\r\n          'aria-labelledby': 'data-type-drop-down-menu-button',\r\n        }}\r\n      >\r\n\r\n        {dataTypes.map((dataType, index) => (\r\n          <MenuItem\r\n            key={index}\r\n            sx={{ fontSize: '0.8rem' }}\r\n            onClick={() => handleMenuItemClick(dataType.key)}\r\n          >\r\n            {dataType.name_title}\r\n          </MenuItem>\r\n        ))}\r\n\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DataTypeDropDownMenu;","import { useState, useEffect, useContext } from 'react';\r\nimport { styled } from '@mui/material/styles';\r\nimport { Box, Tabs, Tab, useMediaQuery, Typography, Menu, MenuItem, Stack, Skeleton } from '@mui/material/';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\n\r\nimport AQIDataTypes from '../Utils/AirQuality/DataTypes';\r\nimport { fetchDataFromURL } from \"../Components/DatasetDownload/DatasetFetcher\";\r\nimport { ChartEndpointsOrder, getChartApiUrl } from \"../Utils/ApiUtils\";\r\nimport { DashboardContext } from \"../ContextProviders/DashboardContext\";\r\n\r\nimport SubChart from './Subchart/SubChart';\r\n\r\nimport CollapsibleSubtitle from '../Components/CollapsibleSubtitle';\r\nimport VisibilityIcon from '@mui/icons-material/Visibility';\r\nimport DataTypeDropDownMenu from './Subchart/SubchartUtils/DataTypeDropDown';\r\nimport { isValidArray } from '../Utils/Utils';\r\n\r\nconst debounceMilliseconds = 100;\r\n\r\nconst maxTabsToDisplay = 3;\r\nconst initialDropdownMenuTabIndex = -1;\r\n\r\nconst ChartStyleWrapper = styled(Box)(({ theme }) => ({\r\n  // CSS for dark theme only\r\n  ...(theme.palette.mode === 'dark' && {\r\n    // De-saturate a bit\r\n    filter: 'saturate(0.85)',\r\n    // Invert iframe\r\n    '& .heat-map-iframe': {\r\n      filter: 'invert(0.848) hue-rotate(180deg)',\r\n    }\r\n  }),\r\n  // Center Calendar chart in wrapper\r\n  '& .Calendar [dir]:not(:empty)': {\r\n    margin: 'auto'\r\n  },\r\n\r\n  // add horizontal scrollbar to Calendar charts\r\n  '& .Calendar > div > div:last-of-type > div': {\r\n    overflowX: 'auto',\r\n    overflowY: 'hidden',\r\n    scrollbarGutter: 'stable'\r\n  }\r\n}));\r\n\r\nconst StyledTabs = styled(Tabs)(({ theme }) => ({\r\n  '& .MuiTabScrollButton-root': {\r\n    color: theme.palette.text.primary\r\n  },\r\n  '& .MuiTab-root': {\r\n    [theme.breakpoints.down('sm')]: {\r\n      fontSize: '0.625rem',\r\n      padding: theme.spacing(0.5)\r\n    },\r\n  },\r\n  '& .MuiSvgIcon-root ': {\r\n    [theme.breakpoints.down('sm')]: {\r\n      fontSize: '0.75rem'\r\n    }\r\n  }\r\n}));\r\n\r\nconst StyledMenuItem = styled(MenuItem)(({ theme }) => ({\r\n  '& .MuiBox-root ': {\r\n    [theme.breakpoints.down('sm')]: {\r\n      fontSize: '0.75rem'\r\n    },\r\n  }\r\n}));\r\n\r\n// eslint-disable-next-line max-len\r\nfunction ChartComponentWrapper(props) {\r\n  const {\r\n    chartTitle,\r\n    generalChartSubtitle,\r\n    generalChartReference,\r\n    chartData: passedChartData,\r\n    chartHeight: passedChartHeight,\r\n    chartID,\r\n    chartIndex,\r\n    isHomepage\r\n  } = props;\r\n\r\n  const { currentSchoolID, setIndividualChartData } = useContext(DashboardContext);\r\n\r\n  const isSmallWidth = useMediaQuery((theme) => theme.breakpoints.down('sm'));\r\n\r\n  const [isPortrait, setIsPortrait] = useState(window.matchMedia('(orientation: portrait)').matches);\r\n  const [windowSize, setWindowSize] = useState([\r\n    window.innerWidth,\r\n    window.innerHeight,\r\n  ]);\r\n\r\n  let chartMaxHeight;\r\n  let chartHeight = passedChartHeight;\r\n  const chartData = passedChartData;\r\n\r\n  // Props for tab panels (multiple data visualizations in the same chart area, navigate with tab panels)\r\n  const [currentTab, setCurrentTab] = useState(0); // start with the first tab\r\n  const [previousTab, setPreviousTab] = useState(0); // keep tracking of previous tab to keep displaying it if the currentTab = -1 (selecting the dropdown menu tab)\r\n  const [dropdownMenuTabIndex, setDropdownMenuTabIndex] = useState(initialDropdownMenuTabIndex);\r\n  const [dropdownMenuCurrentTitle, setDropdownMenuCurrentTitle] = useState();\r\n  const [anchorEl, setAnchorEl] = useState(null); // Define anchorEl state for dropdown menu of the tabs\r\n\r\n  // Props for dataType management\r\n  const [allowedDataTypes, setAllowedDataTypes] = useState([]);\r\n  const [selectedDataType, setSelectedDataType] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Using keys returned from backend,\r\n    // generate the allowedDataTypes object from AQIDataTypes\r\n    if (chartData.allowedDataTypes) {\r\n      const dataTypesArr = [];\r\n      for (let dataType of chartData.allowedDataTypes) {\r\n        const { name_title, name_short, unit } = AQIDataTypes[dataType];\r\n        dataTypesArr.push({\r\n          key: dataType,\r\n          name_title,\r\n          name_short,\r\n          unit\r\n        })\r\n      }\r\n      setAllowedDataTypes(dataTypesArr);\r\n    }\r\n    setSelectedDataType(chartData.selectedDataType)\r\n  }, [chartData]);\r\n\r\n  const fetchChartDataType = async (dataType) => {\r\n    const endpoint = ChartEndpointsOrder[chartID]\r\n    fetchDataFromURL({\r\n      url: getChartApiUrl({\r\n        endpoint: endpoint,\r\n        school_id: currentSchoolID,\r\n        dataType\r\n      }),\r\n      extension: 'json',\r\n      needsAuthorization: true\r\n    })\r\n      .then(data => {\r\n        setIndividualChartData(chartID, data);\r\n        setSelectedDataType(data.selectedDataType);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n  // eventListener for window resize\r\n  // redraw \"Calendar\" charts and charts with a time filter upon window resize.\r\n  // Filter & Calendar charts are not automatically respnsive, so we have to redraw them.\r\n  // redraw other charts when device orientation changes\r\n  useEffect(() => {\r\n    let timeoutID = null;\r\n\r\n    const handleWindowResize = () => {\r\n      clearTimeout(timeoutID);\r\n\r\n      // debounce before triggering re-render. as user is resizing window, the state could\r\n      // change multiple times causing many expensive rerenders. we try to rerender at the\r\n      // end of the resize.\r\n      timeoutID = setTimeout(() => {\r\n        // Redraw all charts on device orientation change, as the chartWrapperHeights\r\n        // have changed.\r\n        setIsPortrait(window.matchMedia('(orientation: portrait)').matches);\r\n\r\n        // Redraw all charts on window resized\r\n        setWindowSize([window.innerWidth, window.innerHeight]);\r\n      }, debounceMilliseconds);\r\n    };\r\n\r\n    // listen to window resize events\r\n    window.addEventListener('resize', handleWindowResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleWindowResize);\r\n    };\r\n  }, [chartData]);\r\n\r\n  // set tab back to 0 if school is changed\r\n  useEffect(() => {\r\n    setPreviousTab(currentTab);\r\n    setCurrentTab(0);\r\n  }, [currentSchoolID])\r\n\r\n  if (chartData.chartType !== 'Calendar' && !chartHeight) {\r\n    chartHeight = isPortrait ? '80vw' : '35vw';\r\n    chartMaxHeight = isPortrait ? '800px' : '500px';\r\n  }\r\n\r\n  // Function to render only one chart (no subchart --> no tab control)\r\n  const renderOnlyOneChart = () => {\r\n    return (\r\n      <SubChart\r\n        selectedDataType={selectedDataType}\r\n        allowedDataTypes={allowedDataTypes}\r\n        chartData={chartData}\r\n        isPortrait={isPortrait}\r\n        isHomepage={isHomepage}\r\n        windowSize={windowSize}\r\n        height={chartData.height ? chartData.height : chartHeight}\r\n      />\r\n    );\r\n  }\r\n\r\n  // Function to render multiple subcharts with tab control\r\n  const renderMultipleSubcharts = () => {\r\n    // Handle tab change\r\n    const handleTabChange = (__, newIndex) => {\r\n      setPreviousTab(currentTab);\r\n      setCurrentTab(newIndex);\r\n\r\n      if (needsDropdownMenu && newIndex < maxTabsToDisplay && newIndex !== dropdownMenuTabIndex) {\r\n        setDropdownMenuCurrentTitle();\r\n        setDropdownMenuTabIndex(initialDropdownMenuTabIndex);\r\n      }\r\n    };\r\n\r\n    // Determine if dropdown menu is needed\r\n    const needsDropdownMenu = chartData.subcharts.length > maxTabsToDisplay + 1; // maxTabsToDisplay = 3 by default, but here +1 for some leeway, some schools have 4 sensors which is still okay. But if > 4, then only display max 3\r\n\r\n    const subchartsDataForTabs = needsDropdownMenu ? chartData.subcharts.slice(0, maxTabsToDisplay) : chartData.subcharts;\r\n    const subchartsDataForDropDownMenu = needsDropdownMenu ? chartData.subcharts.slice(maxTabsToDisplay) : null;\r\n\r\n    // Function to handle selection from dropdown menu\r\n    const handleDropdownMenuSelection = (index) => {\r\n      setPreviousTab(currentTab);\r\n\r\n      // Because the original chartData.subcharts array was split in subchartsDataForTabs (length maxTabsToDisplay) and subchartsDataForDropDownMenu (the remaining item), the selected subcharts index is the sum of the length of subchartsDataForTabs array and the index of the selected item from subchartsDataForDropDownMenu\r\n      setCurrentTab(maxTabsToDisplay + index);\r\n\r\n      // Same index with the one above to keep the dropdown menu tab highlighted  \r\n      setDropdownMenuTabIndex(maxTabsToDisplay + index);\r\n\r\n      // Set title of the selected item in the dropdown menu to display it\r\n      setDropdownMenuCurrentTitle(subchartsDataForDropDownMenu[index].subchartTitleShort);\r\n\r\n      // Close the dropdown menu after selection\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const getOtherLocationsLabel = () => {\r\n      return (\r\n        <Stack direction=\"row\" justifyContent=\"center\" alignItems=\"center\">\r\n          <Box flex={1}>\r\n            Other sensors\r\n            {\r\n              dropdownMenuCurrentTitle && ` (${dropdownMenuCurrentTitle})`\r\n            }\r\n            &nbsp;\r\n          </Box>\r\n          < ExpandMoreIcon />\r\n        </Stack>\r\n      )\r\n    }\r\n\r\n    const shouldDisplayThisSubchart = (index) => {\r\n      if (currentTab === initialDropdownMenuTabIndex) {\r\n        return previousTab === index;\r\n      } else {\r\n        return currentTab === index;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <StyledTabs\r\n          value={currentTab}\r\n          onChange={handleTabChange}\r\n          variant={isSmallWidth ? 'fullWidth' : 'standard'}\r\n        >\r\n          {subchartsDataForTabs.map((_, index) => (\r\n            <Tab\r\n              key={index}\r\n              value={index}\r\n              label={chartData.subcharts[index].subchartTitle}\r\n              sx={{\r\n                // If this subchart doesn't have a valid dataArray to render chart\r\n                // Make the Tab's text line-through to let user know\r\n                textDecoration: !isValidArray(chartData.subcharts[index].dataArray) && 'line-through'\r\n              }}\r\n            />\r\n          ))}\r\n          {/* Render dropdown menu if needed */}\r\n          {needsDropdownMenu && (\r\n            <Tab\r\n              value={dropdownMenuTabIndex}\r\n              label={getOtherLocationsLabel()}\r\n              aria-controls=\"submenu\"\r\n              aria-haspopup=\"true\"\r\n              onClick={(event) => setAnchorEl(event.currentTarget)}\r\n            />\r\n          )}\r\n        </StyledTabs>\r\n        {\r\n          needsDropdownMenu && <Menu\r\n            id=\"submenu\"\r\n            anchorEl={anchorEl}\r\n            open={Boolean(anchorEl)}\r\n            onClose={() => {\r\n              // Reset currentTab to the previous valid tab if the user opened the menu (clicked on the drop down menu tab), but didn't select any menu item\r\n              if (currentTab === initialDropdownMenuTabIndex) {\r\n                setPreviousTab(currentTab);\r\n                setCurrentTab(previousTab);\r\n              };\r\n\r\n              // Close the menu\r\n              setAnchorEl(null);\r\n            }}\r\n          >\r\n            {/* Render remaining subchart selector in the dropdown menu */}\r\n            {subchartsDataForDropDownMenu.map((_, index) => (\r\n              <StyledMenuItem\r\n                key={index}\r\n                selected={index === currentTab - maxTabsToDisplay}\r\n                onClick={() => handleDropdownMenuSelection(index)}\r\n                sx={{\r\n                  // If this subchart doesn't have a valid dataArray to render chart\r\n                  // Make the Tab's text line-through to let user know\r\n                  textDecoration: !isValidArray(chartData.subcharts[index + maxTabsToDisplay].dataArray) && 'line-through'\r\n                }}\r\n              >\r\n                <Stack direction=\"row\" alignItems=\"center\" gap={1}>\r\n                  <Box>\r\n                    {subchartsDataForDropDownMenu[index].subchartTitle}\r\n                  </Box>\r\n                  {\r\n                    (index === currentTab - maxTabsToDisplay) &&\r\n                    <VisibilityIcon fontSize=\"1rem\" sx={{ color: 'text.secondary' }} />\r\n                  }\r\n                </Stack>\r\n              </StyledMenuItem>\r\n            ))}\r\n          </Menu>\r\n        }\r\n\r\n        <Box\r\n          position=\"relative\"\r\n          sx={{\r\n            overflowX: isPortrait && 'auto',\r\n            WebkitOverflowScrolling: isPortrait && 'touch',\r\n            overflowY: 'hidden',\r\n          }}\r\n        >\r\n\r\n          {chartData.subcharts.map((__, index) => (\r\n            <Box\r\n              key={index}\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              role=\"tabpanel\"\r\n              sx={{\r\n                transition: '0.35s',\r\n                position: (index === 0) ? '' : 'absolute',\r\n                opacity: shouldDisplayThisSubchart(index) ? '1' : '0',\r\n                pointerEvents: shouldDisplayThisSubchart(index) ? 'auto' : 'none',\r\n                top: (index === 0) ? '' : 0,\r\n              }}\r\n            >\r\n              <SubChart\r\n                selectedDataType={selectedDataType}\r\n                allowedDataTypes={allowedDataTypes}\r\n                chartData={chartData}\r\n                subchartIndex={index}\r\n                isPortrait={isPortrait}\r\n                isHomepage={isHomepage}\r\n                windowSize={windowSize}\r\n                height={chartData.height ? chartData.height : chartHeight}\r\n                maxHeight={\r\n                  ['Calendar'].includes(chartData.chartType)\r\n                    ? ''\r\n                    : chartMaxHeight\r\n                }\r\n              />\r\n            </Box>\r\n          ))}\r\n        </Box>\r\n      </>\r\n    )\r\n  };\r\n\r\n  // Function to render remaining subtitles and references for chart with multiple subcharts\r\n  const getSubtitles = () => {\r\n    let text = generalChartSubtitle || '';\r\n    if (chartData.subcharts && chartData.subcharts[currentTab]?.subchartSubtitle) {\r\n      text += '<br/>'\r\n      text += chartData.subcharts[currentTab].subchartSubtitle;\r\n    }\r\n    return text;\r\n  }\r\n  const getReferences = () => {\r\n    let text = generalChartReference || '';\r\n    if (chartData.subcharts && chartData.subcharts[currentTab]?.reference) {\r\n      text += '<br/>'\r\n      text += chartData.subcharts[currentTab].reference;\r\n    }\r\n    return text;\r\n  }\r\n\r\n  return (\r\n    chartTitle ?\r\n      <>\r\n        <Box>\r\n          <Typography display=\"inline\" variant=\"h6\" color=\"text.primary\">\r\n            {chartIndex + 1}. {chartTitle}\r\n            &nbsp;\r\n          </Typography>\r\n          <Box display=\"inline\">\r\n            <DataTypeDropDownMenu\r\n              selectedDataType={selectedDataType}\r\n              dataTypes={allowedDataTypes}\r\n              fetchChartDataType={fetchChartDataType}\r\n            />\r\n          </Box>\r\n        </Box>\r\n\r\n\r\n        <ChartStyleWrapper height=\"100%\">\r\n          {chartData.subcharts ? renderMultipleSubcharts() : renderOnlyOneChart()}\r\n\r\n          {/* Render subtitle and reference below */}\r\n          <Box sx={{ my: 3 }}>\r\n            <Typography\r\n              component=\"div\"\r\n              variant=\"body1\"\r\n              color=\"text.secondary\"\r\n              sx={{ mb: 1 }}\r\n            >\r\n              <CollapsibleSubtitle\r\n                text={getSubtitles()}\r\n                reference={getReferences()}\r\n              />\r\n            </Typography>\r\n          </Box>\r\n        </ChartStyleWrapper>\r\n      </>\r\n\r\n      : <>\r\n        <Skeleton variant='text' sx={{ width: '100%', fontSize: '2rem' }} />\r\n        <Skeleton variant='rounded' width=\"100%\" height={300} />\r\n      </>\r\n  );\r\n}\r\n\r\nexport default ChartComponentWrapper;\r\n","import { useState } from 'react';\r\nimport { isMobile } from 'react-device-detect';\r\n\r\nimport { Fab, Fade, Popper, Paper, Typography, Stack } from '@mui/material';\r\nimport AirIcon from '@mui/icons-material/Air';\r\nimport { FadeInButtonForSpeedDial } from '../SpeedDial/FadeInButtonForSpeedDial';\r\n\r\nimport * as Tracking from '../../Utils/Tracking';\r\nimport AirQualityIndexTable from './AirQualityIndexTable';\r\n\r\nexport default function AirQualityIndexLegendQuickGlance(props) {\r\n  // Mechanism for opening and closing the Quick Glance on hover\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const handlePopperOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n    Tracking.sendEventAnalytics(Tracking.Events.airQualityIndexLegendQuickGlance);\r\n  };\r\n  const handlePopperClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n  const open = Boolean(anchorEl);\r\n\r\n  return (\r\n    <>\r\n      <FadeInButtonForSpeedDial {...props} distanceFromBottomOfWindow=\"5.5rem\">\r\n        <Fab\r\n          sx={{ mt: 1 }}\r\n          aria-owns={open ? Tracking.Events.airQualityIndexLegendQuickGlance : undefined}\r\n          aria-haspopup=\"true\"\r\n          onMouseEnter={handlePopperOpen}\r\n          onMouseLeave={handlePopperClose}\r\n          onClick={(event) => isMobile && (open ? handlePopperClose() : handlePopperOpen(event))}\r\n          aria-label={Tracking.Events.airQualityIndexLegendQuickGlance}\r\n          color=\"primary\"\r\n        >\r\n          <Stack direction=\"column\" alignItems=\"center\">\r\n            <AirIcon fontSize=\"1rem\" />\r\n            <Typography variant=\"body2\" fontWeight=\"500\">\r\n              AQI\r\n            </Typography>\r\n          </Stack>\r\n        </Fab>\r\n      </FadeInButtonForSpeedDial>\r\n\r\n      <Popper\r\n        id={Tracking.Events.airQualityIndexLegendQuickGlance}\r\n        sx={{\r\n          pointerEvents: 'none',\r\n          mt: -1\r\n        }}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        placement=\"top-end\"\r\n        onClose={handlePopperClose}\r\n        keepMounted\r\n        disableRestoreFocus\r\n        transition\r\n      >\r\n        {({ TransitionProps }) => (\r\n          <Fade {...TransitionProps} timeout={350}>\r\n            <Paper elevation={8} sx={{ py: 0.5, mb: 1 }}>\r\n              <Typography sx={{ mx: 2, mt: 1 }} color=\"text.disabled\" variant=\"body1\" fontWeight={500}>\r\n                AQI at quick glance\r\n              </Typography>\r\n              <AirQualityIndexTable isTiny hideAQIDescription />\r\n            </Paper>\r\n          </Fade>\r\n        )}\r\n\r\n      </Popper>\r\n    </>\r\n  );\r\n}\r\n","// disable eslint for this file\r\n/* eslint-disable */\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport { Box, Link, Typography, Stack, Select, FormControl, MenuItem, Grid, Chip, Dialog, Button, DialogActions, DialogContent, useMediaQuery, Table, TableBody, TableCell, TableHead, TableRow } from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\nimport DownloadIcon from '@mui/icons-material/Download';\r\nimport DataObjectIcon from '@mui/icons-material/DataObject';\r\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\r\n\r\nimport * as Tracking from '../../Utils/Tracking';\r\nimport { fetchDataFromURL } from './DatasetFetcher';\r\nimport { RawDatasetType, getRawDatasetUrl } from '../../Utils/ApiUtils';\r\nimport LoadingAnimation from '../LoadingAnimation';\r\n\r\nimport { DashboardContext } from '../../ContextProviders/DashboardContext';\r\n\r\nexport default function DatasetDownloadDialog(props) {\r\n  const { currentSchoolID, current } = useContext(DashboardContext);\r\n\r\n  const [sensorsDatasets, updateSensorsDatasets] = useState({});\r\n\r\n  const [previewingDataset, setPreviewingDataset] = useState(\"placeholder\");\r\n\r\n  // Construct the structure of sensorsDatasets based on current data\r\n  useEffect(() => {\r\n    if (!current) return;\r\n\r\n    const sensorsDatasets = current\r\n      .filter(item => item && item.sensor)  // Filter out null or undefined items and sensors\r\n      .reduce((acc, item) => {\r\n        // Use location_short as the key for each sensor\r\n        const key = item.sensor.location_short;\r\n        acc[key] = {\r\n          location_type: item.sensor.location_type,\r\n          location_short: item.sensor.location_short,\r\n          location_long: item.sensor.location_long,\r\n          last_seen: item.sensor.last_seen.split('T')[0],\r\n          rawDatasets: Object.keys(RawDatasetType).reduce((datasetAcc, datasetKey) => {\r\n            datasetAcc[RawDatasetType[datasetKey]] = {\r\n              sample: null,\r\n              full: null\r\n            };\r\n            return datasetAcc;\r\n          }, {})\r\n        };\r\n        return acc;\r\n      }, {});\r\n\r\n    updateSensorsDatasets(sensorsDatasets);\r\n  }, [current]);\r\n\r\n  const theme = useTheme();\r\n  const smallScreen = useMediaQuery(theme.breakpoints.down('sm'));\r\n\r\n  const [open, setOpen] = useState(false);\r\n  const handleOpen = () => {\r\n    setPreviewingDataset(null);\r\n    setOpen(true);\r\n  }\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        onClick={() => {\r\n          handleOpen();\r\n          Tracking.sendEventAnalytics(Tracking.Events.rawDatasetButtonClicked);\r\n        }}\r\n        variant=\"contained\"\r\n      >\r\n        <DataObjectIcon sx={{ fontSize: '1rem' }} />&nbsp;Raw Dataset\r\n      </Button>\r\n\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        maxWidth=\"lg\"\r\n        fullWidth\r\n        fullScreen={smallScreen}\r\n        keepMounted\r\n        zIndex={10000}\r\n      >\r\n        {(\r\n          smallScreen &&\r\n          <DialogActions sx={{ justifyContent: \"start\" }}>\r\n            <Button autoFocus onClick={handleClose}>\r\n              <ChevronLeftIcon sx={{ fontSize: '1rem' }} />Back\r\n            </Button>\r\n          </DialogActions>\r\n        )}\r\n\r\n        <DialogContent sx={{\r\n          px: smallScreen ? 2 : 3,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          alignItems: 'start'\r\n        }}>\r\n          <Chip label={currentSchoolID ? `School: ${currentSchoolID.toUpperCase()}` : \"No School\"} size=\"small\" sx={{ mb: 1 }} />\r\n          <Typography variant=\"h6\" zIndex=\"10000\" sx={{ mb: 1 }}>\r\n            Preview and download raw dataset(s)\r\n          </Typography>\r\n\r\n          <DatasetSelectorAndPreviewer\r\n            sensorsDatasets={sensorsDatasets}\r\n            updateSensorsDatasets={updateSensorsDatasets}\r\n            previewingDataset={previewingDataset}\r\n            setPreviewingDataset={setPreviewingDataset}\r\n            smallScreen={smallScreen}\r\n            schoolID={currentSchoolID}\r\n          />\r\n          {\r\n            sensorsDatasets &&\r\n            <Typography variant=\"caption\" sx={{ my: 3, fontStyle: 'italic' }} >\r\n              These datasets are provided by CITIESair from sensors operated by CITIESair. Should you intend to utilize them for your project, research, or publication, we kindly request that you notify us at <Link href='mailto:nyuad.cities@nyu.edu'>nyuad.cities@nyu.edu</Link> to discuss citation requirements.\r\n            </Typography>\r\n          }\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n}\r\n\r\nconst DatasetSelectorAndPreviewer = (props) => {\r\n  const { sensorsDatasets, updateSensorsDatasets, previewingDataset, setPreviewingDataset, smallScreen, schoolID } = props;\r\n\r\n  // Preview the hourly type of the first sensor initially\r\n  useEffect(() => {\r\n    if (Object.keys(sensorsDatasets).length > 0 && !previewingDataset) {\r\n      const firstSensor = Object.keys(sensorsDatasets)[0];\r\n      const initialDatasetType = RawDatasetType.hourly;\r\n\r\n      setPreviewingDataset({\r\n        sensor: firstSensor,\r\n        datasetType: initialDatasetType\r\n      });\r\n\r\n      // If this dataset has been fetched before, early return\r\n      if (sensorsDatasets[firstSensor].rawDatasets[initialDatasetType].sample) return;\r\n\r\n      const url = getRawDatasetUrl({\r\n        school_id: schoolID,\r\n        sensor_location_short: firstSensor,\r\n        datasetType: initialDatasetType,\r\n        isSample: true\r\n      });\r\n\r\n      fetchDataFromURL({ url, extension: 'csv', needsAuthorization: true })\r\n        .then((data) => {\r\n          const tmp = { ...sensorsDatasets };\r\n          tmp[firstSensor].rawDatasets[initialDatasetType].sample = data;\r\n          updateSensorsDatasets(tmp);\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n  }, [sensorsDatasets, previewingDataset]);\r\n\r\n  return (\r\n    <Grid container justifyContent=\"center\" alignItems=\"start\" spacing={smallScreen ? 1 : 2} sx={{ mt: 0 }} overflow=\"scroll\">\r\n      <Grid item sm={12} md={6}>\r\n        <DatasetsTable\r\n          schoolID={schoolID}\r\n          sensorsDatasets={sensorsDatasets}\r\n          updateSensorsDatasets={updateSensorsDatasets}\r\n          smallScreen={smallScreen}\r\n          previewingDataset={previewingDataset}\r\n          setPreviewingDataset={setPreviewingDataset}\r\n        />\r\n      </Grid>\r\n      <Grid item sm={12} md={6} maxWidth={smallScreen ? '100%' : 'unset'} sx={{ mt: 1 }}>\r\n        <PreviewDataset\r\n          sensorsDatasets={sensorsDatasets}\r\n          updateSensorsDatasets={updateSensorsDatasets}\r\n          previewingDataset={previewingDataset}\r\n          schoolID={schoolID}\r\n          smallScreen={smallScreen}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  )\r\n};\r\n\r\nconst DatasetsTable = (props) => {\r\n  const { schoolID, sensorsDatasets, smallScreen, previewingDataset, setPreviewingDataset, updateSensorsDatasets } = props;\r\n  return (\r\n    <Table\r\n      size=\"small\"\r\n      sx={{\r\n        tableLayout: 'fixed',\r\n        '& td, div, .MuiMenuItem-root': {\r\n          fontSize: smallScreen ? '0.625rem' : '0.8rem'\r\n        }\r\n      }}\r\n    >\r\n      <TableHead>\r\n        <TableRow>\r\n          <TableCell sx={{ pl: 1 }}>\r\n            Sensor Location\r\n          </TableCell>\r\n          <TableCell sx={{ width: smallScreen ? '9.5rem' : '11rem' }}>\r\n            Dataset Type\r\n          </TableCell>\r\n        </TableRow>\r\n      </TableHead>\r\n      <TableBody>\r\n        {sensorsDatasets && Object.keys(sensorsDatasets).map((location_short) => (\r\n          <Dataset\r\n            schoolID={schoolID}\r\n            smallScreen={smallScreen}\r\n            sensor={location_short}\r\n            sensorsDatasets={sensorsDatasets}\r\n            previewingDataset={previewingDataset}\r\n            setPreviewingDataset={setPreviewingDataset}\r\n            isPreviewing={location_short === previewingDataset?.sensor}\r\n            updateSensorsDatasets={updateSensorsDatasets}\r\n          />\r\n        ))}\r\n      </TableBody>\r\n    </Table>\r\n  )\r\n}\r\n\r\nconst Dataset = (props) => {\r\n  const { schoolID, sensorsDatasets, sensor, previewingDataset, setPreviewingDataset, isPreviewing, updateSensorsDatasets } = props;\r\n\r\n  const [selectedDatasetType, setSelectedDatasetType] = useState(RawDatasetType.hourly);\r\n\r\n  useEffect(() => {\r\n    if (selectedDatasetType !== RawDatasetType.hourly) setSelectedDatasetType(RawDatasetType.hourly);\r\n  }, [schoolID])\r\n\r\n  const handleDatasetTypeChange = (event) => {\r\n    const selectedVal = event.target.value;\r\n    setSelectedDatasetType(selectedVal);\r\n    setPreviewingDataset({ datasetType: selectedVal, sensor });\r\n    fetchThisDataset(selectedVal);\r\n  };\r\n\r\n  const fetchThisDataset = (datasetType) => {\r\n    // If this dataset version hasn't been fetched yet,\r\n    // fetch it and append it into the object fetchedDatasets\r\n    if (!sensorsDatasets[sensor].rawDatasets[datasetType].sample) {\r\n      const url = getRawDatasetUrl({\r\n        school_id: schoolID,\r\n        sensor_location_short: sensorsDatasets[sensor].location_short,\r\n        datasetType: datasetType,\r\n        isSample: true\r\n      });\r\n\r\n      fetchDataFromURL({ url, extension: 'csv', needsAuthorization: true })\r\n        .then((data) => {\r\n          const tmp = { ...sensorsDatasets };\r\n          tmp[sensor].rawDatasets[datasetType].sample = data;\r\n          updateSensorsDatasets(tmp);\r\n        });\r\n    }\r\n  }\r\n\r\n  const setThisSensorToPreview = () => {\r\n    if (previewingDataset?.sensor !== sensor) {\r\n      setPreviewingDataset({\r\n        datasetType: selectedDatasetType,\r\n        sensor: sensor\r\n      });\r\n      fetchThisDataset(selectedDatasetType);\r\n    }\r\n  }\r\n\r\n  const theme = useTheme();\r\n\r\n  return (\r\n    <>\r\n      <TableRow key={sensor}>\r\n        <TableCell\r\n          sx={{\r\n            pl: 1,\r\n            cursor: 'pointer',\r\n            background: isPreviewing && theme.palette.background.NYUpurpleLight\r\n          }}\r\n          onClick={setThisSensorToPreview}>\r\n          {sensorsDatasets[sensor].location_long}\r\n        </TableCell>\r\n\r\n        <TableCell\r\n          sx={{\r\n            position: 'relative',\r\n            background: isPreviewing && theme.palette.background.NYUpurpleLight\r\n          }}>\r\n          <FormControl size=\"small\">\r\n            <Select\r\n              value={selectedDatasetType}\r\n              onChange={handleDatasetTypeChange}\r\n              variant=\"standard\"\r\n              MenuProps={{ disablePortal: true }}\r\n            >\r\n              {Object.keys(sensorsDatasets[sensor].rawDatasets).reverse().map((datasetType, index) => (\r\n                <MenuItem\r\n                  key={index}\r\n                  value={datasetType}\r\n                >\r\n                  <Stack direction=\"row\" alignItems=\"center\">\r\n                    {datasetType.charAt(0).toUpperCase() + datasetType.slice(1).toLowerCase()}\r\n                  </Stack>\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl>\r\n        </TableCell>\r\n      </TableRow >\r\n    </>\r\n  )\r\n}\r\n\r\nconst PreviewDataset = (props) => {\r\n  const { sensorsDatasets, updateSensorsDatasets, previewingDataset, schoolID, smallScreen } = props;\r\n  const theme = useTheme();\r\n\r\n  const [previewingDatasetName, setPreviewingDatasetName] = useState(\"Not previewing any dataset\");\r\n  const [csvFileName, setCsvFileName] = useState(\"No dataset\");\r\n  const [isDatasetLoading, setIsDatasetLoading] = useState(false);\r\n\r\n  const downloadPreviewingDataset = () => {\r\n    if (!previewingDataset) return;\r\n\r\n    const fetchedDataset = sensorsDatasets[previewingDataset.sensor].rawDatasets[previewingDataset.datasetType].full;\r\n\r\n    // Fetch the full dataset if it has not been fetched before\r\n    if (!fetchedDataset) {\r\n      const url = getRawDatasetUrl({\r\n        school_id: schoolID,\r\n        sensor_location_short: previewingDataset.sensor,\r\n        datasetType: previewingDataset.datasetType,\r\n        isSample: false\r\n      });\r\n\r\n      fetchDataFromURL({ url, extension: 'csv', needsAuthorization: true }).then((data) => {\r\n        const tmp = { ...sensorsDatasets };\r\n        tmp[previewingDataset.sensor].rawDatasets[previewingDataset.datasetType].full = data;\r\n        updateSensorsDatasets(tmp);\r\n\r\n        convertCSVforDownload(data);\r\n      });\r\n    }\r\n    else {\r\n      convertCSVforDownload(fetchedDataset);\r\n    }\r\n\r\n  };\r\n\r\n  const convertCSVforDownload = (dataset) => {\r\n    const blob = new Blob([dataset], { type: 'application/octet-stream' }); // create a Blob with the raw data\r\n    const url = URL.createObjectURL(blob); // create a download link for the Blob\r\n    const downloadLink = document.createElement('a');\r\n    downloadLink.href = url;\r\n    downloadLink.download = csvFileName;\r\n    document.body.appendChild(downloadLink);\r\n    downloadLink.click(); // simulate a click on the download link\r\n    URL.revokeObjectURL(url); // clean up by revoking the object URL\r\n    document.body.removeChild(downloadLink);\r\n  }\r\n\r\n  const [formattedData, setFormattedData] = useState('');\r\n  const [rowNumber, setRowNumber] = useState('');\r\n\r\n  useEffect(() => {\r\n    // If no dataset is chosen to be previewed, early return\r\n    if (!previewingDataset) return;\r\n\r\n    // Update previewing dataset name regardless if the dataset preview has finished loading\r\n    setPreviewingDatasetName(`Previewing: ${previewingDataset.sensor} (${previewingDataset.datasetType})`);\r\n\r\n    // Get the raw dataset\r\n    const csvData = sensorsDatasets[previewingDataset.sensor]?.rawDatasets[previewingDataset.datasetType]?.sample;\r\n\r\n    // If it is empty, then it hasn't been loaded yet\r\n    if (!csvData) {\r\n      setRowNumber(null);\r\n      setFormattedData(null);\r\n      setCsvFileName(\"Loading...\");\r\n      setIsDatasetLoading(true);\r\n      return;\r\n    };\r\n\r\n    if (isDatasetLoading) setIsDatasetLoading(false);\r\n\r\n    const lines = csvData.split('\\n');\r\n\r\n    const headers = lines[0].split(',');\r\n    const rows = lines.slice(1);\r\n\r\n    setRowNumber([\r\n      \"\",\r\n      ...rows.map(row => row.split(',')[0])\r\n    ].join('\\n'));\r\n\r\n    setFormattedData([\r\n      headers.slice(1).join(','), // Keep the headers for the rest of the columns\r\n      ...rows.map(row => row.split(',').slice(1).join(',')) // Remove the first column from each row\r\n    ].join('\\n'));\r\n\r\n    // Get the second column of the last row and extract the date part to set the csv's file name\r\n    let dateString;\r\n    if (rows.length > 0) {\r\n      const lastRow = rows[rows.length - 1];\r\n      const columns = lastRow.split(',');\r\n      if (columns.length >= 2) {\r\n        const dateTimeString = columns[1]; // Get the second column\r\n        dateString = dateTimeString.split('T')[0]; // Extract the date part\r\n      }\r\n    }\r\n\r\n    const csvFileName = `${schoolID}-${previewingDataset.sensor}-${previewingDataset.datasetType}-${dateString}.csv`;\r\n    setCsvFileName(csvFileName);\r\n  }, [previewingDataset, sensorsDatasets]);\r\n\r\n  return (\r\n    <Stack spacing={1}>\r\n      <Box sx={{ '& *': { fontFamily: \"monospace !important\" } }}>\r\n        <Stack direction=\"row\">\r\n          <Typography variant='body2' gutterBottom fontWeight={500}>\r\n            {previewingDatasetName}\r\n          </Typography>\r\n        </Stack>\r\n\r\n        <Box\r\n          component=\"pre\"\r\n          sx={{\r\n            overflowX: 'auto',\r\n            color: theme.palette.text.secondary,\r\n            backgroundColor: theme.palette.customBackground,\r\n            p: 2,\r\n            pt: 1.5,\r\n            borderRadius: theme.shape.borderRadius,\r\n            borderTopLeftRadius: 0,\r\n            height: smallScreen ? '11.8rem' : '14rem',\r\n            width: smallScreen ? '100%' : 'unset',\r\n            marginTop: 0\r\n          }}\r\n        >\r\n          <Stack\r\n            direction=\"row\"\r\n            sx={{ fontSize: smallScreen ? '0.625rem !important' : '0.8rem !important' }}\r\n          >\r\n            {\r\n              formattedData ?\r\n                <>\r\n                  <Box sx={{ mr: 2, userSelect: 'none' }}>\r\n                    {rowNumber}\r\n                  </Box>\r\n                  <Box>\r\n                    {formattedData}\r\n                  </Box>\r\n                </>\r\n                :\r\n                <LoadingAnimation optionalText=\"Loading\" />\r\n            }\r\n          </Stack>\r\n        </Box>\r\n      </Box>\r\n      <Box textAlign=\"center\" >\r\n        <Button\r\n          variant=\"contained\"\r\n          sx={{\r\n            textTransform: 'none',\r\n            textAlign: 'left',\r\n            lineHeight: 1.1,\r\n            px: 1.5,\r\n            py: 1\r\n          }}\r\n          onClick={() => {\r\n            downloadPreviewingDataset();\r\n            Tracking.sendEventAnalytics(Tracking.Events.rawDatasetDownloaded, {\r\n              dataset_type: previewingDataset?.datasetType,\r\n              sensor: previewingDataset?.sensor\r\n            });\r\n          }}\r\n          disabled={isDatasetLoading}\r\n        >\r\n          <DownloadIcon sx={{ fontSize: '1.25rem', mr: 0.5 }} />\r\n          {csvFileName}\r\n        </Button>\r\n      </Box>\r\n    </Stack >\r\n  )\r\n}","// disable eslint for this file\r\n/* eslint-disable */\r\nimport { useState, useContext } from \"react\";\r\nimport { Button, Menu } from \"@mui/material\";\r\nimport { Link } from 'react-router-dom';\r\nimport TvIcon from '@mui/icons-material/Tv';\r\nimport MenuItemAsNavLink from \"../../Header/MenuItemAsNavLink\";\r\nimport NavLinkBehavior from \"../../Header/NavLinkBehavior\";\r\nimport { DashboardContext } from \"../../../ContextProviders/DashboardContext\";\r\nimport { isValidArray } from \"../../../Utils/Utils\";\r\n\r\nconst ScreenDropDownMenu = () => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const { currentSchoolID, schoolMetadata } = useContext(DashboardContext);\r\n\r\n  if (!schoolMetadata) return;\r\n  const screens = schoolMetadata.screens;\r\n\r\n  if (!isValidArray(screens)) return null;\r\n\r\n  // If there is only 1 screen, display a button linked to that screen\r\n  if (screens.length <= 1) {\r\n    return (\r\n      <Button\r\n        variant=\"contained\"\r\n        component={Link}\r\n        to={`/screen/${currentSchoolID}`}\r\n      >\r\n        <TvIcon sx={{ fontSize: '1rem' }} />&nbsp;TV Screen\r\n      </Button>\r\n    )\r\n  }\r\n  // If there are more than 1 screens to choose from, display a popup dropdown menu\r\n  const open = Boolean(anchorEl);\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        id=\"basic-button\"\r\n        aria-controls={open ? 'tv-screen-list-menu' : undefined}\r\n        aria-haspopup=\"true\"\r\n        aria-expanded={open ? 'true' : undefined}\r\n        onClick={handleClick}\r\n        variant=\"contained\"\r\n      >\r\n        <TvIcon sx={{ fontSize: '1rem' }} />\r\n        &nbsp;\r\n        TV Screens List\r\n      </Button>\r\n      <Menu\r\n        id=\"tv-screen-list-menu\"\r\n        anchorEl={anchorEl}\r\n        open={open}\r\n        onClose={handleClose}\r\n        MenuListProps={{\r\n          'aria-labelledby': 'basic-button',\r\n        }}\r\n      >\r\n        {\r\n          screens.map((screen, index) => (\r\n            <MenuItemAsNavLink\r\n              key={index}\r\n              behavior={NavLinkBehavior.toNewPage}\r\n              to={`/screen/${currentSchoolID}/${screen.screen_name}`}\r\n              label={screen.location_long}\r\n              sx={{ fontSize: '0.8rem' }}\r\n            />\r\n          ))}\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ScreenDropDownMenu;","// disable eslint for this file\r\n/* eslint-disable */\r\n\r\nimport { useContext, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { Box, Menu, MenuItem, MenuList } from \"@mui/material\";\r\nimport { CustomChip } from \"../Pages/Project\";\r\n\r\nimport PlaceIcon from '@mui/icons-material/Place';\r\nimport { LocalStorage } from \"../Utils/LocalStorage\";\r\nimport { UniqueRoutes } from \"../Utils/RoutesUtils\";\r\n\r\nimport * as Tracking from '../Utils/Tracking';\r\n\r\nimport { DashboardContext } from \"../ContextProviders/DashboardContext\";\r\nimport { UserContext } from \"../ContextProviders/UserContext\";\r\n\r\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@mui/icons-material/ArrowDropUp';\r\n\r\nconst SchoolSelector = () => {\r\n  const { currentSchoolID, schoolMetadata } = useContext(DashboardContext);\r\n  const { user } = useContext(UserContext);\r\n\r\n  // If there is only one school, return a Chip displaying the name of that school\r\n  if (!Array.isArray(user.allowedSchools) || user.allowedSchools.length <= 1)\r\n    return (\r\n      <CustomChip\r\n        icon={<PlaceIcon />}\r\n        label={schoolMetadata?.name || \"N/A\"}\r\n        tooltipTitle={\"School\"}\r\n      />\r\n    );\r\n\r\n  // Else, display a drop down menu that allows choosing between different schools\r\n  const [schoolID, setSchoolID] = useState('');\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleItemSelect = (schoolID) => () => {\r\n    if (currentSchoolID !== schoolID) {\r\n      localStorage.setItem(LocalStorage.schoolID, schoolID)\r\n      setSchoolID(schoolID);\r\n\r\n      Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\r\n        {\r\n          origin_school: currentSchoolID,\r\n          destination_school_id: schoolID,\r\n          origin_id: 'school_selector'\r\n        });\r\n\r\n      navigate(`${UniqueRoutes.dashboard}/${schoolID}`)\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  const returnChipLabel = () => {\r\n    return (\r\n      <Box sx={{\r\n        '& svg': {\r\n          fontSize: \"1rem\", verticalAlign: \"sub\", marginLeft: \"0.25rem\"\r\n        }\r\n      }\r\n      }>\r\n        {schoolMetadata?.name || \"N/A\"}\r\n        {Boolean(anchorEl) ? (\r\n          <ArrowDropUpIcon />\r\n        ) : (\r\n          <ArrowDropDownIcon />\r\n        )}\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <CustomChip\r\n        icon={<PlaceIcon />}\r\n        label={returnChipLabel()}\r\n        tooltipTitle={\"Click to Select School\"}\r\n        clickable\r\n        onClick={handleClick}\r\n        aria-controls={open ? 'basic-menu' : undefined}\r\n        aria-haspopup=\"true\"\r\n        aria-expanded={open ? 'true' : undefined}\r\n      />\r\n      <Menu\r\n        anchorEl={anchorEl}\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}\r\n        MenuListProps={{\r\n          'aria-labelledby': 'basic-button',\r\n        }}\r\n      >\r\n        <MenuList dense>\r\n          {user.allowedSchools.map((school, index) => (\r\n            <MenuItem\r\n              key={index}\r\n              onClick={handleItemSelect(school.school_id)}\r\n            >\r\n              {school.name}\r\n            </MenuItem>\r\n          ))}\r\n        </MenuList>\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SchoolSelector;","import { Button, Stack } from \"@mui/material\";\r\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\r\nimport { useContext } from \"react\";\r\nimport { DashboardContext } from \"../ContextProviders/DashboardContext\";\r\n\r\nconst LoadMoreChartsButton = () => {\r\n  const { setLoadMoreCharts } = useContext(DashboardContext);\r\n\r\n  return (\r\n    <Stack sx={{ mt: 6, mx: 'auto', maxWidth: 'sm' }}>\r\n      <Button\r\n        variant=\"contained\"\r\n        onClick={() => {\r\n          setLoadMoreCharts(true);\r\n        }}\r\n      >\r\n        <KeyboardArrowDownIcon sx={{ fontSize: '1rem' }} />&nbsp;Load More Charts\r\n      </Button>\r\n    </Stack>\r\n  )\r\n}\r\nexport default LoadMoreChartsButton;","// disable eslint for this file\r\n/* eslint-disable */\r\nimport { useState, useEffect, useContext } from 'react';\r\nimport { LinkContext } from '../ContextProviders/LinkContext';\r\nimport parse from 'html-react-parser';\r\nimport ChartComponentWrapper from '../Graphs/ChartComponentWrapper';\r\nimport UppercaseTitle from '../Components/UppercaseTitle';\r\nimport CommentSection, { PAGE_NAME } from '../Components/CommentSection';\r\nimport { Box, Typography, Container, Divider, Chip, Grid, Tooltip, Stack, Skeleton } from '@mui/material';\r\n\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\nimport ThemePreferences from '../Themes/ThemePreferences';\r\n\r\nimport AirQualityIndexLegendQuickGlance from '../Components/AirQuality/AirQualityIndexLegendQuickGlance';\r\n\r\nimport jsonData from '../section_data.json';\r\n\r\nimport PersonIcon from '@mui/icons-material/Person';\r\nimport EmailIcon from '@mui/icons-material/Email';\r\nimport PublishedWithChangesIcon from '@mui/icons-material/PublishedWithChanges';\r\nimport BarChartIcon from '@mui/icons-material/BarChart';\r\nimport CommentIcon from '@mui/icons-material/Comment';\r\n\r\nimport { replacePlainHTMLWithMuiComponents } from '../Utils/Utils';\r\nimport DatasetDownloadDialog from '../Components/DatasetDownload/DatasetDownloadDialog';\r\nimport ScreenDropDownMenu from '../Components/AirQuality/AirQualityScreen/ScreenDropDownMenu';\r\n\r\nimport { scrollToSection } from '../Components/Header/MenuItemAsNavLink';\r\nimport FullWidthBox from '../Components/FullWidthBox';\r\n\r\nimport * as Tracking from '../Utils/Tracking';\r\n\r\nimport CurrentAQIGrid from '../Components/AirQuality/CurrentAQIGrid';\r\nimport SchoolSelector from '../Components/SchoolSelector';\r\n\r\nimport LoadingAnimation from '../Components/LoadingAnimation';\r\n\r\nimport { CommentCountsContext } from '../ContextProviders/CommentCountsContext';\r\n\r\nimport NYUADbanner from './Embeds/NYUADbanner';\r\n\r\nimport { DashboardContext } from '../ContextProviders/DashboardContext';\r\nimport { PreferenceContext } from '../ContextProviders/PreferenceContext';\r\nimport LoadMoreChartsButton from '../Components/LoadMoreChartsButton';\r\nimport AQIexplanation from '../Components/AirQuality/AQIexplanation';\r\n\r\n// Custom Chip component to display metadata\r\nexport const CustomChip = (props) => {\r\n  const { tooltipTitle, label, ...otherProps } = props;\r\n  return (\r\n    <Tooltip title={tooltipTitle} enterDelay={0} leaveDelay={200}>\r\n      <Chip\r\n        size=\"small\"\r\n        label={label || <Skeleton variant=\"text\" sx={{ minWidth: '5rem' }} />}\r\n        {...otherProps}\r\n      />\r\n    </Tooltip>\r\n  );\r\n}\r\n\r\nconst Project = () => {\r\n  let lastUpdate;\r\n\r\n  const { setChartsTitlesList } = useContext(LinkContext);\r\n  const { commentCounts, fetchCommentCounts, setCommentCounts } = useContext(CommentCountsContext);\r\n  const { schoolMetadata, current, allChartsData, loadMoreCharts } = useContext(DashboardContext);\r\n  const { themePreference, temperatureUnitPreference } = useContext(PreferenceContext);\r\n\r\n  const [displayCommentSection, setDisplayCommentSection] = useState(false);\r\n  const [displayMapOfSensors, setDisplayMapOfSensors] = useState(false);\r\n\r\n  // If NYUAD, display comment section and map of sensors\r\n  useEffect(() => {\r\n    if (!schoolMetadata) return;\r\n\r\n    const isNYUAD = schoolMetadata.school_id === 'nyuad';\r\n    setDisplayCommentSection(isNYUAD);\r\n    setDisplayMapOfSensors(isNYUAD);\r\n\r\n    // Fetch comment count for NYUAD\r\n    if (isNYUAD && !commentCounts) {\r\n      fetchCommentCounts().then((data) => {\r\n        setCommentCounts(data);\r\n      });\r\n    }\r\n  }, [schoolMetadata])\r\n\r\n  // Update the chart title list for quick navigation\r\n  useEffect(() => {\r\n    if (!allChartsData?.charts) return;\r\n\r\n    const chartsTitles = allChartsData?.charts.map((element, index) => ({ chartTitle: element.title, chartID: `chart-${index + 1}` }));\r\n    setChartsTitlesList(chartsTitles);\r\n  }, [allChartsData]);\r\n\r\n  const theme = useTheme();\r\n\r\n  const getDashboardTitle = () => {\r\n    if (schoolMetadata?.school_id) return `Air Quality | ${schoolMetadata?.school_id}`\r\n  }\r\n\r\n  const displayProjectDescription = () => {\r\n    if (schoolMetadata) return (\r\n      <Typography\r\n        component=\"div\"\r\n        variant=\"body1\"\r\n        color=\"text.secondary\"\r\n        sx={{\r\n          textAlign: 'justify', pb: 2, mb: 0, \"& table *\": {\r\n            color: `${theme.palette.text.secondary}`\r\n          }\r\n        }}\r\n        gutterBottom\r\n      >\r\n        {\r\n          parse(schoolMetadata.description || '', {\r\n            replace: replacePlainHTMLWithMuiComponents,\r\n          })\r\n        }\r\n      </Typography>\r\n    )\r\n    else {\r\n      return (\r\n        Array.from({ length: 3 }).map((_, index) => (\r\n          <Skeleton key={index} variant='text' />\r\n        ))\r\n      )\r\n    }\r\n  };\r\n\r\n  const displayCharts = () => {\r\n    // Display if there are at least one chart\r\n    if (Object.keys(allChartsData).length > 0) {\r\n      return (\r\n        <>\r\n          {Object.keys(allChartsData).map((chartID, index) => (\r\n            <FullWidthBox\r\n              key={chartID}\r\n              backgroundColor={index % 2 !== 0 ? 'customAlternateBackground' : ''}\r\n            >\r\n              <Container\r\n                sx={{ pt: 4, pb: 4 }}\r\n                height=\"auto\"\r\n                className={themePreference === ThemePreferences.dark ? 'dark' : ''}\r\n                id={`chart-${index + 1}`}\r\n              >\r\n\r\n                <ChartComponentWrapper\r\n                  chartTitle={allChartsData[chartID].title}\r\n                  generalChartSubtitle={allChartsData[chartID].subtitle}\r\n                  generalChartReference={allChartsData[chartID].reference}\r\n                  chartData={{\r\n                    chartIndex: index,\r\n                    ...allChartsData[chartID],\r\n                  }}\r\n                  chartID={chartID}\r\n                  chartIndex={index}\r\n                />\r\n\r\n                {\r\n                  // Optionally display the button to load more charts at the bottom of the last chart\r\n                  // (if not already fetched every chart)\r\n                  displayLoadMoreButton(index === Object.keys(allChartsData).length - 1)\r\n                }\r\n              </Container>\r\n            </FullWidthBox>\r\n          ))}\r\n\r\n        </>\r\n      );\r\n    } else {\r\n      // Else display loading animation\r\n      return <LoadingAnimation optionalText=\"Loading Visualizations\" />;\r\n    }\r\n  };\r\n\r\n  const displayLoadMoreButton = (isLastChartInList) => {\r\n    if (isLastChartInList === true && loadMoreCharts === false) {\r\n      return <LoadMoreChartsButton />;\r\n    }\r\n    else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  const GridOfMetadataChips = () => {\r\n    return (\r\n      <Grid container spacing={1} sx={{ mt: -3, pb: 3 }}>\r\n        <Grid item>\r\n          <SchoolSelector />\r\n        </Grid>\r\n\r\n        <Grid item>\r\n          <CustomChip\r\n            icon={<PersonIcon />}\r\n            label={schoolMetadata?.contactPerson}\r\n            tooltipTitle=\"Contact Person\"\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item>\r\n          <CustomChip\r\n            icon={<EmailIcon />}\r\n            label={schoolMetadata?.contactEmail}\r\n            tooltipTitle=\"Contact Email\"\r\n            component=\"a\"\r\n            href={`mailto:${schoolMetadata?.contactEmail}`}\r\n            clickable\r\n          />\r\n        </Grid>\r\n\r\n        <Grid item>\r\n          <CustomChip\r\n            icon={<BarChartIcon />}\r\n            label={`${Object.keys(allChartsData).length || \"...\"} Chart${Object.keys(allChartsData).length !== 1 ? 's' : ''}`}\r\n            tooltipTitle=\"Number of Charts\"\r\n            onClick={() => {\r\n              scrollToSection(jsonData.charts.id);\r\n              Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\r\n                {\r\n                  destination_id: jsonData.charts.id,\r\n                  destination_label: jsonData.chartData?.toString(),\r\n                  origin_id: 'chip'\r\n                });\r\n            }}\r\n          />\r\n        </Grid>\r\n\r\n        {\r\n          lastUpdate &&\r\n          <Grid item>\r\n            <CustomChip\r\n              icon={<PublishedWithChangesIcon />}\r\n              label={`Last update: ${lastUpdate}`}\r\n              tooltipTitle=\"Last Update\" />\r\n          </Grid>\r\n        }\r\n\r\n        {(displayCommentSection === true && commentCounts !== null) &&\r\n          <Grid item>\r\n            <CustomChip\r\n              icon={<CommentIcon />}\r\n              label={`${commentCounts[PAGE_NAME]} Comment${commentCounts[PAGE_NAME] > 1 ? \"s\" : \"\"}`}\r\n              tooltipTitle=\"Number of Comments\"\r\n              onClick={() => {\r\n                scrollToSection(jsonData.commentSection.id);\r\n                Tracking.sendEventAnalytics(Tracking.Events.internalNavigation,\r\n                  {\r\n                    destination_id: jsonData.commentSection.id,\r\n                    destination_label: jsonData.commentSection.toString(),\r\n                    origin_id: 'chip'\r\n                  })\r\n              }}\r\n            />\r\n          </Grid>}\r\n      </Grid>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Box width=\"100%\">\r\n      <AirQualityIndexLegendQuickGlance />\r\n\r\n      <FullWidthBox backgroundColor='customAlternateBackground'>\r\n        <Container sx={{ pt: 2, pb: 2 }}>\r\n          <UppercaseTitle text={getDashboardTitle()} />\r\n          <GridOfMetadataChips />\r\n\r\n          {displayMapOfSensors === true &&\r\n            (\r\n              <NYUADbanner\r\n                initialNyuadCurrentData={current}\r\n                isOnBannerPage={false}\r\n                themePreference={themePreference}\r\n                minMapHeight={\"250px\"}\r\n              />\r\n            )\r\n          }\r\n\r\n          {displayMapOfSensors === false &&\r\n            (<Box textAlign=\"center\" sx={{ mb: 2 }}>\r\n              <CurrentAQIGrid\r\n                currentSensorsData={current}\r\n                isScreen={false}\r\n                temperatureUnitPreference={temperatureUnitPreference}\r\n              />\r\n            </Box>)\r\n          }\r\n\r\n          {displayProjectDescription()}\r\n\r\n          <Stack direction=\"row\" spacing={2}>\r\n            <ScreenDropDownMenu />\r\n            <DatasetDownloadDialog />\r\n          </Stack>\r\n\r\n          <AQIexplanation />\r\n\r\n        </Container>\r\n      </FullWidthBox>\r\n\r\n      <Box id={jsonData.charts.id}>\r\n        {displayCharts(allChartsData)}\r\n      </Box>\r\n      <Divider />\r\n\r\n      {displayCommentSection === true &&\r\n        <FullWidthBox id={jsonData.commentSection.id} sx={{ pt: 3, pb: 4 }}>\r\n          <CommentSection pageID={PAGE_NAME} />\r\n        </FullWidthBox>\r\n      }\r\n    </Box >\r\n  );\r\n};\r\n\r\nexport default Project;\r\n","// disable eslint for this file\r\n/* eslint-disable */\r\n\r\nimport { useEffect, useContext } from \"react\";\r\nimport { useLocation, useNavigate, useParams } from \"react-router-dom\";\r\n\r\nimport { fetchDataFromURL } from \"../Components/DatasetDownload/DatasetFetcher\";\r\nimport Project from \"./Project\";\r\nimport { ChartEndpointsOrder, GeneralEndpoints, fetchAndProcessCurrentSensorsData, getApiUrl, getChartApiUrl, getHistoricalChartApiUrl } from \"../Utils/ApiUtils\";\r\nimport { LinkContext } from \"../ContextProviders/LinkContext\";\r\nimport { DashboardContext } from \"../ContextProviders/DashboardContext\";\r\n\r\nimport { UserContext } from \"../ContextProviders/UserContext\";\r\nimport { LocalStorage } from \"../Utils/LocalStorage\";\r\nimport { UniqueRoutes } from \"../Utils/RoutesUtils\";\r\n\r\nconst numInitialCharts = 2;\r\n\r\nconst Dashboard = () => {\r\n  const { school_id_param } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const location = useLocation();\r\n  const locationPath = location.pathname;\r\n\r\n  // Update the page's title based on school_id_param\r\n  useEffect(() => {\r\n    if (!school_id_param) return;\r\n\r\n    document.title = `CITIESair | ${school_id_param.toUpperCase()}`;\r\n  }, [school_id_param]);\r\n\r\n  // Update current page type\r\n  const { setCurrentPage } = useContext(LinkContext);\r\n  useEffect(() => {\r\n    setCurrentPage(UniqueRoutes.dashboard);\r\n  }, []);\r\n\r\n  const {\r\n    currentSchoolID, setCurrentSchoolID,\r\n    schoolMetadata, setSchoolMetadata,\r\n    current, setCurrent,\r\n    allChartsData, setIndividualChartData,\r\n    loadMoreCharts\r\n  } = useContext(DashboardContext);\r\n  const { user } = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    // NYUAD is public --> skip authentication and just fetch data\r\n    if (school_id_param === \"nyuad\") {\r\n      fetchInitialDataForDashboard('nyuad');\r\n      setCurrentSchoolID('nyuad');\r\n      return;\r\n    };\r\n\r\n    if (user.checkedAuthentication === true && user.authenticated === false) {\r\n      navigate(`${UniqueRoutes.login}?${UniqueRoutes.redirectQuery}=${locationPath}`);\r\n    }\r\n\r\n    const allowedSchools = user.allowedSchools;\r\n\r\n    if (Array.isArray(allowedSchools) && allowedSchools.length > 0) {\r\n      // If no school_id_param is given\r\n      if (!school_id_param) {\r\n        let school_id;\r\n\r\n        // If there has been a previouslySelectedSchoolID, then load dashboard data for this one\r\n        const previouslySelectedSchoolID = localStorage.getItem(LocalStorage.schoolID);\r\n        if (allowedSchools.map((school) => school.school_id).includes(previouslySelectedSchoolID)) school_id = previouslySelectedSchoolID;\r\n        // If not existed yet, then just get the first school in the list\r\n        else {\r\n          school_id = allowedSchools[0].school_id;\r\n          setCurrentSchoolID(school_id);\r\n          localStorage.setItem(LocalStorage.schoolID, school_id);\r\n        }\r\n\r\n        navigate(school_id, { replace: true }); // navigate to the correct url: /dashboard/:school_id_param\r\n\r\n        // If there is no schoolMetadata or current or chartData, then fetch them\r\n        if (!(!schoolMetadata && !current && !allChartsData)) fetchInitialDataForDashboard(school_id);\r\n      }\r\n\r\n      // If there is school_id_param, check if school_id_param is in the allowedSchools\r\n      if (allowedSchools.map((school) => school.school_id).includes(school_id_param)) {\r\n        setCurrentSchoolID(school_id_param);\r\n        fetchInitialDataForDashboard(school_id_param);\r\n        localStorage.setItem(LocalStorage.schoolID, school_id_param);\r\n        return;\r\n      }\r\n    }\r\n  }, [user, school_id_param]);\r\n\r\n  const fetchInitialDataForDashboard = async (school_id) => {\r\n    try {\r\n      setSchoolMetadata();\r\n      setCurrent();\r\n      \r\n      const response = await Promise.all([\r\n        fetchDataFromURL({\r\n          url: getApiUrl({\r\n            endpoint: GeneralEndpoints.schoolmetadata,\r\n            school_id: school_id\r\n          }),\r\n          extension: 'json',\r\n          needsAuthorization: true\r\n        }),\r\n        fetchAndProcessCurrentSensorsData(getApiUrl({\r\n          endpoint: GeneralEndpoints.current,\r\n          school_id: school_id\r\n        }))\r\n      ])\r\n\r\n      setSchoolMetadata(response[0]);\r\n      setCurrent(response[1]);\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    const chartsToFetch = loadMoreCharts ? ChartEndpointsOrder : ChartEndpointsOrder.slice(0, numInitialCharts);\r\n    chartsToFetch.forEach((endpoint, index) => {\r\n      setIndividualChartData(index, {}); // set empty chartData to create a placeholder for this chart\r\n\r\n      fetchDataFromURL({\r\n        url: getHistoricalChartApiUrl({\r\n          endpoint: endpoint,\r\n          school_id: school_id\r\n        }),\r\n        extension: 'json',\r\n        needsAuthorization: true\r\n      })\r\n        .then(data => {\r\n          setIndividualChartData(index, data);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        })\r\n    });\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (loadMoreCharts === true) {\r\n      const restOfCharts = ChartEndpointsOrder.slice(numInitialCharts);\r\n      restOfCharts.forEach((endpoint, index) => {\r\n        const chartIndexInPage = numInitialCharts + index;\r\n        setIndividualChartData(chartIndexInPage, {}); // set empty chartData to create a placeholder for this chart\r\n        \r\n        fetchDataFromURL({\r\n          url: getChartApiUrl({\r\n            endpoint: endpoint,\r\n            school_id: currentSchoolID\r\n          }),\r\n          extension: 'json',\r\n          needsAuthorization: true\r\n        })\r\n          .then(data => {\r\n            setIndividualChartData(chartIndexInPage, data);\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          })\r\n      });\r\n    }\r\n\r\n  }, [loadMoreCharts]);\r\n\r\n  return (\r\n    <>\r\n      <Project />\r\n    </>\r\n  )\r\n};\r\n\r\nexport default Dashboard;"],"names":["Explanation","AQIexplanation","themePreference","useContext","PreferenceContext","_jsx","ExpandableSection","title","content","_jsxs","_Fragment","children","AirQualityIndexTable","Typography","component","variant","color","sx","mt","parse","replace","replacePlainHTMLWithMuiComponents","StyledTable","styled","Table","_ref","theme","isTiny","minWidth","fontSize","palette","text","secondary","breakpoints","down","fontWeight","primary","lineHeight","props","hideAQIDescription","returnFormattedBreakpoints","low","high","Infinity","concat","Box","overflow","size","TableHead","TableRow","TableCell","pr","width","height","pl","align","TableBody","AQIdatabase","map","element","index","border","backgroundColor","category","whiteSpace","aqiUS","rawPM2_5","rawPM10","description","healthSuggestions","outdoors","StyledAccordion","MuiAccordion","expanded","backgroundImage","background","default","boxShadow","shadows","transition","StyledAccordionSummary","MuiAccordionSummary","_ref2","marginTop","spacing","flexDirection","paddingLeft","textDecoration","main","marginBottom","TooltipText","_ref3","setExpanded","useState","undefined","onChange","panel","event","isExpanded","Tracking","expandSection","collapseSection","section","transitionDuration","expandIcon","ArrowDropDownIcon","id","Tooltip","enterDelay","leaveDelay","InfoIcon","marginLeft","MuiAccordionDetails","SELECT_ALL","ITEM_HEIGHT","ITEM_PADDING_TOP","SeriesSelector","items","itemsFromChart","selectorID","allowMultiple","seriesLabel","onSeriesSelection","displayChip","useTheme","MenuProps","PaperProps","style","maxHeight","customAlternateBackground","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","setItems","selectAll","setSelectAll","useEffect","every","item","selected","handleChange","target","value","includes","updatedItems","newDataColumns","selectedItems","filter","label","some","selectedItem","handleItemToggle","existingItem","Stack","direction","alignItems","FormControl","borderRadius","shape","Select","labelId","multiple","renderValue","VisibilityIcon","length","renderedLabel","MenuItem","disabled","Checkbox","checked","onClick","p","transform","Radio","borderTop","borderColor","position","bottom","zIndex","justifyContent","Switch","Grid","container","display","Chip","onDelete","ChartControlType","CategoryFilter","stackDirection","DateRangeFilter","ChartRangeFilter","NumberRangeFilter","getDateRangeForCalendarChart","dateStrings","min","reduce","current","max","getValueRangeForCalendarChart","values","Math","generateRandomID","random","toString","substr","hideAnnotations","stem","textStyle","opacity","boxStyle","returnResponsiveFontSizeInPixels","isPortrait","isSmaller","returnGenericOptions","_chartData$subcharts","_chartData$options","_chartData$options2","_chartData$options2$b","_chartData$options3","_chartData$options4","_chartData$options4$c","_chartData$options4$c2","_chartData$options5","_chartData$options5$c","_chartData$options5$c2","_chartData$options6","_chartData$options6$c","_chartData$options6$c2","_chartData$options7","_chartData$options7$c","_chartData$options7$c2","_chartData$options8","_chartData$options8$w","_chartData$options9","_chartData$options9$w","_chartData$options$le","_chartData$options10","_chartData$options10$","_options$vAxis$format","_options$vAxis","_options$vAxis$title","_options$vAxis2","_options$vAxis$viewWi","_options$vAxis3","_options$vAxis3$viewW","_options$vAxis$viewWi2","_options$vAxis4","_options$vAxis4$viewW","_options$vAxis$viewWi3","_options$vAxis5","_options$vAxis5$viewW","_options$hAxis$title","_options$hAxis","_options$vAxis6","_options$vAxis7","_options$vAxis7$gridl","_options$hAxis2","_options$hAxis3","_options$hAxis3$gridl","_options$hAxis4","_options$hAxis5","_options$hAxis5$gridl","_options$annotations","chartData","subchartIndex","isHomepage","axisTitleTextStyle","italic","bold","chart","axisTitle","axisTextStyle","axisText","options","subcharts","curveType","crosshair","orientation","trigger","fill","chartArea","portrait","landscape","tooltip","isHtml","showColorCode","legend","alignment","scrollArrows","activeColor","inactiveColor","pagingTextStyle","vAxis","format","viewWindow","hAxis","slantedText","slantedTextAngle","colors","optionsColors","series","Object","forEach","_serie","serie","trendlines","_item","colorAxis","colorAxisFirstColor","multiColor","colorIndex","NYUpurple","colorAxes","titleTextStyle","gridlines","minorGridlines","count","annotations","highContrast","contrastText","thickness","rx","ry","annotationBoxFill","fillOpacity","seriesSelector","pointSize","enableInteractivity","textPosition","viewWindowMode","returnCalendarChartOptions","existingOptions","calendarDimensions","calculateCalendarDimensions","cellSizeMin","cellSizeMax","chartWidth","calendar","cellSize","yearLabel","yearLabelFontSize","noDataPattern","returnChartControlUI","_chartControl$options","chartControl","mainChartData","mainChartOptions","chartControlUI","ui","snapToData","controlType","chartType","chartView","columns","chartOptions","window","innerWidth","addTouchEventListenerForChartControl","_ref4","controlWrapper","chartID","touchHandler","first","changedTouches","type","simulatedEvent","MouseEvent","bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","button","relatedTarget","dispatchEvent","preventDefault","isMounted","controlDOM","document","querySelector","touchEvent","addEventListener","capture","removeEventListener","shouldForwardProp","prop","gradientBackgroundId","maxWidth","padding","mozBoxShadow","webkitBoxShadow","secondaryRGB","margin","verticalAlign","paper","paddingTop","paddingBottom","paddingRight","borderWidth","top","left","right","stroke","strokeWidth","cursor","normalizeColorStops","optionalMinValue","optionalMaxValue","isValidArray","offset","totalColors","clampedStops","colorStop","offsets","normalizedOffsets","minOffset","maxOffset","normalizeColorStopOffsets","generateDiscreteColorGradientArray","numSteps","rgbToHex","r","g","b","x","hex","join","interpolateColor","color1","color2","factor","result","slice","i","round","normalizedColors","m","exec","parseInt","hexToRgb","colorArray","stepPositions","Array","from","_","pos","offset1","offset2","j","interpolatedColor","push","generateCssBackgroundGradient","gradientDirection","generateSvgFillGradient","_ref5","BackgroundGradient","_ref6","visibility","x1","y1","x2","y2","stopColor","yearSpacing","getCalendarChartMargin","CalendarChart","_options$colorAxis","_options$colorAxis2","_options$legend","_options$colorAxis3","_options$colorAxis4","data","dateRange","valueRangeBoxTitle","valueRange","calendarChartMargin","inFirstTwoRowsOfChart","dateStr","date","Date","dayOfWeek","getDay","isFirstTwoDaysOfWeek","firstYear","getFullYear","isInFirstYear","gradientSteps","showLegend","ValueRangeBox","ResponsiveCalendar","to","emptyColor","mode","axis","ticks","line","grid","minValue","maxValue","monthBorderColor","monthBorderWidth","daySpacing","dayBorderWidth","day","tooltipData","find","tooltipText","DOMParser","parseFromString","body","innerHTML","CustomTooltip","tooltipBoxRef","useRef","parentDiv","parentElement","ref","className","mr","calculateMarkerPositionOnRangeBox","labelStyle","textAlign","triangleStyle","borderLeft","borderRight","topTriangleStyle","bottomTriangleStyle","borderBottom","float","returnCustomStaticRanges","today","minDateOfDataset","aggregationType","hourlyReturn","range","startDate","startOfDay","addDays","endDate","endOfDay","dailyReturn","AggregationType","hourly","StyledDateRangePicker","Paper","showPickerPanel","smallScreen","action","customBackground","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","overflowY","AggregationTypeToggle","setAggregationType","ToggleButtonGroup","exclusive","newType","ToggleButton","textTransform","px","py","daily","InvalidRangeMessages","displayErrorMessage","invalidRangeMessage","Alert","severity","dataType","currentSchoolID","setIndividualChartData","DashboardContext","setInvalidRangeMessage","useMediaQuery","selectedRange","setSelectedRange","key","chartUrl","setChartUrl","setShowPickerPanel","paperRef","isFetchingData","setIsFetchingData","handleClickOutside","contains","checkValidRange","isSameDay","diff","differenceInDays","elevation","DateRangePicker","ranges","selection","staticRanges","createStaticRanges","inputRanges","rangeColors","minDate","maxDate","months","showMonthAndYearPickers","fixedHeight","preventSnapRefocus","calendarFocus","startDatePlaceholder","endDatePlaceholder","editableDateInputs","showMonthArrow","Button","stopPropagation","newUrl","getHistoricalChartApiUrl","endpoint","ChartEndpoints","historical","school_id","fetchDataFromURL","url","extension","needsAuthorization","then","catch","error","console","log","CircularProgress","disableShrink","NoChartToRender","my","SubChart","windowSize","selectedDataType","allowedDataTypes","google","GoogleContext","dataTable","setDataTable","chartWrapper","setChartWrapper","dashboardWrapper","setDashboardWrapper","setControlWrapper","previousChartData","setPreviousChartData","isFirstRender","setIsFirstRender","shouldRenderChart","setShouldRenderChart","renderChartNow","setRenderChartNow","allInitialColumns","setAllInitialColumns","dataColumns","setDataColumns","initialVAxisRange","setInitialVAxisRage","__","chartTotalHeight","setChartTotalHeight","useMemo","opts","calendarData","setCalendarData","calendarHeight","setCalendarHeight","containerWidth","setContainerWidth","dataArray","startYear","numberOfYear","yearHeight","totalHeight","GoogleChartStyleWrapper","minHeight","returnSelectedDataType","dataTypeKey","dataTypes","showUnit","LoadingAnimation","chartControlOptions","hasChartControl","control","dateRangePicker","formatters","handleSeriesSelection","setOptions","draw","method","setInitialColumnsColors","col","_options$series2","seriesIndex","serieAttribute","getInitialVAxisRange","vAxisMin","vAxisMax","getColumnRange","sourceColumn","isNaN","_allInitialColumns","_chartWrapper","_controlWrapper","hiddenSeriesObject","visibleInLegend","currentControlOptions","getOptions","newViewColumns","dataColumn","indexIn_","role","setView","newOptions","selectedSeriesCount","JSON","stringify","_shouldRenderChart","visualization","arrayToDataTable","hasOwnProperty","numberFormat","NumberFormat","numberFormatter","reconstructedColumns","evaluatedColumns","column","calc","calcFunction","Function","reconstructFunctionFromJSONstring","thisChartWrapper","ChartWrapper","containerId","thisControlWrapper","thisDashboardWrapper","Dashboard","getElementById","events","addListener","onChartReady","handleChartError","ControlWrapper","bind","initAllInitialColumns","initDataColumns","initialView","getView","viewFromDataTable","DataView","shouldAssignDomainRoleToFistColumn","dataSeriesIndex","getColumnLabel","indexInAllInitialColumns","defaultSeriesToDisplayInitially","_options$series","_options$series$col$s","getInitialColumns","gradientBackgroundColor","svgFillGradient","_options$vAxis2$viewW","gap","CustomDateRangePicker","renderChart","chartContainer","_ChartControlType$cha","wordLimit","reference","setIsExpanded","isMobile","subtitleRef","words","split","displayText","lastFullStop","lastIndexOf","ClickAwayListener","onClickAway","subtitleParent","closest","chartElements","Set","has","tagName","parentNode","isClickWithinSharedParent","ml","fetchChartDataType","anchorEl","setAnchorEl","name_title","open","Boolean","handleClose","currentTarget","Menu","onClose","MenuListProps","handleMenuItemClick","ChartStyleWrapper","overflowX","scrollbarGutter","StyledTabs","Tabs","StyledMenuItem","chartTitle","generalChartSubtitle","generalChartReference","passedChartData","chartHeight","passedChartHeight","chartIndex","isSmallWidth","setIsPortrait","matchMedia","matches","setWindowSize","innerHeight","chartMaxHeight","currentTab","setCurrentTab","previousTab","setPreviousTab","dropdownMenuTabIndex","setDropdownMenuTabIndex","dropdownMenuCurrentTitle","setDropdownMenuCurrentTitle","setAllowedDataTypes","setSelectedDataType","dataTypesArr","name_short","unit","AQIDataTypes","timeoutID","handleWindowResize","clearTimeout","setTimeout","DataTypeDropDownMenu","async","ChartEndpointsOrder","getChartApiUrl","renderMultipleSubcharts","needsDropdownMenu","maxTabsToDisplay","subchartsDataForTabs","subchartsDataForDropDownMenu","shouldDisplayThisSubchart","handleTabChange","newIndex","Tab","subchartTitle","flex","ExpandMoreIcon","subchartTitleShort","handleDropdownMenuSelection","WebkitOverflowScrolling","pointerEvents","mb","CollapsibleSubtitle","getSubtitles","_chartData$subcharts$","subchartSubtitle","getReferences","_chartData$subcharts$2","Skeleton","AirQualityIndexLegendQuickGlance","handlePopperOpen","airQualityIndexLegendQuickGlance","handlePopperClose","FadeInButtonForSpeedDial","distanceFromBottomOfWindow","Fab","onMouseEnter","onMouseLeave","AirIcon","Popper","placement","keepMounted","disableRestoreFocus","TransitionProps","Fade","timeout","mx","DatasetDownloadDialog","sensorsDatasets","updateSensorsDatasets","previewingDataset","setPreviewingDataset","sensor","acc","location_short","location_type","location_long","last_seen","rawDatasets","keys","RawDatasetType","datasetAcc","datasetKey","sample","full","setOpen","rawDatasetButtonClicked","DataObjectIcon","Dialog","fullWidth","fullScreen","DialogActions","autoFocus","ChevronLeftIcon","DialogContent","toUpperCase","DatasetSelectorAndPreviewer","schoolID","fontStyle","Link","href","firstSensor","initialDatasetType","datasetType","getRawDatasetUrl","sensor_location_short","isSample","tmp","sm","md","DatasetsTable","PreviewDataset","tableLayout","Dataset","isPreviewing","selectedDatasetType","setSelectedDatasetType","fetchThisDataset","NYUpurpleLight","setThisSensorToPreview","selectedVal","disablePortal","reverse","charAt","toLowerCase","previewingDatasetName","setPreviewingDatasetName","csvFileName","setCsvFileName","isDatasetLoading","setIsDatasetLoading","convertCSVforDownload","dataset","blob","Blob","URL","createObjectURL","downloadLink","createElement","download","appendChild","click","revokeObjectURL","removeChild","formattedData","setFormattedData","rowNumber","setRowNumber","_sensorsDatasets$prev","_sensorsDatasets$prev2","csvData","lines","headers","rows","dateString","row","fontFamily","gutterBottom","pt","userSelect","optionalText","downloadPreviewingDataset","fetchedDataset","rawDatasetDownloaded","dataset_type","DownloadIcon","ScreenDropDownMenu","schoolMetadata","screens","TvIcon","screen","MenuItemAsNavLink","behavior","NavLinkBehavior","toNewPage","screen_name","SchoolSelector","user","UserContext","isArray","allowedSchools","CustomChip","icon","PlaceIcon","name","tooltipTitle","setSchoolID","navigate","useNavigate","handleItemSelect","localStorage","setItem","LocalStorage","internalNavigation","origin_school","destination_school_id","origin_id","UniqueRoutes","dashboard","ArrowDropUpIcon","clickable","MenuList","dense","school","LoadMoreChartsButton","setLoadMoreCharts","KeyboardArrowDownIcon","otherProps","Project","lastUpdate","setChartsTitlesList","LinkContext","commentCounts","fetchCommentCounts","setCommentCounts","CommentCountsContext","allChartsData","loadMoreCharts","temperatureUnitPreference","displayCommentSection","setDisplayCommentSection","displayMapOfSensors","setDisplayMapOfSensors","isNYUAD","charts","chartsTitles","displayLoadMoreButton","isLastChartInList","GridOfMetadataChips","pb","PersonIcon","contactPerson","EmailIcon","contactEmail","BarChartIcon","_jsonData$chartData","scrollToSection","jsonData","destination_id","destination_label","CommentIcon","PAGE_NAME","FullWidthBox","Container","UppercaseTitle","getDashboardTitle","NYUADbanner","initialNyuadCurrentData","isOnBannerPage","minMapHeight","CurrentAQIGrid","currentSensorsData","isScreen","ThemePreferences","dark","ChartComponentWrapper","subtitle","Divider","CommentSection","pageID","school_id_param","useParams","locationPath","useLocation","pathname","setCurrentPage","setCurrentSchoolID","setSchoolMetadata","setCurrent","fetchInitialDataForDashboard","checkedAuthentication","authenticated","login","redirectQuery","previouslySelectedSchoolID","getItem","response","Promise","all","getApiUrl","GeneralEndpoints","schoolmetadata","fetchAndProcessCurrentSensorsData","chartIndexInPage"],"sourceRoot":""}