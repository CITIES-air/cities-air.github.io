(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[125],{8124:function(e,t,n){"use strict";var o=n(1413),i=n(9439),r=n(5953),a=n(6015),l=n(4565),s=n(4162),c=n(1441),u=n(9530),d=n(3085),h=n(9388),p=n(4011),m=n(5445),v=n(3511),x=n(4809),f=n(184),g=function(e){var t,n,o,i,r,a=e.sensorData,s=e.isScreen;return s&&a.current.sensor_status===p.vI.active?null:(0,f.jsxs)(l.Z,{variant:s?"h6":"caption",sx:{mt:0,fontWeight:s&&"500 !important"},children:[(null===(t=a.current)||void 0===t?void 0:t.sensor_status)!==p.vI.active&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.Z,{sx:{"& *":{color:"".concat(v.Z[3].lightThemeColor," !important")},mr:.5}}),"Offline.\xa0"]}),"Last update:",null!==(n=a.current)&&void 0!==n&&n.timestamp||null!==(o=a.sensor)&&void 0!==o&&o.last_seen?" ".concat((0,p.Zj)((null===(i=a.current)||void 0===i?void 0:i.timestamp)||(null===(r=a.sensor)||void 0===r?void 0:r.last_seen))," ago"):"--"]})};t.Z=function(e){var t=e.currentSensorsData,n=e.temperatureUnitPreference,h=e.isScreen,v=void 0===h||h;return(0,f.jsx)(r.ZP,{container:!0,justifyContent:"center",sx:{"& .MuiSvgIcon-root":{verticalAlign:"sub",fontSize:v?null:"1rem"},"& *":{fontWeight:"500"},"& .condensedFont":{fontFamily:"IBM Plex Sans Condensed, sans-serif !important","& *":{fontFamily:"IBM Plex Sans Condensed, sans-serif !important"}}},children:t?Object.entries(t).map((function(e,s){var c,h,Z,b,y,j,S,w,C,A,T,k,I,P,z=(0,i.Z)(e,2),D=z[0],E=z[1];return(0,f.jsxs)(r.ZP,(0,o.Z)((0,o.Z)({item:!0},(P=Object.keys(t).length,{xs:Math.max(12/P,6),sm:Math.max(12/P,4),lg:v?12/P:Math.min(5,Math.max(12/P,2))})),{},{sx:(null===(c=E.current)||void 0===c?void 0:c.sensor_status)!==p.vI.active&&{"& *":{color:"".concat(x.Z.universal.palette.inactiveSensor)}},children:[(0,f.jsxs)(a.Z,{sx:{"& *":{color:null===(h=E.current)||void 0===h?void 0:h.color}},children:[(0,f.jsx)(l.Z,{variant:v?"h4":"h5",fontWeight:"500",className:"condensedFont",children:(null===(Z=E.sensor)||void 0===Z?void 0:Z.location_long)||(null===(b=E.sensor)||void 0===b?void 0:b.location_short)||"No Location Name"}),(0,f.jsx)(l.Z,{variant:v?"h1":"h2",fontWeight:"500",lineHeight:v?.8:.9,children:(null===(y=E.current)||void 0===y?void 0:y.aqi)||"--"}),(0,f.jsx)(l.Z,{variant:v?"h4":"h5",fontWeight:"500",className:"condensedFont",children:(null===(j=E.current)||void 0===j?void 0:j.category)||"--"})]}),(0,f.jsxs)(a.Z,{sx:{"& *":{color:v?(null===(S=E.current)||void 0===S?void 0:S.sensor_status)===p.vI.active?"#c8dcff":x.Z.universal.palette.inactiveSensor:"text.secondary"},mt:v?2:1},className:"condensedFont",children:[(0,f.jsxs)(l.Z,{variant:v?"h6":"body1",children:[(0,f.jsx)(u.Z,{}),(0,m.Lo)({rawTemp:null===(w=E.current)||void 0===w?void 0:w.temperature,currentUnit:m.fG.celsius,returnUnit:n}),"\xa0\xa0-\xa0",(0,f.jsx)(d.Z,{sx:{transform:"scaleX(0.9)"}}),null!==(C=E.current)&&void 0!==C&&C.rel_humidity?Math.round(null===(A=E.current)||void 0===A?void 0:A.rel_humidity):"--","%"]}),["outdoors","indoors_gym"].includes(null===(T=E.sensor)||void 0===T?void 0:T.location_type)&&(0,f.jsx)(l.Z,{variant:v?"body1":"body2",sx:{fontWeight:"300 !important"},children:(0,m.qu)({rawTemp:null===(k=E.current)||void 0===k?void 0:k.temperature,currentUnit:m.fG.celsius,rel_humidity:null===(I=E.current)||void 0===I?void 0:I.rel_humidity,returnUnit:n})}),g({sensorData:E,isScreen:v})]}),E.sensor_status!==p.vI.active&&(0,f.jsx)(l.Z,{variant:v?"h6":"body1",className:"condensedFont",children:(0,p.Tm)(E)})]}),D)})):(0,f.jsxs)(s.Z,{direction:"column",alignItems:"center",justifyContent:"center",children:[(0,f.jsx)(c.Z,{variant:"text",sx:{width:"15rem",fontSize:"2rem"}}),(0,f.jsx)(c.Z,{variant:"text",sx:{width:"5rem",fontSize:"4rem",my:-1.5}}),(0,f.jsx)(c.Z,{variant:"text",sx:{width:"10rem",fontSize:"2rem"}}),(0,f.jsx)(c.Z,{variant:"text",sx:{width:"7.5rem",fontSize:"1rem"}}),(0,f.jsx)(c.Z,{variant:"text",sx:{width:"7.5rem",fontSize:"1rem"}})]})})}},9114:function(e,t,n){"use strict";n.d(t,{Z:function(){return J}});var o=n(9439),i=n(4942),r=n(1413),a=n(2791),l=n(277),s=n(6015),c=n(4293),u=n(2797),d=n(166),h=n(4565),p=n(7762),m=n(6084),v=n(4162),x=n(4142),f=n(1898),g=n(3057),Z=n(324),b=n(5473),y=n(9627),j=n(8956),S=n(5953),w=n(5209),C=n(3746),A=n(184),T="Display All Series";function k(e){var t,n=e.items,l=e.selectorID,s=e.allowMultiple,c=e.onSeriesSelection,u=(0,x.Z)(),d={PaperProps:{style:{maxHeight:274.4,overflow:"visible !important",background:u.palette.customAlternateBackground}},anchorOrigin:{vertical:-6,horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},p=(0,a.useState)(n),m=(0,o.Z)(p,2),k=m[0],I=m[1],P=(0,a.useState)(s),z=(0,o.Z)(P,2),D=z[0],E=z[1];(0,a.useEffect)((function(){I(n)}),[n]),(0,a.useEffect)((function(){E(k.every((function(e){return e.selected})))}),[k]);var M=function(e){var t=e.target.value;if(t.includes(T)){var n=k.map((function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{selected:0==t||!D})}));c(n),E(!D)}else{var o=k.filter((function(e){return t.includes(e.label)})),i=k.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{selected:o.some((function(t){return t.label===e.label}))})}));c(i),E(!1)}},_=function(e){var t=k.map((function(t){return t.label===e.label?(0,r.Z)((0,r.Z)({},t),{},{selected:!t.selected}):t}));c(t)};return(0,A.jsxs)(v.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,A.jsx)(f.Z,{sx:(t={},(0,i.Z)(t,u.breakpoints.down("sm"),{width:"100%"}),(0,i.Z)(t,"minWidth","200px"),(0,i.Z)(t,"& .MuiInputBase-root",{mt:1,borderRadius:u.spacing(1)}),t),size:"small",children:(0,A.jsxs)(g.Z,{labelId:"".concat(l,"-label"),id:l,multiple:s,value:k.filter((function(e){return e.selected})).map((function(e){return e.label})),onChange:M,MenuProps:d,renderValue:function(e){return function(e){return(0,A.jsxs)(v.Z,{direction:"row",alignItems:"center",spacing:.5,children:[(0,A.jsx)(C.Z,{fontSize:"1.5rem",sx:{color:u.palette.text.secondary}}),(0,A.jsx)(h.Z,{variant:"caption",color:"text.secondary",children:s?"".concat(e.length," series displayed").concat(D?" (all)":""):e})]})}(e)},sx:{fontSize:"0.75em"},children:[k.map((function(e){return(0,A.jsxs)(Z.Z,{disabled:!(1!==k.filter((function(e){return e.selected})).length||!e.selected),value:e.label,sx:{backgroundColor:"unset !important","&:hover":{backgroundColor:"inherit !important"}},children:[s?(0,A.jsx)(b.Z,{checked:e.selected,onClick:function(){return _(e)},sx:{p:.25,transform:"scale(0.8)"}}):(0,A.jsx)(y.Z,{checked:e.selected,onChange:function(){return M(e)},sx:{p:.25,transform:"scale(0.8)"}}),(0,A.jsx)(h.Z,{variant:"caption",children:e.label})]},e.label)})),s&&(0,A.jsx)(Z.Z,{value:T,sx:{borderTop:"solid 0.5px",borderColor:u.palette.text.secondary,position:"sticky",bottom:0,zIndex:99999,marginBottom:u.spacing(-1),background:u.palette.customAlternateBackground,"&:hover":{background:u.palette.customAlternateBackground}},children:(0,A.jsxs)(v.Z,{direction:"row",width:"100%",alignItems:"center",justifyContent:"space-between",children:[(0,A.jsx)(h.Z,{fontWeight:500,variant:"caption",sx:{pl:1},children:T}),(0,A.jsx)(j.Z,{checked:D,onClick:function(){return _(T)},sx:{transform:"scale(0.8)"}})]})},T)]})}),s&&(0,A.jsx)(S.ZP,{container:!0,spacing:1,sx:(0,i.Z)({},u.breakpoints.down("sm"),{display:"none"}),children:k.filter((function(e){return e.selected})).map((function(e){return(0,A.jsx)(S.ZP,{item:!0,children:(0,A.jsx)(w.Z,(0,r.Z)({label:(0,A.jsx)(h.Z,{variant:"caption",children:e.label}),size:"small"},1!==k.filter((function(e){return e.selected})).length&&{onDelete:function(){return _(e)}}))},e.label)}))})]})}var I=n(3433),P={CategoryFilter:{position:"top",stackDirection:"column"},DateRangeFilter:{position:"bottom",stackDirection:"column-reverse"},ChartRangeFilter:{position:"bottom",stackDirection:"column-reverse"},NumberRangeFilter:{position:"top",stackDirection:"column"}},z=function(e){return{min:e.reduce((function(e,t){return t<e?t:e})),max:e.reduce((function(e,t){return t>e?t:e}))}},D=function(e){return{min:Math.min.apply(Math,(0,I.Z)(e)),max:Math.max.apply(Math,(0,I.Z)(e))}},E={stem:{length:0},textStyle:{opacity:0},boxStyle:null},M=function(e){var t=e.isPortrait;return e.isSmaller?t?6:8:t?8:10},_=function(e){var t,n,o,i,a,l,s,c,u,d=e.chartControl,h=e.mainChartData,p=e.mainChartOptions,m=e.subchartIndex,v=e.theme,x=e.isPortrait,f=(0,r.Z)((0,r.Z)({},null===(t=d.options)||void 0===t?void 0:t.ui),{},{snapToData:!0});"ChartRangeFilter"===d.controlType&&(f=(0,r.Z)((0,r.Z)({},f),{},{chartType:h.chartType,chartView:{columns:h.columns||h.subcharts&&h.subcharts[m].columns||null},chartOptions:(0,r.Z)((0,r.Z)((0,r.Z)({},p),null===(n=d.options)||void 0===n||null===(o=n.ui)||void 0===o?void 0:o.chartOptions),{},{hAxis:(0,r.Z)((0,r.Z)({},null===(i=d.options)||void 0===i||null===(a=i.ui)||void 0===a||null===(l=a.chartOptions)||void 0===l?void 0:l.hAxis),{},{textPosition:"out",textStyle:{color:v.palette.chart.axisText,fontSize:M({isPortrait:x,isSmaller:!0})}}),vAxis:(0,r.Z)((0,r.Z)({},null===(s=d.options)||void 0===s||null===(c=s.ui)||void 0===c||null===(u=c.chartOptions)||void 0===u?void 0:u.vAxis),{},{title:null}),annotations:E,legend:null})}));return f},F=function(e){var t=e.cellSizeMin,n=e.cellSizeMax,o=Math.min(Math.max(.9*window.innerWidth/58,t),n);return{chartWidth:56*o,cellSize:o,yearLabelFontSize:2*o}},W=(0,l.ZP)(s.Z)((function(e){var t=e.theme,n=e.isPortrait;return{"& .google-visualization-tooltip, .nivo-tooltip":{width:"unset !important",maxWidth:"350px",height:"unset",padding:"1em",boxShadow:"0px 2px 2px 0px rgba(204, 204, 204, 0.6)",mozBoxShadow:"0px 2px 2px 0px rgba(204, 204, 204, 0.6)",webkitBoxShadow:"0px 2px 2px 0px rgba(204, 204, 204, 0.6)",border:"solid 1px",borderColor:t.palette.text.secondaryRGB,fontSize:"".concat(n?9:12,"px"),color:t.palette.chart.tooltip.text,background:t.palette.chart.tooltip.background,borderRadius:t.spacing(.5),"& ul":{margin:"0 !important","& li":{margin:"0 !important",padding:"0 !important","& span":{fontSize:"".concat(n?9:12,"px !important"),color:"".concat(t.palette.chart.tooltip.text," !important")}}}},"& .goog-menuitem-highlight, .goog-menuitem-hover":{backgroundColor:"".concat(t.palette.primary," !important")},"& .google-visualization-controls-categoryfilter":{fontSize:"0.85rem",marginTop:"0.75rem",marginBottom:"-0.75rem","& .goog-inline-block > .goog-menu-button":{marginTop:0},"& .goog-menu-button-hover .goog-menu-button-outer-box, .goog-menu-button-hover .goog-menu-button-inner-box":{borderColor:"inherit !important"},"& .google-visualization-controls-label":{color:t.palette.text.secondary,fontWeight:500,verticalAlign:"middle",marginBottom:"0.25rem"},"& .goog-menu-button-outer-box":{backgroundColor:t.palette.background.paper,border:"unset","& .goog-menu-button-inner-box":{paddingTop:t.spacing(.5),paddingBottom:t.spacing(.5),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),border:"solid",borderWidth:"0.5px",borderRadius:t.spacing(.5),borderColor:t.palette.text.secondary,"& .goog-menu-button-caption":{color:t.palette.text.secondary}}}},"& .google-visualization-controls-rangefilter":{width:"100%",fontSize:"0.75rem","& .goog-inline-block":{width:"100%"},"& .google-visualization-controls-slider-horizontal":{width:"90%",margin:"0 5%"},"& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(1)":{position:"absolute",top:"1.5em",left:"5%"},"& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(2)":{position:"absolute",top:"1.5em",right:"5%"},"& .google-visualization-controls-slider-handle":{background:t.palette.primary.main},"& .google-visualization-controls-rangefilter-thumblabel":{color:t.palette.text.secondary,padding:0,fontWeight:500},"& .google-visualization-controls-slider-thumb":{background:t.palette.primary.main,border:"unset",borderRadius:"4px"}},'& path[stroke-opacity="0.3"], path[stroke-opacity="0.1"], path[stroke-opacity="0.05"], rect[stroke-opacity]':{stroke:t.palette.text.primary,strokeWidth:3},"& [column-id]:not(:empty)":{cursor:"pointer",":hover":{fontWeight:600}}}})),R=n(6694),O=n(5276),N=n(6961),Q=n(3540),L=n(7138),U=function(e){return e?{top:20,right:0,bottom:0,left:20}:{top:30,right:40,bottom:0,left:40}},H=function(e){var t,n,o,i,r,a,l,s=e.data,c=e.dateRange,u=e.valueRange,d=e.isPortrait,h=e.options,p=U(d),m=(0,x.Z)(),v=function(e,t){var n=new Date(e),o=n.getDay(),i=0===o||1===o,r=new Date(t.min).getFullYear(),a=n.getFullYear()===r;return i&&a},f=null!==h&&void 0!==h&&null!==(t=h.colorAxis)&&void 0!==t&&t.isGradient?V(null===h||void 0===h||null===(n=h.colorAxis)||void 0===n?void 0:n.colors[0],null===h||void 0===h||null===(o=h.colorAxis)||void 0===o?void 0:o.colors[1],100):null===h||void 0===h||null===(i=h.colorAxis)||void 0===i?void 0:i.colors;return(0,A.jsxs)(A.Fragment,{children:["none"!==(null===h||void 0===h||null===(r=h.legend)||void 0===r?void 0:r.position)&&function(){var e;return(0,A.jsx)(q,{valueRange:u,colors:null===h||void 0===h||null===(e=h.colorAxis)||void 0===e?void 0:e.colors,isPortrait:d})}(),(0,A.jsx)(N.DQ,{data:s,from:null===c||void 0===c?void 0:c.min,to:null===c||void 0===c?void 0:c.max,emptyColor:"transparent",theme:{text:{fill:m.palette.text.secondary},tooltip:{container:{background:"dark"===m.palette.mode?"#2b2b2b":"#fff",color:m.palette.text.primary}},axis:{ticks:{line:{stroke:"dark"===m.palette.mode?"#2b2b2b":"#fff"},text:{fill:m.palette.text.primary}}},grid:{line:{stroke:"dark"===m.palette.mode?"#2b2b2b":"#fff"}}},colors:f,minValue:null===h||void 0===h||null===(a=h.colorAxis)||void 0===a?void 0:a.minValue,maxValue:null===h||void 0===h||null===(l=h.colorAxis)||void 0===l?void 0:l.maxValue,margin:p,yearSpacing:40,monthBorderColor:m.palette.text.primary,monthBorderWidth:1,daySpacing:.25,dayBorderWidth:0,tooltip:function(e){var t=e.day,n=(e.value,e.color),o=s.find((function(e){return e.day===t})),i=o?function(e){return(new DOMParser).parseFromString(e,"text/html").body.innerHTML}(o.tooltip):"";return(0,A.jsx)(B,{day:t,color:n,tooltipText:i,dateRange:c,inFirstTwoRowsOfChart:v})}})]})},B=function(e){var t=e.day,n=e.color,o=e.tooltipText,i=e.dateRange,r=e.inFirstTwoRowsOfChart,l=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(l.current&&r(t,i)){var e=l.current.parentElement;e&&(e.style.top="11vh")}}),[l,r]),(0,A.jsxs)(s.Z,{ref:l,className:"nivo-tooltip",children:[(0,A.jsx)(w.Z,{sx:{backgroundColor:n,mr:.5,height:"10px",width:"10px",borderRadius:"50%"}}),(0,Q.ZP)(o,{replace:L.T})]})},q=function(e){var t=e.valueRange,n=e.colors,o=e.isPortrait;if(null===(null===t||void 0===t?void 0:t.min)||null===(null===t||void 0===t?void 0:t.max))return null;var i=(0,x.Z)(),r=n.map((function(e,t,n){var o=t/(n.length-1)*100;return"".concat(e," ").concat(o,"%")})).join(", "),a={position:"sticky",width:"fit-content",marginTop:"1rem",left:o?"58%":"74%"},l={background:"linear-gradient(to right, ".concat(r,")"),color:i.palette.text.primary,border:"1px solid ".concat(i.palette.text.primary),minWidth:"150px",height:"1.1rem",maxHeight:"1.25rem",display:"flex",justifyContent:"space-between"},c={position:"relative",top:"-1.15rem",fontSize:"0.8rem"};return(0,A.jsx)(s.Z,{style:a,children:(0,A.jsxs)(s.Z,{style:l,children:[(0,A.jsx)("span",{style:c,children:t.min}),(0,A.jsx)("span",{style:c,children:t.max})]})})},V=function(e,t,n){function o(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,o){return t+t+n+n+o+o}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[null,null,null]}function i(e,t,n){return"#"+[e,t,n].map((function(e){var t=e.toString(16);return 1===t.length?"0"+t:t})).join("")}function r(e,t,n){for(var o=e.slice(),i=0;i<3;i++)o[i]=Math.round(o[i]+n*(t[i]-e[i]));return o}for(var a=o(e),l=o(t),s=[],c=0;c<n;c++){var u=r(a,l,c/(n-1));s.push(i.apply(void 0,(0,I.Z)(u)))}return s};function G(e){var t,n,i=e.chartData,l=e.subchartIndex,c=e.windowSize,u=e.isPortrait,d=e.isHomepage,h=e.height,f=e.maxHeight,g=null===(t=i.subcharts)||void 0===t?void 0:t[l].chartSubstituteComponentName;if(g)return(0,A.jsx)(O.default,{chartSubstituteComponentName:g});var Z=i.customClassName?"".concat(i.chartType," ").concat(i.customClassName):i.chartType,b=(0,a.useContext)(m.R),y=(0,o.Z)(b,2),j=y[0],S=(y[1],(0,a.useState)()),w=(0,o.Z)(S,2),C=(w[0],w[1]),T=(0,a.useState)(),I=(0,o.Z)(T,2),N=I[0],Q=I[1],L=(0,a.useState)(),B=(0,o.Z)(L,2),q=(B[0],B[1]),V=(0,a.useState)(),G=(0,o.Z)(V,2),Y=G[0],X=G[1],$=(0,x.Z)(),K=(0,a.useState)(!0),J=(0,o.Z)(K,2),ee=J[0],te=J[1],ne=(0,a.useState)(),oe=(0,o.Z)(ne,2),ie=oe[0],re=oe[1],ae=(0,a.useState)(),le=(0,o.Z)(ae,2),se=le[0],ce=le[1],ue=(0,a.useState)(),de=(0,o.Z)(ue,2),he=(de[0],de[1]),pe=(0,a.useState)(Math.random().toString(36).substr(2,9)),me=(0,o.Z)(pe,2),ve=me[0],xe=(me[1],(0,a.useState)(200)),fe=(0,o.Z)(xe,2),ge=fe[0],Ze=(fe[1],(0,a.useMemo)((function(){var t=function(e){var t,n,o,i,a,l,s,c,u,d,h,p,m,v,x,f,g,Z,b,y,j,S,w,C,A,T,k,I,P,z,D,_,F,W,R,O,N,Q,L,U,H,B=e.chartData,q=e.subchartIndex,V=e.isPortrait,G=e.isHomepage,Y=e.theme,X={italic:!1,bold:!0,color:Y.palette.chart.axisTitle,fontSize:M({isPortrait:V})},$={color:Y.palette.chart.axisText,fontSize:M({isPortrait:V})},K=null!==(t=B.subcharts)&&void 0!==t&&t[q].options?(0,r.Z)({},B.subcharts[q].options):{};if((K=(0,r.Z)((0,r.Z)((0,r.Z)({},K),B.options),{},{theme:"material",curveType:K.curveType||(null===(n=B.options)||void 0===n?void 0:n.curveType)||"function",crosshair:{orientation:"both",trigger:"focus",opacity:.5},backgroundColor:{fill:"transparent"},chartArea:(0,r.Z)((0,r.Z)({},null===(o=B.options)||void 0===o?void 0:o.chartArea),{},{width:V?(null===(i=B.options)||void 0===i||null===(a=i.chartArea)||void 0===a||null===(l=a.width)||void 0===l?void 0:l.portrait)||"80%":(null===(s=B.options)||void 0===s||null===(c=s.chartArea)||void 0===c||null===(u=c.width)||void 0===u?void 0:u.landscape)||"75%",height:V?(null===(d=B.options)||void 0===d||null===(h=d.chartArea)||void 0===h||null===(p=h.height)||void 0===p?void 0:p.portrait)||"60%":(null===(m=B.options)||void 0===m||null===(v=m.chartArea)||void 0===v||null===(x=v.height)||void 0===x?void 0:x.landscape)||"70%"}),width:V?(null===(f=B.options)||void 0===f||null===(g=f.width)||void 0===g?void 0:g.portrait)||"100%":(null===(Z=B.options)||void 0===Z||null===(b=Z.width)||void 0===b?void 0:b.landscape)||"100%",height:B.height||"100%",tooltip:{isHtml:!0,showColorCode:!1},legend:{alignment:V?"center":"start",position:null!==(y=null===(j=B.options)||void 0===j||null===(S=j.legend)||void 0===S?void 0:S.position)&&void 0!==y?y:V?"top":"right",scrollArrows:{activeColor:Y.palette.chart.axisTitle,inactiveColor:Y.palette.text.secondary},pagingTextStyle:{fontSize:10,color:Y.palette.chart.axisTitle,bold:!0}}})).vAxis=(0,r.Z)((0,r.Z)({},K.vAxis),{},{format:null!==(w=null===(C=K.vAxis)||void 0===C?void 0:C.format)&&void 0!==w?w:"decimal",title:null!==(A=null===(T=K.vAxis)||void 0===T?void 0:T.title)&&void 0!==A?A:"",viewWindow:{min:null!==(k=null===(I=K.vAxis)||void 0===I||null===(P=I.viewWindow)||void 0===P?void 0:P.min)&&void 0!==k?k:0}}),K.hAxis=(0,r.Z)((0,r.Z)({},K.hAxis),{},{title:null!==(z=null===(D=K.hAxis)||void 0===D?void 0:D.title)&&void 0!==z?z:""}),V&&(K.hAxis=(0,r.Z)((0,r.Z)({},K.hAxis),{},{slantedText:!0,slantedTextAngle:30})),"string"!==typeof K.colors&&K.colors||(K.colors=Y.palette.chart.optionsColors[K.colors||"multiColor"]),K.series&&Object.values(K.series).forEach((function(e){var t=e;"default"===t.color&&(t.color=Y.palette.primary.main)})),K.trendlines&&K.trendlines.forEach((function(e){e.color=Y.palette.primary.main})),K.colorAxis)switch(K.colorAxis.colors){case"matchingColor":K.colorAxis.colors=[Y.palette.chart.colorAxisFirstColor,Y.palette.chart.optionsColors.multiColor[K.colorAxis.colorIndex]];break;case"default":K.colorAxis.colors=[Y.palette.chart.colorAxisFirstColor,Y.palette.NYUpurple];break;case"aqi":K.colorAxis=Y.palette.chart.aqiColorAxis}return K.vAxis=(0,r.Z)((0,r.Z)({},K.vAxis),{},{titleTextStyle:X,textStyle:$,gridlines:(0,r.Z)((0,r.Z)({},null===(_=K.vAxis)||void 0===_?void 0:_.gridlines),{},{color:(null===(F=K.vAxis)||void 0===F||null===(W=F.gridlines)||void 0===W?void 0:W.color)||Y.palette.chart.gridlines}),minorGridlines:{count:0}}),K.hAxis=(0,r.Z)((0,r.Z)({},K.hAxis),{},{titleTextStyle:X,textStyle:$,gridlines:(0,r.Z)((0,r.Z)({},null===(R=K.hAxis)||void 0===R?void 0:R.gridlines),{},{color:(null===(O=K.hAxis)||void 0===O||null===(N=O.gridlines)||void 0===N?void 0:N.color)||Y.palette.chart.gridlines}),minorGridlines:(0,r.Z)((0,r.Z)({},null===(Q=K.hAxis)||void 0===Q?void 0:Q.minorGridlines),{},{color:(null===(L=K.hAxis)||void 0===L||null===(U=L.gridlines)||void 0===U?void 0:U.color)||Y.palette.chart.gridlines})}),K.legend=(0,r.Z)((0,r.Z)({},K.legend),{},{textStyle:$}),K.annotations=(0,r.Z)((0,r.Z)({},K.annotations),{},{highContrast:!0,textStyle:{color:Y.palette.primary.contrastText,fontSize:M({isPortrait:V,isSmaller:!0}),opacity:.8},stem:(0,r.Z)((0,r.Z)({},null===(H=K.annotations)||void 0===H?void 0:H.stem),{},{color:Y.palette.chart.axisTitle,thickness:2}),boxStyle:{rx:Y.shape.borderRadius,ry:Y.shape.borderRadius,fill:Y.palette.chart.annotationBoxFill,fillOpacity:.5}}),G&&(K=(0,r.Z)((0,r.Z)({},K),{},{chartArea:(0,r.Z)((0,r.Z)({},K.chartArea),{},{width:"80%",height:"80%"}),seriesSelector:!1,pointSize:0,enableInteractivity:!1,annotations:E,legend:"none",vAxis:(0,r.Z)((0,r.Z)({},K.vAxis),{},{textPosition:"none",titleTextStyle:(0,r.Z)((0,r.Z)({},K.vAxis.titleTextStyle),{},{bold:!1}),gridlines:{color:"transparent",count:0},viewWindowMode:"maximized"}),hAxis:(0,r.Z)((0,r.Z)({},K.hAxis),{},{textPosition:"none",gridlines:{color:"transparent",count:0},titleTextStyle:(0,r.Z)((0,r.Z)({},K.hAxis.titleTextStyle),{},{bold:!1})})})),K}((0,r.Z)((0,r.Z)({},e),{},{theme:$}));return"Calendar"===i.chartType&&(t=function(e){var t=F({cellSizeMin:14,cellSizeMax:18});return(0,r.Z)((0,r.Z)({},e),{},{width:t.chartWidth,calendar:{cellSize:t.cellSize,yearLabel:{fontSize:t.yearLabelFontSize}},noDataPattern:{backgroundColor:"none",color:"none"}})}(t)),t}),[e,$,i.chartType])),be=(0,a.useState)(null),ye=(0,o.Z)(be,2),je=ye[0],Se=ye[1],we=(0,a.useState)(200),Ce=(0,o.Z)(we,2),Ae=Ce[0],Te=Ce[1],ke=(0,a.useState)(1200),Ie=(0,o.Z)(ke,2),Pe=Ie[0];Ie[1];if("Calendar"===i.chartType)return(0,a.useEffect)((function(){var e=i.dataArray||i.subcharts&&i.subcharts[l].dataArray||null;if(e){var t=e.map((function(e){return e.day})),n=e.map((function(e){return e.value})),o=z(t);Se({data:e,dateRange:o,valueRange:D(n)});var r,a=new Date(o.min).getFullYear(),s=new Date(o.max).getFullYear()-a+1,c=7*Math.min(Pe/60,20),d=U(u);r=1==s?c+40+d.top+d.bottom:s*(c+40)+d.top+d.bottom,Te(r)}}),[i]),(0,A.jsx)(W,{isPortrait:u,className:Z,position:"relative",minWidth:"700px",minHeight:u?"200px":Ae+"px",height:Ae+"px",maxHeight:u&&"400px",children:je?(0,A.jsx)(H,{data:je.data,dateRange:je.dateRange,valueRange:je.valueRange,isPortrait:u,options:Ze}):(0,A.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,A.jsx)(R.Z,{})})});var ze,De=!1,Ee=i.control||(null===(n=i.subcharts)||void 0===n?void 0:n[l].control);Ee&&!0!==d&&(De=!0,ze=(0,r.Z)((0,r.Z)({},Ee.options),{},{ui:_({chartControl:Ee,mainChartData:i,mainChartOptions:Ze,subchartIndex:l,theme:$,isPortrait:u})}),"ChartRangeFilter"===Ee.controlType&&(0,a.useEffect)((function(){var e=function(e){var t=e.controlWrapper,n=e.chartID,o=function(e){var t=e.changedTouches[0],n="";switch(e.type){case"touchstart":n="mousedown";break;case"touchmove":n="mousemove";break;case"touchend":n="mouseup";break;default:return}var o=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,detail:1,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,button:0,relatedTarget:null});t.target.dispatchEvent(o),e.preventDefault()};if(t){var i=document.querySelector("#control-".concat(n));if(i)return["touchstart","touchmove","touchend","touchcancel"].forEach((function(e){i.addEventListener(e,o,{capture:!0})})),function(){["touchstart","touchmove","touchend","touchcancel"].forEach((function(e){i.removeEventListener(e,o,{capture:!0})}))}}}({controlWrapper:Y,chartID:ve});return e}),[Y]));var Me=Ze.seriesSelector||!1;(0,a.useEffect)((function(){Me?We(se):(null===N||void 0===N||N.setOptions((0,r.Z)((0,r.Z)({},Ze),"Calendar"===i.chartType&&{height:ge})),null===N||void 0===N||N.draw(),De&&(null===Y||void 0===Y||Y.setOptions(ze),null===Y||void 0===Y||Y.draw()))}),[$,u,c,ge]),(0,a.useEffect)((function(){se&&Me&&"setViewColumn"==Me.method&&(_e({dataColumns:se}),We(se))}),[$]);var _e=function(e){e.dataColumns.forEach((function(e){var t;e.color=Ze.colors[e.seriesIndex%Ze.colors.length],e.serieAttribute=null===(t=Ze.series)||void 0===t?void 0:t[e.seriesIndex]}))},Fe=function(e){var t,n,o=e.dataTable;return e.allInitialColumns.forEach((function(e,i){if(0!==i){var r=o.getColumnRange(e.sourceColumn);!isNaN(r.min)&&r.min&&(t=t?Math.min(t,r.min):r.min),!isNaN(r.max)&&r.max&&(n=n?Math.max(n,r.max):r.max)}})),{min:t,max:n}},We=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N;if(ie){if(ce(e),"toggleVisibility"===Me.method||null===Me.method){var n={};e.forEach((function(e){e.selected||(n[e.seriesIndex]={color:"transparent",enableInteractivity:!1,visibleInLegend:!1})})),null===t||void 0===t||t.setOptions((0,r.Z)((0,r.Z)({},Ze),{},{series:(0,r.Z)((0,r.Z)({},Ze.series),n)}))}else if("setViewColumn"===Me.method){var o=[];o.push(0),e.forEach((function(e){if(e.selected){o.push(e);for(var t=e.indexInAllInitialColumns+1;t<ie.length&&"data"!==ie[t].role;t++)o.push(ie[t])}})),null===t||void 0===t||t.setView({columns:o});var i=(0,r.Z)({},Ze);i.colors=e.filter((function(e){return e.selected})).map((function(e){return e.color}));var a={},l=0;e.forEach((function(e){e.selected&&(null!=e.serieAttribute&&(a[l]=e.serieAttribute),l++)})),i.series=a,null===t||void 0===t||t.setOptions(i)}null===t||void 0===t||t.draw(),De&&(null===Y||void 0===Y||Y.draw())}};(0,a.useEffect)((function(){if(j&&i){if("Calendar"===i.chartType)return;var e=i.dataArray||i.subcharts&&i.subcharts[l].dataArray||null;if(!e)return;var t=j.visualization.arrayToDataTable(e);C(t);var n=function(e){if(e){var t,n=[],o=(0,p.Z)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;if("number"===typeof i)n.push(i);else if("object"===typeof i)if(i.calc&&"stringify"!==i.calc){var a=new Function("dataTable","rowNum",i.calc);n.push((0,r.Z)((0,r.Z)({},i),{},{calc:a}))}else n.push(i)}}catch(l){o.e(l)}finally{o.f()}return n}}(i.columns||i.subcharts&&i.subcharts[l].columns||null),o=new j.visualization.ChartWrapper({chartType:i.chartType,dataTable:De?void 0:t,options:Ze,view:{columns:n},containerId:ve});if(Q(o),De){var a=new j.visualization.Dashboard(document.getElementById("dashboard-".concat(ve)));q(a),j.visualization.events.addListener(a,"ready",Re);var s=new j.visualization.ControlWrapper({controlType:Ee.controlType,options:ze,containerId:"control-".concat(ve)});X(s),a.bind(s,o),a.draw(t)}else j.visualization.events.addListener(o,"ready",Re),o.draw();if(Me){var c=function(e){var t=e.chartWrapper,n=e.dataTable,o=e.seriesSelector,i=t.getView();if(null==i.columns){var r=new j.visualization.DataView(n);t.setView({columns:r.columns}),i=t.getView()}var a=!0,l=0,s=i.columns.map((function(e,t){return"number"===typeof e&&(e={role:a?"domain":"data",sourceColumn:e}),e.label=n.getColumnLabel(e.sourceColumn),e.indexInAllInitialColumns=t,a=a&&!1,"data"===e.role&&(null!==o&&void 0!==o&&o.allowMultiple?e.selected=!0:e.selected=0===l,e.seriesIndex=l,l++),e}));re(s);var c=Fe({dataTable:n,allInitialColumns:s});he(c);var u=s.filter((function(e){var t,n;return"data"===e.role&&!1!==(null===(t=Ze.series)||void 0===t||null===(n=t[e.seriesIndex])||void 0===n?void 0:n.visibleInLegend)}));return"setViewColumn"===o.method&&_e({dataColumns:u}),ce(u),u}({chartWrapper:o,dataTable:t,seriesSelector:Me});We(c,o)}}}),[j,i]);var Re=function(){ee&&te(!1)};return(0,A.jsxs)(W,{isPortrait:u,className:Z,position:"relative",height:"100%",minHeight:"Calendar"===i.chartType&&"200px",children:[ee&&(0,A.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,A.jsx)(R.Z,{})}),Me&&!ee&&(0,A.jsx)(k,{items:se,allowMultiple:Me.allowMultiple,selectorID:"".concat(i.title,"-selector"),onSeriesSelection:We}),function(){var e;return De?(0,A.jsxs)(v.Z,{id:"dashboard-".concat(ve),direction:(null===(e=P[Ee.controlType])||void 0===e?void 0:e.stackDirection)||"column-reverse",sx:{height:"100%"},children:[(0,A.jsx)(s.Z,{id:"control-".concat(ve),sx:{height:"calc(".concat(h," / 8)"),opacity:.8,filter:"saturate(0.3)"}}),(0,A.jsx)(s.Z,{id:ve,sx:{height:h,maxHeight:f}})]}):(0,A.jsx)(s.Z,{id:ve,sx:{height:h,maxHeight:f}})}()]})}var Y=n(3767);var X=function(e){var t=e.text,n=e.wordLimit,i=void 0===n?50:n,r=e.reference,l=(0,a.useState)(!1),c=(0,o.Z)(l,2),d=c[0],p=c[1],m=(0,x.Z)(),v=(0,u.Z)(m.breakpoints.down("sm")),f=t.split(" ");if(!v||f.length<=i)return(0,A.jsxs)(A.Fragment,{children:[t&&(0,A.jsx)(h.Z,{children:(0,Q.ZP)(t,{replace:L.T})}),r&&(0,A.jsx)(h.Z,{variant:"caption",color:"text.secondary",children:(0,Q.ZP)(r,{replace:L.T})})]});var g=f.slice(0,i).join(" "),Z=g.lastIndexOf(".");return-1!==Z&&(g=g.slice(0,Z+1)),(0,A.jsx)(Y.Z,{onClickAway:function(){return p(!1)},children:(0,A.jsx)(s.Z,{onClick:function(){return p(!d)},style:{cursor:"pointer"},children:d?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(h.Z,{children:(0,Q.ZP)(t,{replace:L.T})}),r&&(0,A.jsx)(h.Z,{variant:"caption",color:"text.secondary",children:(0,Q.ZP)(r,{replace:L.T})})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(h.Z,{display:"inline",children:[(0,Q.ZP)(g,{replace:L.T}),"..."]}),(0,A.jsx)(h.Z,{display:"inline",color:"text.primary",fontWeight:"500",sx:{ml:.5,"& :hover":{textDecoration:"underline"}},children:"See more"})]})})})},$=(n(3092),(0,l.ZP)(s.Z)((function(e){var t=e.theme;return(0,r.Z)((0,r.Z)({},"dark"===t.palette.mode&&{filter:"saturate(0.85)","& .heat-map-iframe":{filter:"invert(0.848) hue-rotate(180deg)"}}),{},{'& .historical-snapshot-aqi svg [clip-path*="ABSTRACT_RENDERER"] > g:nth-of-type(1), .historical-snapshot-aqi [id*="googlechart-control"] svg [clip-path*="ABSTRACT_RENDERER"] > g:nth-of-type(2)':{opacity:.6},"& .Calendar [dir]:not(:empty)":{margin:"auto"},"& .Calendar > div > div:last-of-type > div":{overflowX:"auto",overflowY:"hidden",scrollbarGutter:"stable"}})}))),K=(0,l.ZP)(c.Z)((function(e){var t=e.theme;return{"& .MuiTabScrollButton-root":{color:t.palette.text.primary},"& .MuiTab-root":(0,i.Z)({},t.breakpoints.down("sm"),{fontSize:"0.75rem",paddingLeft:t.spacing(1),paddingRight:t.spacing(1)})}}));var J=function(e){var t,n=e.generalChartSubtitle,i=e.generalChartReference,r=e.chartData,l=e.chartHeight,c=e.isHomepage,p=(0,u.Z)((function(e){return e.breakpoints.down("sm")})),m=(0,a.useState)(window.matchMedia("(orientation: portrait)").matches),v=(0,o.Z)(m,2),x=v[0],f=v[1],g=(0,a.useState)([window.innerWidth,window.innerHeight]),Z=(0,o.Z)(g,2),b=Z[0],y=Z[1],j=l,S=r,w=(0,a.useState)(0),C=(0,o.Z)(w,2),T=C[0],k=C[1];(0,a.useEffect)((function(){k(0);var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){f(window.matchMedia("(orientation: portrait)").matches),y([window.innerWidth,window.innerHeight])}),100)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[S]),"Calendar"===S.chartType||j||(j=x?"80vw":"35vw",t=x?"800px":"500px");var I=function(e,t){k(t)};return(0,A.jsxs)($,{height:"100%",children:[S.subcharts?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(K,{value:T,onChange:I,variant:p?"fullWidth":"standard",children:S.subcharts.map((function(e,t){return(0,A.jsx)(d.Z,{value:t,label:S.subcharts[t].subchartTitle},t)}))}),(0,A.jsx)(s.Z,{position:"relative",sx:{overflowX:x&&"auto",WebkitOverflowScrolling:x&&"touch",overflowY:"hidden"},children:S.subcharts.map((function(e,n){return(0,A.jsx)(s.Z,{width:"100%",height:"100%",role:"tabpanel",sx:{transition:"0.35s",position:0===n?"":"absolute",opacity:T===n?"1":"0",pointerEvents:T===n?"auto":"none",top:0===n?"":0},children:(0,A.jsx)(G,{chartData:S,subchartIndex:n,isPortrait:x,isHomepage:c,windowSize:b,height:S.height?S.height:j,maxHeight:["Calendar"].includes(S.chartType)?"":t})},n)}))})]}):(0,A.jsx)(G,{chartData:S,isPortrait:x,isHomepage:c,windowSize:b,height:S.height?S.height:j}),(0,A.jsx)(s.Z,{sx:{my:3},children:(0,A.jsx)(h.Z,{component:"div",variant:"body1",color:"text.secondary",sx:{mb:1},children:(0,A.jsx)(X,{text:function(){var e,t=n||"";return S.subcharts&&null!==(e=S.subcharts[T])&&void 0!==e&&e.subchartSubtitle&&(t+="<br/>",t+=S.subcharts[T].subchartSubtitle),t}(),reference:function(){var e,t=i||"";return S.subcharts&&null!==(e=S.subcharts[T])&&void 0!==e&&e.reference&&(t+="<br/>",t+=S.subcharts[T].reference),t}()})})})]})}},8416:function(e,t,n){"use strict";n.r(t),n.d(t,{StyledTable:function(){return f}});var o=n(4942),i=n(277),r=n(1680),a=n(6015),l=n(9827),s=n(807),c=n(4390),u=n(9773),d=n(3540),h=n(7138),p=n(9114),m=n(3511),v=n(604),x=n(184),f=(0,i.ZP)(r.Z)((function(e){var t=e.theme,n=e.isTiny;return{minWidth:n||700,"& th, td":(0,o.Z)({fontSize:n?"0.625rem":"0.6875rem",color:t.palette.text.secondary},t.breakpoints.down("sm"),{fontSize:n?"0.5rem":"0.6875rem"}),"& th":{fontWeight:500,color:t.palette.text.primary,lineHeight:"1rem"}}}));t.default=function(e){var t=e.isTiny,n=e.hideAQIDescription,o=e.themePreference;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.Z,{overflow:"auto",children:(0,x.jsxs)(f,{size:"small",isTiny:t,children:[(0,x.jsx)(l.Z,{children:(0,x.jsxs)(s.Z,{children:[(0,x.jsx)(c.Z,{sx:{pr:0},children:(0,x.jsx)(a.Z,{sx:{width:"1em",height:"1em"}})}),(0,x.jsx)(c.Z,{sx:{pl:1},children:"Category"}),(0,x.jsx)(c.Z,{align:"right",children:"US AQI"}),(0,x.jsxs)(c.Z,{align:"right",children:["PM2.5 Concentration (\xb5g/m",(0,x.jsx)("sup",{children:"3"}),")"]}),!n&&(0,x.jsx)(c.Z,{align:"left",children:"Description"}),!n&&(0,x.jsx)(c.Z,{align:"left",children:"CITIESair' Suggested Actions"})]})}),(0,x.jsx)(u.Z,{children:m.Z.map((function(e,t){return(0,x.jsxs)(s.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,x.jsx)(c.Z,{sx:{pr:0},children:(0,x.jsx)(a.Z,{sx:{width:"1em",height:"1em",backgroundColor:o===v.Z.light?e.lightThemeColor:e.darkThemeColor}})}),(0,x.jsx)(c.Z,{sx:{pl:1},children:e.category}),(0,x.jsxs)(c.Z,{align:"right",children:[e.aqiUS.low,"\xa0 - \xa0",e.aqiUS.high]}),(0,x.jsxs)(c.Z,{align:"right",children:[e.rawPM2_5.low,"\xa0 - \xa0",e.rawPM2_5.high]}),!n&&(0,x.jsx)(c.Z,{align:"left",children:e.description}),!n&&(0,x.jsx)(c.Z,{align:"left",children:(0,d.ZP)(e.healthSuggestions.outdoors,{replace:h.T})})]},t)}))})]})}),function(e){var t=null;if(e.shouldRender){for(var n=[["category"],["US AQI"]],o=0;o<m.Z.length;o+=1)n[0].push(m.Z[o].category),n[1].push(50*Math.ceil((m.Z[o].aqiUS.high-m.Z[o].aqiUS.low)/50));t=(0,x.jsx)(p.Z,{chartHeight:"4rem",chartData:{dataArray:n,chartType:"BarChart",options:{enableInteractivity:!1,legend:{position:"none"},hAxis:{ticks:[0,50,100,150,200,300,500]},chartArea:{width:{portrait:"98%",landscape:"50%"},height:{portrait:"20%",landscape:"30%"}},isStacked:!0,colors:"aqi",bar:{groupWidth:"100%"}}}})}return t}({shouldRender:!n})]})}},5276:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var o=n(2791),i=n(6694),r=n(184);function a(e){var t=e.chartSubstituteComponentName;return(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)(i.Z,{}),children:function(){var e=(0,o.lazy)((function(){return n(6598)("./".concat(t))}));return(0,r.jsx)(e,{})}()})}},2125:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Se}});var o=n(1413),i=n(5861),r=n(9439),a=n(4687),l=n.n(a),s=n(2791),c=n(6871),u=n(8914),d=n(5987),h=n(5973),p=n(3540),m=n(9114),v=n(1745),x=n(472),f=n(5814),g=n(5209),Z=n(1441),b=n(5953),y=n(6015),j=n(803),S=n(4565),w=n(4162),C=n(1872),A=n(4142),T=n(604),k=n(173),I=n(5590),P=n(3245),z=n(7962),D=n(286),E=n(1162),M=n(8388),_=n(7438),F=n(8416),W=n(184);function R(e){var t=(0,s.useState)(null),n=(0,r.Z)(t,2),i=n[0],a=n[1],l=function(e){a(e.currentTarget),_.y(_.z.airQualityIndexLegendQuickGlance)},c=function(){a(null)},u=Boolean(i);return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(M.T,(0,o.Z)((0,o.Z)({},e),{},{distanceFromBottomOfWindow:"5.5rem",children:(0,W.jsx)(I.Z,{sx:{mt:1},"aria-owns":u?_.z.airQualityIndexLegendQuickGlance:void 0,"aria-haspopup":"true",onMouseEnter:l,onMouseLeave:c,onClick:function(e){return k.tq&&(u?c():l(e))},"aria-label":_.z.airQualityIndexLegendQuickGlance,color:"primary",children:(0,W.jsxs)(w.Z,{direction:"column",alignItems:"center",children:[(0,W.jsx)(E.Z,{fontSize:"1rem"}),(0,W.jsx)(S.Z,{variant:"body2",fontWeight:"500",children:"AQI"})]})})})),(0,W.jsx)(P.Z,{id:_.z.airQualityIndexLegendQuickGlance,sx:{pointerEvents:"none",mt:-1},open:u,anchorEl:i,placement:"top-end",onClose:c,keepMounted:!0,disableRestoreFocus:!0,transition:!0,children:function(e){var t=e.TransitionProps;return(0,W.jsx)(z.Z,(0,o.Z)((0,o.Z)({},t),{},{timeout:350,children:(0,W.jsxs)(D.Z,{elevation:8,sx:{py:.5,mb:1},children:[(0,W.jsx)(S.Z,{sx:{mx:2,mt:1},color:"text.disabled",variant:"body1",fontWeight:500,children:"AQI at quick glance"}),(0,W.jsx)(F.default,{isTiny:!0,hideAQIDescription:!0,themePreference:!0})]})}))}})]})}var O=n(1478),N=n(501),Q=n(4281),L=(n(4058),n(4853)),U=n(9161),H=n(7138),B=(n(230),n(7892),n(277)),q=n(5203);(0,B.ZP)(q.H)((function(e){return{"&:after, :hover::after":{content:'"."',fontSize:"1.5rem",bottom:"-0.5rem",position:"absolute",color:e.theme.palette.primary.main,opacity:.5},"&:hover::after":{opacity:1}}}));var V=n(7205),G=n(3504),Y=n(2981),X=n(6830),$=n(6886),K=n(5570),J=n(1131),ee=n(1440),te=function(e){var t=e.schoolID,n=e.screens;return(0,W.jsx)($.ZP,{variant:"popover",popupId:"tv-screens-list",children:function(e){return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(V.Z,(0,o.Z)((0,o.Z)((0,o.Z)({variant:"contained"},(0,K.b8)(e)),(0,K.bs)(e)),{},{children:[(0,W.jsx)(Y.Z,{sx:{fontSize:"1rem"}}),"\xa0TV Screens List"]})),(0,W.jsx)(X.Z,(0,o.Z)((0,o.Z)({},(0,K.wK)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClick:e.close,children:n.map((function(e,n){return(0,W.jsx)(J.ZP,{behavior:ee.Z.toNewPage,to:"/screen/".concat(t,"/").concat(e.screen_name),label:e.location_long,sx:{fontSize:"0.8rem"}},n)}))}))]})}})},ne=function(e){var t=e.url;return(0,W.jsxs)(V.Z,{variant:"contained",component:G.rU,to:t,children:[(0,W.jsx)(Y.Z,{sx:{fontSize:"1rem"}}),"\xa0TV Screen"]})},oe=function(e){var t=e.schoolID,n=e.screens;return Array.isArray(n)?n.length<=1?(0,W.jsx)(ne,{url:"/screen/".concat(t)}):(0,W.jsx)(te,{schoolID:t,screens:n}):null},ie=n(6344),re=n(8124),ae=n(1577),le=n(7244),se=n(324),ce=n(8562),ue=n(6071),de=n(8610),he=function(e){var t=e.allowSelect,n=e.currentSchoolID,o=e.currentSchoolName,i=e.allowedSchools;e.fetchDataForDashboard;if(!1===t||!Array.isArray(i)||i.length<=1)return(0,W.jsx)(be,{icon:(0,W.jsx)(ce.Z,{}),label:o,tooltipTitle:"School"});var a=(0,s.useState)(""),l=(0,r.Z)(a,2),u=(l[0],l[1]),d=(0,s.useState)(null),h=(0,r.Z)(d,2),p=h[0],m=h[1],v=function(){m(null)},x=(0,c.s0)(),f=function(e){return function(){n!==e&&(localStorage.setItem(ue.m.schoolID,e),u(e),_.y(_.z.internalNavigation,{origin_school:n,destination_school_id:e,origin_id:"school_selector"}),x("".concat(de.f.dashboard,"/").concat(e))),v()}};return(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(be,{icon:(0,W.jsx)(ce.Z,{}),label:o,tooltipTitle:"Click to Select School",clickable:!0,onClick:function(e){m(e.currentTarget)},"aria-controls":open?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":open?"true":void 0}),(0,W.jsx)(ae.Z,{anchorEl:p,open:Boolean(p),onClose:v,MenuListProps:{"aria-labelledby":"basic-button"},children:(0,W.jsx)(le.Z,{dense:!0,children:i.map((function(e,t){return(0,W.jsx)(se.Z,{onClick:f(e.school_id),children:e.name},t)}))})})]})},pe=n(2826),me={title:"Explanation of the US Air Quality Index (AQI)",subtitle:"CITIESair uses the <a href='https://www.airnow.gov/aqi/aqi-basics/'>Air Quality Index (AQI)</a> developed by the United States Environmental Protection Agency (EPA) to effectively communicate different levels of PM2.5 air pollution. To calculate the AQI from the raw measurement of PM2.5 concentration (\xb5g/m\xb3), different breakpoints and piecewise linear function are utilized (read more <a href='https://en.wikipedia.org/wiki/Air_quality_index#United_States'>here</a>). Higher AQI values correspond to poorer air quality and greater heath risks to humans.<br><br>The US EPA sets thresholds for PM2.5 concentration: <sup>[1]</sup><ul><li><b>Annual average</b>: 12.0 \xb5g/m\xb3, corresponding to US AQI <b>50</b></li><li><b>24-hour average</b>: 35.0 \xb5g/m\xb3, corresponding to US AQI <b>100</b></li></ul>In 2021, the World's Heath Organization (WHO) proposed a new guideline for PM2.5<sup>[2]</sup> with stricter thresholds than those of the US EPA:<ul><li><b>Annual average</b>: 5.0 \xb5g/m\xb3, corresponding to US AQI <b>21</b></li><li><b>24-hour average</b>: 15.0 \xb5g/m\xb3, corresponding to US AQI <b>56</b></li></ul>",reference:'[1] "National Ambient Air Quality Standards (NAAQS) for PM." EPA, Environmental Protection Agency, https://www.epa.gov/pm-pollution/national-ambient-air-quality-standards-naaqs-pm.<br>[2] World Health Organization. "WHO global air quality guidelines: particulate matter (PM2. 5 and PM10), ozone, nitrogen dioxide, sulfur dioxide and carbon monoxide: executive summary." (2021).'},ve=n(1781),xe=n(6694),fe=n(445),ge=n(8518),Ze=["tooltipTitle","label"],be=function(e){var t=e.tooltipTitle,n=e.label,i=(0,d.Z)(e,Ze);return(0,W.jsx)(f.Z,{title:t,enterDelay:0,leaveDelay:200,children:(0,W.jsx)(g.Z,(0,o.Z)({size:"small",label:n||(0,W.jsx)(Z.Z,{variant:"text",sx:{minWidth:"5rem"}})},i))})},ye=function(e){var t,n,i=e.themePreference,a=e.schoolMetadata,l=e.currentData,c=e.dashboardData,u=e.fetchDataForDashboard,d=e.temperatureUnitPreference,f=(0,s.useContext)(h.F),g=(0,r.Z)(f,4),k=(g[0],g[1],g[2],g[3]),I=(0,s.useContext)(ve.S).user,P=(0,s.useContext)(fe.c),z=(0,r.Z)(P,3),D=z[0],E=z[1],M=z[2],B=(0,s.useState)(!1),q=(0,r.Z)(B,2),V=q[0],G=q[1],Y=(0,s.useState)(!1),X=(0,r.Z)(Y,2),$=X[0],K=X[1];(0,s.useEffect)((function(){if("nyuad"===(null===a||void 0===a?void 0:a.school_id))return G(!0),void K(!0);G(!1),K(!1)}),[a]),(0,s.useEffect)((function(){V&&null===D&&E().then((function(e){M(e)}))}),[V]),(0,s.useEffect)((function(){if(null!==c&&void 0!==c&&c.charts){var e=null===c||void 0===c?void 0:c.charts.map((function(e,t){return{chartTitle:e.title,chartID:"chart-".concat(t+1)}}));k(e)}}),[c]);var ee=(0,A.Z)(),te=function(){var e,t;return(0,W.jsxs)(b.ZP,{container:!0,spacing:1,sx:{mt:-3,pb:3},children:[(0,W.jsx)(b.ZP,{item:!0,children:(0,W.jsx)(he,{currentSchoolID:null===a||void 0===a?void 0:a.school_id,currentSchoolName:null===a||void 0===a?void 0:a.name,allowedSchools:I.allowedSchools,fetchDataForDashboard:u})}),(0,W.jsx)(b.ZP,{item:!0,children:(0,W.jsx)(be,{icon:(0,W.jsx)(N.Z,{}),label:null===a||void 0===a?void 0:a.contactPerson,tooltipTitle:"Contact Person"})}),(0,W.jsx)(b.ZP,{item:!0,children:(0,W.jsx)(be,{icon:(0,W.jsx)(Q.Z,{}),label:null===a||void 0===a?void 0:a.contactEmail,tooltipTitle:"Contact Email",component:"a",href:"mailto:".concat(null===a||void 0===a?void 0:a.contactEmail),clickable:!0})}),(0,W.jsx)(b.ZP,{item:!0,children:(0,W.jsx)(be,{icon:(0,W.jsx)(L.Z,{}),label:"".concat((null===c||void 0===c||null===(e=c.charts)||void 0===e?void 0:e.length)||"..."," Chart").concat(1!==(null===c||void 0===c||null===(t=c.charts)||void 0===t?void 0:t.length)?"s":""),tooltipTitle:"Number of Charts",onClick:function(){var e;(0,J.Qj)(O.O3.id),_.y(_.z.internalNavigation,{destination_id:O.O3.id,destination_label:null===(e=O.dashboardData)||void 0===e?void 0:e.toString(),origin_id:"chip"})}})}),n,!0===V&&null!==D&&(0,W.jsx)(b.ZP,{item:!0,children:(0,W.jsx)(be,{icon:(0,W.jsx)(U.Z,{}),label:"".concat(D[x.Hf]," Comment").concat(D[x.Hf]>1?"s":""),tooltipTitle:"Number of Comments",onClick:function(){(0,J.Qj)(O.Sf.id),_.y(_.z.internalNavigation,{destination_id:O.Sf.id,destination_label:O.Sf.toString(),origin_id:"chip"})}})})]})};return(0,W.jsxs)(y.Z,{width:"100%",children:[(0,W.jsx)(R,{themePreference:i}),(0,W.jsx)(ie.Z,{backgroundColor:"customAlternateBackground",children:(0,W.jsxs)(j.Z,{sx:{pt:5},children:[(0,W.jsx)(v.Z,{text:function(){if(null!==a&&void 0!==a&&a.school_id)return"Air Quality | ".concat(null===a||void 0===a?void 0:a.school_id)}()}),(0,W.jsx)(te,{})]})}),!0===$&&(0,W.jsx)(ie.Z,{id:"map",children:(0,W.jsx)(ge.ZP,{tileOption:ge.tW.nyuad,themePreference:i,temperatureUnitPreference:d,placeholderText:"Map of CITIESair air quality sensors on NYUAD campus.",centerCoordinates:[24.5237,54.43449],maxBounds:[[24.52038,54.42612],[24.52808,54.44079]],defaultZoom:17,minZoom:17,maxZoom:19,displayMinimap:!1,displayLocationTitle:!0,rawMapData:l})}),(0,W.jsx)(ie.Z,{backgroundColor:"customAlternateBackground",children:(0,W.jsxs)(j.Z,{sx:{pt:3,pb:3},children:[(0,W.jsx)(y.Z,{textAlign:"center",sx:{mb:2},children:(0,W.jsx)(re.Z,{currentSensorsData:l,isScreen:!1,temperatureUnitPreference:d})}),(0,W.jsx)(S.Z,{component:"div",variant:"body1",color:"text.secondary",sx:{textAlign:"justify",pb:2,mb:0,"& table *":{color:"".concat(ee.palette.text.secondary)}},gutterBottom:!0,children:null!==c&&void 0!==c&&c.description?(0,p.ZP)((null===c||void 0===c?void 0:c.description)||"",{replace:H.T}):Array.from({length:3}).map((function(e,t){return(0,W.jsx)(Z.Z,{variant:"text"},t)}))}),(0,W.jsx)(w.Z,{direction:"row",spacing:2,children:(0,W.jsx)(oe,{schoolID:null===a||void 0===a?void 0:a.school_id,screens:null===a||void 0===a?void 0:a.screens})}),(0,W.jsx)(pe.Z,{title:me.title,content:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(F.default,{themePreference:i}),(0,W.jsx)(S.Z,{component:"div",variant:"body1",color:"text.secondary",sx:{mt:2},children:(0,p.ZP)(me.subtitle,{replace:H.T})}),(0,W.jsx)(pe.Z,{title:"Reference",content:(0,W.jsx)(S.Z,{variant:"caption",color:"text.secondary",children:(0,p.ZP)(me.reference,{replace:H.T})})})]})})]})}),(0,W.jsx)(y.Z,{id:O.O3.id,children:null!==c&&void 0!==c&&c.charts?null===c||void 0===c||null===(t=c.charts)||void 0===t?void 0:t.map((function(e,t){return(0,W.jsx)(ie.Z,{backgroundColor:t%2!=0&&"customAlternateBackground",children:(0,W.jsxs)(j.Z,{sx:{pt:4,pb:4},height:"auto",className:i===T.Z.dark?"dark":"",id:"chart-".concat(t+1),children:[(0,W.jsxs)(S.Z,{variant:"h6",color:"text.primary",children:[t+1,". ",e.title]}),(0,W.jsx)(m.Z,{generalChartSubtitle:e.subtitle,generalChartReference:e.reference,chartData:(0,o.Z)({chartIndex:t},e)})]})},t)})):(0,W.jsx)(xe.Z,{optionalText:"Loading Dashboard"})}),(0,W.jsx)(C.Z,{}),!0===V&&(0,W.jsx)(ie.Z,{id:O.Sf.id,sx:{pt:3,pb:4},children:(0,W.jsx)(x.ZP,{pageID:x.Hf})})]})},je=n(8206),Se=function(e){var t=e.themePreference,n=e.temperatureUnitPreference,a=(0,c.UO)().school_id_param,d=(0,c.s0)();(0,s.useEffect)((function(){a&&(document.title="CITIESair | ".concat(a.toUpperCase()))}),[a]);var p=(0,s.useContext)(h.F),m=(0,r.Z)(p,4),v=(m[0],m[1]);m[2],m[3];(0,s.useEffect)((function(){v(de.f.dashboard)}),[]);var x=(0,s.useContext)(ve.S).user,f={},g=(0,s.useState)(f),Z=(0,r.Z)(g,2),b=Z[0],y=Z[1],j=(0,s.useState)(null),S=(0,r.Z)(j,2),w=S[0],C=S[1],A=(0,s.useState)({}),T=(0,r.Z)(A,2),k=T[0],I=T[1];(0,s.useEffect)((function(){if("nyuad"!==a){!0===x.checkedAuthentication&&!1===x.authenticated&&d("/login");var e=x.allowedSchools;if(Array.isArray(e)&&e.length>0){if(!a){var t,n=localStorage.getItem(ue.m.schoolID);e.map((function(e){return e.school_id})).includes(n)?t=n:(t=e[0].school_id,localStorage.setItem(ue.m.schoolID,t)),0!==Object.keys(b).length&&w&&0!==Object.keys(k).length||P(t),d(t,{replace:!0})}if(e.map((function(e){return e.school_id})).includes(a))return P(a),void localStorage.setItem(ue.m.schoolID,a)}}else P("nyuad")}),[x,a]);var P=function(){var e=(0,i.Z)(l().mark((function e(t){var n,i,r,a,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,je.kG)({endpoint:je.Cq.schoolmetadata,school_id:t}),y(f),C(null),I((0,o.Z)((0,o.Z)({},k),{},{charts:null})),i=(0,je.kG)({endpoint:je.Cq.current,school_id:t}),r=(0,je.kG)({endpoint:je.Cq.chartdata,school_id:t}),e.next=8,Promise.all([(0,u.m)(n,"json",!0),(0,je.mQ)(i)]);case 8:a=e.sent,s=a[0],c=a[1],y(s),C(c),(0,u.m)(r,"json",!0).then((function(e){I(e)})).catch((function(e){console.log(e)}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,W.jsx)(W.Fragment,{children:(0,W.jsx)(ye,{themePreference:t,schoolMetadata:b,currentData:w,dashboardData:k,fetchDataForDashboard:P,temperatureUnitPreference:n})})}},2826:function(e,t,n){"use strict";var o=n(9439),i=n(2791),r=n(277),a=n(417),l=n(3671),s=n(1267),c=n(6015),u=n(5814),d=n(4565),h=n(6935),p=n(7438),m=n(184),v=(0,r.ZP)(a.Z)((function(e){var t=e.theme,n=e.expanded;return{color:t.palette.text.secondary,backgroundImage:"none",backgroundColor:n?t.palette.background.default:"transparent",boxShadow:n?t.shadows:"none",transition:"none"}})),x=(0,r.ZP)(l.Z)((function(e){var t=e.theme,n=e.expanded;return{marginTop:n?t.spacing(3):0,flexDirection:"row-reverse",paddingLeft:n?t.spacing(1):0,"& .MuiTypography-root":{color:t.palette.text.primary,textDecoration:"underline",transition:"none","&:hover":{color:t.palette.primary.main}}}}));t.Z=function(e){var t,n=e.title,r=e.content,a=(0,i.useState)(void 0),l=(0,o.Z)(a,2),f=l[0],g=l[1];return(0,m.jsx)(c.Z,{children:(0,m.jsxs)(v,{expanded:"panel1"===f,onChange:(t="panel1",function(e,o){g(o?t:void 0),p.y(o?p.z.expandSection:p.z.collapseSection,{section:n})}),transitionDuration:0,children:[(0,m.jsx)(x,{expanded:f,expandIcon:(0,m.jsx)(h.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,m.jsx)(u.Z,{title:f?"Click to collapse":"Click to expand",enterDelay:0,leaveDelay:200,children:(0,m.jsx)(d.Z,{component:"a",variant:"body2",children:n})})}),(0,m.jsx)(s.Z,{children:r})]})})}},6598:function(e,t,n){var o={"./AirQualityIndexTable":8416,"./AirQualityIndexTable.jsx":8416,"./ChartSubstituteComponentLoader":5276,"./ChartSubstituteComponentLoader.jsx":5276};function i(e){return Promise.resolve().then((function(){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n(o[e])}))}i.keys=function(){return Object.keys(o)},i.id=6598,e.exports=i}}]);
//# sourceMappingURL=125.6499e9de.chunk.js.map