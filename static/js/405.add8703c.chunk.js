(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[405],{8124:function(e,t,o){"use strict";var i=o(1413),n=o(885),r=(o(2791),o(5953)),a=o(6015),l=o(4565),s=o(9530),c=o(3085),u=o(9388),d=o(4011),h=o(5445),p=o(3511),m=o(4809),v=o(184),g=function(e){var t,o,i=e.sensorData,n=e.isScreen;return n&&i.current.sensor_status===d.vI.active?null:(0,v.jsxs)(l.Z,{variant:n?"h6":"caption",sx:{mt:0,fontWeight:n&&"500 !important"},children:[(null===(t=i.current)||void 0===t?void 0:t.sensor_status)!==d.vI.active&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.Z,{sx:{"& *":{color:"".concat(p.Z[3].lightThemeColor," !important")},mr:.5}}),"Offline.\xa0"]}),"Last update:",null!==(o=i.current)&&void 0!==o&&o.timestamp?" ".concat((0,d.Zj)(i.current.timestamp)," ago"):"--"]})};t.Z=function(e){var t=e.currentData,o=e.temperatureUnitPreference,u=e.isScreen,p=void 0===u||u,f=e.orderOfItems;return(0,v.jsx)(r.ZP,{container:!0,justifyContent:"center",sx:{"& .MuiSvgIcon-root":{verticalAlign:"sub",fontSize:p?null:"1rem"},"& *":{fontWeight:"500"},"& .condensedFont":{fontFamily:"IBM Plex Sans Condensed, sans-serif !important","& *":{fontFamily:"IBM Plex Sans Condensed, sans-serif !important"}}},children:Object.entries(t).map((function(e,u){var x,b,y,Z,S,w,j,C,A,T,I,k,P,z,_=(0,n.Z)(e,2),E=_[0],D=_[1];return(0,v.jsxs)(r.ZP,(0,i.Z)((0,i.Z)({item:!0,order:f&&f[u]},(z=Object.keys(t).length,{xs:Math.max(12/z,6),sm:Math.max(12/z,4),lg:p?12/z:Math.min(5,Math.max(12/z,3))})),{},{sx:(null===(x=D.current)||void 0===x?void 0:x.sensor_status)!==d.vI.active&&{"& *":{color:"".concat(m.Z.universal.palette.inactiveSensor)}},children:[(0,v.jsxs)(a.Z,{sx:{"& *":{color:null===(b=D.current)||void 0===b?void 0:b.color}},children:[(0,v.jsx)(l.Z,{variant:p?"h4":"h5",fontWeight:"500",className:"condensedFont",children:(null===(y=D.sensor)||void 0===y?void 0:y.location_long)||(null===(Z=D.sensor)||void 0===Z?void 0:Z.location_short)||"No Location Name"}),(0,v.jsx)(l.Z,{variant:p?"h1":"h2",fontWeight:"500",lineHeight:p?.8:.9,children:(null===(S=D.current)||void 0===S?void 0:S.aqi)||"--"}),(0,v.jsx)(l.Z,{variant:p?"h4":"h5",fontWeight:"500",className:"condensedFont",children:(null===(w=D.current)||void 0===w?void 0:w.category)||"--"})]}),(0,v.jsxs)(a.Z,{sx:{"& *":{color:p?(null===(j=D.current)||void 0===j?void 0:j.sensor_status)===d.vI.active?"#c8dcff":m.Z.universal.palette.inactiveSensor:"text.secondary"},mt:p?2:1},className:"condensedFont",children:[(0,v.jsxs)(l.Z,{variant:p?"h6":"body1",children:[(0,v.jsx)(s.Z,{}),(0,h.Lo)({rawTemp:(null===(C=D.current)||void 0===C?void 0:C.temperature)||"--",currentUnit:h.fG.celsius,returnUnit:o}),"\xa0\xa0-\xa0",(0,v.jsx)(c.Z,{sx:{transform:"scaleX(0.9)"}}),null!==(A=D.current)&&void 0!==A&&A.rel_humidity?Math.round(null===(T=D.current)||void 0===T?void 0:T.rel_humidity):"--","%"]}),["outdoors","indoors_gym"].includes(null===(I=D.sensor)||void 0===I?void 0:I.location_type)&&(0,v.jsx)(l.Z,{variant:p?"body1":"body2",sx:{fontWeight:"300 !important"},children:(0,h.qu)({rawTemp:null===(k=D.current)||void 0===k?void 0:k.temperature,currentUnit:h.fG.celsius,rel_humidity:null===(P=D.current)||void 0===P?void 0:P.rel_humidity,returnUnit:o})}),g({sensorData:D,isScreen:p})]}),D.sensor_status!==d.vI.active&&(0,v.jsx)(l.Z,{variant:p?"h6":"body1",className:"condensedFont",children:(0,d.Tm)(D)})]}),E)}))})}},1745:function(e,t,o){"use strict";o.d(t,{Z:function(){return r}});var i=o(4565),n=o(184);function r(e){var t=e.text;return(0,n.jsx)(i.Z,{variant:"h4",color:"text.primary",sx:{fontWeight:"medium",display:"inline-block",textTransform:"uppercase",pb:3,lineHeight:1},children:t})}},7038:function(e,t,o){"use strict";o.d(t,{Z:function(){return L}});var i=o(885),n=o(4942),r=o(1413),a=o(2791),l=o(277),s=o(6015),c=o(4293),u=o(2797),d=o(166),h=o(229),p=o(6084),m=o(4162),v=o(4142),g=o(184);function f(e){var t=e.publishedSheetId,o=e.gid,i=e.range,n="https://docs.google.com/spreadsheets/d/e/".concat(t,"/pubhtml?gid=").concat(o,"&single=true&widget=false&headers=false&chrome=false&range=").concat(i);return(0,g.jsx)("iframe",{title:"Heatmap-iframe",className:"heat-map-iframe",style:{width:"100%",height:"100%",border:"none"},src:n,children:"Loading..."})}var x=(0,a.memo)(f),b=o(4565),y=o(1898),Z=o(3057),S=o(324),w=o(5473),j=o(9627),C=o(8956),A=o(5953),T=o(5209),I=o(3746),k="Display All Series";function P(e){var t,o=e.items,l=e.selectorID,s=e.allowMultiple,c=e.onSeriesSelection,u=(0,v.Z)(),d={PaperProps:{style:{maxHeight:274.4,overflow:"visible !important",background:u.palette.customAlternateBackground}},anchorOrigin:{vertical:-6,horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},h=(0,a.useState)(o),p=(0,i.Z)(h,2),f=p[0],x=p[1],P=(0,a.useState)(s),z=(0,i.Z)(P,2),_=z[0],E=z[1];(0,a.useEffect)((function(){x(o)}),[o]),(0,a.useEffect)((function(){E(f.every((function(e){return e.selected})))}),[f]);var D=function(e){var t=e.target.value;if(t.includes(k)){var o=f.map((function(e,t){return(0,r.Z)((0,r.Z)({},e),{},{selected:0==t||!_})}));c(o),E(!_)}else{var i=f.filter((function(e){return t.includes(e.label)})),n=f.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{selected:i.some((function(t){return t.label===e.label}))})}));c(n),E(!1)}},M=function(e){var t=f.map((function(t){return t.label===e.label?(0,r.Z)((0,r.Z)({},t),{},{selected:!t.selected}):t}));c(t)};return(0,g.jsxs)(m.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,g.jsx)(y.Z,{sx:(t={},(0,n.Z)(t,u.breakpoints.down("sm"),{width:"100%"}),(0,n.Z)(t,"minWidth","200px"),(0,n.Z)(t,"& .MuiInputBase-root",{mt:1,borderRadius:u.spacing(1)}),t),size:"small",children:(0,g.jsxs)(Z.Z,{labelId:"".concat(l,"-label"),id:l,multiple:s,value:f.filter((function(e){return e.selected})).map((function(e){return e.label})),onChange:D,MenuProps:d,renderValue:function(e){return function(e){return(0,g.jsxs)(m.Z,{direction:"row",alignItems:"center",spacing:.5,children:[(0,g.jsx)(I.Z,{fontSize:"1.5rem",sx:{color:u.palette.text.secondary}}),(0,g.jsx)(b.Z,{variant:"caption",color:"text.secondary",children:s?"".concat(e.length," series displayed").concat(_?" (all)":""):e})]})}(e)},sx:{fontSize:"0.75em"},children:[f.map((function(e){return(0,g.jsxs)(S.Z,{disabled:!(1!==f.filter((function(e){return e.selected})).length||!e.selected),value:e.label,sx:{backgroundColor:"unset !important","&:hover":{backgroundColor:"inherit !important"}},children:[s?(0,g.jsx)(w.Z,{checked:e.selected,onClick:function(){return M(e)},sx:{p:.25,transform:"scale(0.8)"}}):(0,g.jsx)(j.Z,{checked:e.selected,onChange:function(){return D(e)},sx:{p:.25,transform:"scale(0.8)"}}),(0,g.jsx)(b.Z,{variant:"caption",children:e.label})]},e.label)})),s&&(0,g.jsx)(S.Z,{value:k,sx:{borderTop:"solid 0.5px",borderColor:u.palette.text.secondary,position:"sticky",bottom:0,zIndex:99999,marginBottom:u.spacing(-1),background:u.palette.customAlternateBackground,"&:hover":{background:u.palette.customAlternateBackground}},children:(0,g.jsxs)(m.Z,{direction:"row",width:"100%",alignItems:"center",justifyContent:"space-between",children:[(0,g.jsx)(b.Z,{fontWeight:500,variant:"caption",sx:{pl:1},children:k}),(0,g.jsx)(C.Z,{checked:_,onClick:function(){return M(k)},sx:{transform:"scale(0.8)"}})]})},k)]})}),s&&(0,g.jsx)(A.ZP,{container:!0,spacing:1,sx:(0,n.Z)({},u.breakpoints.down("sm"),{display:"none"}),children:f.filter((function(e){return e.selected})).map((function(e){return(0,g.jsx)(A.ZP,{item:!0,children:(0,g.jsx)(T.Z,(0,r.Z)({label:(0,g.jsx)(b.Z,{variant:"caption",children:e.label}),size:"small"},1!==f.filter((function(e){return e.selected})).length&&{onDelete:function(){return M(e)}}))},e.label)}))})]})}var z={CategoryFilter:{position:"top",stackDirection:"column"},DateRangeFilter:{position:"bottom",stackDirection:"column-reverse"},ChartRangeFilter:{position:"bottom",stackDirection:"column-reverse"},NumberRangeFilter:{position:"top",stackDirection:"column"}},_={stem:{length:0},textStyle:{opacity:0},boxStyle:null},E=function(e){var t=e.isPortrait;return e.isSmaller?t?6:8:t?8:10},D=function(e){var t,o,i,n,a,l,s,c,u,d=e.chartControl,h=e.mainChartData,p=e.mainChartOptions,m=e.subchartIndex,v=e.theme,g=e.isPortrait,f=(0,r.Z)((0,r.Z)({},null===(t=d.options)||void 0===t?void 0:t.ui),{},{snapToData:!0});"ChartRangeFilter"===d.controlType&&(f=(0,r.Z)((0,r.Z)({},f),{},{chartType:h.chartType,chartView:{columns:h.columns||h.subcharts&&h.subcharts[m].columns||null},chartOptions:(0,r.Z)((0,r.Z)((0,r.Z)({},p),null===(o=d.options)||void 0===o||null===(i=o.ui)||void 0===i?void 0:i.chartOptions),{},{hAxis:(0,r.Z)((0,r.Z)({},null===(n=d.options)||void 0===n||null===(a=n.ui)||void 0===a||null===(l=a.chartOptions)||void 0===l?void 0:l.hAxis),{},{textPosition:"out",textStyle:{color:v.palette.chart.axisText,fontSize:E({isPortrait:g,isSmaller:!0})}}),vAxis:(0,r.Z)((0,r.Z)({},null===(s=d.options)||void 0===s||null===(c=s.ui)||void 0===c||null===(u=c.chartOptions)||void 0===u?void 0:u.vAxis),{},{title:null}),annotations:_,legend:null})}));return f},M=function(e){var t=e.cellSizeMin,o=e.cellSizeMax,i=Math.min(Math.max(.9*window.innerWidth/58,t),o);return{chartWidth:56*i,cellSize:i,yearLabelFontSize:2*i}},q=(0,l.ZP)(s.Z)((function(e){var t=e.theme,o=e.isPortrait;return{"& .google-visualization-tooltip":{width:"unset !important",maxWidth:"350px",height:"unset",padding:"1em",fontSize:"".concat(o?9:12,"px"),color:t.palette.chart.tooltip.text,background:t.palette.chart.tooltip.background,borderRadius:t.spacing(.5),"& ul":{margin:"0 !important","& li":{margin:"0 !important",padding:"0 !important","& span":{fontSize:"".concat(o?9:12,"px !important"),color:"".concat(t.palette.chart.tooltip.text," !important")}}}},"& .goog-menuitem-highlight, .goog-menuitem-hover":{backgroundColor:"".concat(t.palette.primary," !important")},"& .google-visualization-controls-categoryfilter":{fontSize:"0.85rem",marginTop:"0.75rem",marginBottom:"-0.75rem","& .goog-inline-block > .goog-menu-button":{marginTop:0},"& .goog-menu-button-hover .goog-menu-button-outer-box, .goog-menu-button-hover .goog-menu-button-inner-box":{borderColor:"inherit !important"},"& .google-visualization-controls-label":{color:t.palette.text.secondary,fontWeight:500,verticalAlign:"middle",marginBottom:"0.25rem"},"& .goog-menu-button-outer-box":{backgroundColor:t.palette.background.paper,border:"unset","& .goog-menu-button-inner-box":{paddingTop:t.spacing(.5),paddingBottom:t.spacing(.5),paddingLeft:t.spacing(2),paddingRight:t.spacing(2),border:"solid",borderWidth:"0.5px",borderRadius:t.spacing(.5),borderColor:t.palette.text.secondary,"& .goog-menu-button-caption":{color:t.palette.text.secondary}}}},"& .google-visualization-controls-rangefilter":{width:"100%",fontSize:"0.75rem","& .goog-inline-block":{width:"100%"},"& .google-visualization-controls-slider-horizontal":{width:"90%",margin:"0 5%"},"& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(1)":{position:"absolute",top:"1.5em",left:"5%"},"& .google-visualization-controls-rangefilter-thumblabel:nth-of-type(2)":{position:"absolute",top:"1.5em",right:"5%"},"& .google-visualization-controls-slider-handle":{background:t.palette.primary.main},"& .google-visualization-controls-rangefilter-thumblabel":{color:t.palette.text.secondary,padding:0,fontWeight:500},"& .google-visualization-controls-slider-thumb":{background:t.palette.primary.main,border:"unset",borderRadius:"4px"}},'& path[stroke-opacity="0.3"], path[stroke-opacity="0.1"], path[stroke-opacity="0.05"], rect[stroke-opacity]':{stroke:t.palette.text.primary,strokeWidth:3},"& [column-id]:not(:empty)":{cursor:"pointer",":hover":{fontWeight:600}}}})),W=o(6694),O=o(5276);function H(e){var t,o,n=e.dataArray,l=e.chartData,c=e.subchartIndex,u=e.windowSize,d=e.isPortrait,h=e.isHomepage,f=e.height,b=e.maxHeight,y=null===(t=l.subcharts)||void 0===t?void 0:t[c].chartSubstituteComponentName;if(y)return(0,g.jsx)(O.default,{chartSubstituteComponentName:y});var Z=l.customClassName?"".concat(l.chartType," ").concat(l.customClassName):l.chartType;if("HeatMap"===l.chartType)return(0,g.jsx)(s.Z,{position:"relative",className:Z,height:l.height,maxWidth:l.maxWidth?l.maxWidth:"100%",width:"100%",sx:{pt:2,pb:2,margin:"auto"},children:(0,g.jsx)(x,{publishedSheetId:l.publishedSheetId,gid:l.gid||l.subcharts[c].gid||null,range:l.range||l.subcharts[c].range||null})});var S=(0,a.useContext)(p.R),w=(0,i.Z)(S,2),j=w[0],C=(w[1],(0,a.useState)()),A=(0,i.Z)(C,2),T=(A[0],A[1]),I=(0,a.useState)(),k=(0,i.Z)(I,2),H=k[0],N=k[1],U=(0,a.useState)(),L=(0,i.Z)(U,2),Q=(L[0],L[1]),F=(0,a.useState)(),R=(0,i.Z)(F,2),B=R[0],G=R[1],V=(0,v.Z)(),Y=(0,a.useState)(!0),X=(0,i.Z)(Y,2),K=X[0],J=X[1],$=(0,a.useState)(),ee=(0,i.Z)($,2),te=ee[0],oe=ee[1],ie=(0,a.useState)(),ne=(0,i.Z)(ie,2),re=ne[0],ae=ne[1],le=(0,a.useState)(),se=(0,i.Z)(le,2),ce=(se[0],se[1]),ue=(0,a.useState)(Math.random().toString(36).substr(2,9)),de=(0,i.Z)(ue,2),he=de[0],pe=(de[1],(0,a.useState)(200)),me=(0,i.Z)(pe,2),ve=me[0],ge=me[1],fe=function(e){var t,o,i,n,a,l,s,c,u,d,h,p,m,v,g,f,x,b,y,Z,S,w,j,C,A,T,I,k,P,z,D,M,q,W,O,H,N,U,L,Q,F,R=e.chartData,B=e.subchartIndex,G=e.isPortrait,V=e.isHomepage,Y=e.theme,X={italic:!1,bold:!0,color:Y.palette.chart.axisTitle,fontSize:E({isPortrait:G})},K={color:Y.palette.chart.axisText,fontSize:E({isPortrait:G})},J=null!==(t=R.subcharts)&&void 0!==t&&t[B].options?(0,r.Z)({},R.subcharts[B].options):{};if((J=(0,r.Z)((0,r.Z)((0,r.Z)({},J),R.options),{},{theme:"material",curveType:J.curveType||(null===(o=R.options)||void 0===o?void 0:o.curveType)||"function",crosshair:{orientation:"both",trigger:"focus",opacity:.5},backgroundColor:{fill:"transparent"},chartArea:(0,r.Z)((0,r.Z)({},null===(i=R.options)||void 0===i?void 0:i.chartArea),{},{width:G?(null===(n=R.options)||void 0===n||null===(a=n.chartArea)||void 0===a||null===(l=a.width)||void 0===l?void 0:l.portrait)||"80%":(null===(s=R.options)||void 0===s||null===(c=s.chartArea)||void 0===c||null===(u=c.width)||void 0===u?void 0:u.landscape)||"75%",height:G?(null===(d=R.options)||void 0===d||null===(h=d.chartArea)||void 0===h||null===(p=h.height)||void 0===p?void 0:p.portrait)||"60%":(null===(m=R.options)||void 0===m||null===(v=m.chartArea)||void 0===v||null===(g=v.height)||void 0===g?void 0:g.landscape)||"70%"}),width:G?(null===(f=R.options)||void 0===f||null===(x=f.width)||void 0===x?void 0:x.portrait)||"100%":(null===(b=R.options)||void 0===b||null===(y=b.width)||void 0===y?void 0:y.landscape)||"100%",height:R.height||"100%",tooltip:{isHtml:!0,showColorCode:!1},legend:{alignment:G?"center":"start",position:null!==(Z=null===(S=R.options)||void 0===S||null===(w=S.legend)||void 0===w?void 0:w.position)&&void 0!==Z?Z:G?"top":"right",scrollArrows:{activeColor:Y.palette.chart.axisTitle,inactiveColor:Y.palette.text.secondary},pagingTextStyle:{fontSize:10,color:Y.palette.chart.axisTitle,bold:!0}}})).vAxis=(0,r.Z)((0,r.Z)({},J.vAxis),{},{format:null!==(j=null===(C=J.vAxis)||void 0===C?void 0:C.format)&&void 0!==j?j:"decimal",title:null!==(A=null===(T=J.vAxis)||void 0===T?void 0:T.title)&&void 0!==A?A:"",viewWindow:{min:null!==(I=null===(k=J.vAxis)||void 0===k||null===(P=k.viewWindow)||void 0===P?void 0:P.min)&&void 0!==I?I:0}}),J.hAxis=(0,r.Z)((0,r.Z)({},J.hAxis),{},{title:null!==(z=null===(D=J.hAxis)||void 0===D?void 0:D.title)&&void 0!==z?z:""}),G&&(J.hAxis=(0,r.Z)((0,r.Z)({},J.hAxis),{},{slantedText:!0,slantedTextAngle:30})),"string"!==typeof J.colors&&J.colors||(J.colors=Y.palette.chart.optionsColors[J.colors||"multiColor"]),J.series&&Object.values(J.series).forEach((function(e){var t=e;"default"===t.color&&(t.color=Y.palette.primary.main)})),J.trendlines&&J.trendlines.forEach((function(e){e.color=Y.palette.primary.main})),J.colorAxis)switch(J.colorAxis.colors){case"matchingColor":J.colorAxis.colors=[Y.palette.chart.colorAxisFirstColor,Y.palette.chart.optionsColors.multiColor[J.colorAxis.colorIndex]];break;case"default":J.colorAxis.colors=[Y.palette.chart.colorAxisFirstColor,Y.palette.NYUpurple];break;case"aqi":J.colorAxis=Y.palette.chart.aqiColorAxis}return J.vAxis=(0,r.Z)((0,r.Z)({},J.vAxis),{},{titleTextStyle:X,textStyle:K,gridlines:(0,r.Z)((0,r.Z)({},null===(M=J.vAxis)||void 0===M?void 0:M.gridlines),{},{color:(null===(q=J.vAxis)||void 0===q||null===(W=q.gridlines)||void 0===W?void 0:W.color)||Y.palette.chart.gridlines}),minorGridlines:{count:0}}),J.hAxis=(0,r.Z)((0,r.Z)({},J.hAxis),{},{titleTextStyle:X,textStyle:K,gridlines:(0,r.Z)((0,r.Z)({},null===(O=J.hAxis)||void 0===O?void 0:O.gridlines),{},{color:(null===(H=J.hAxis)||void 0===H||null===(N=H.gridlines)||void 0===N?void 0:N.color)||Y.palette.chart.gridlines}),minorGridlines:(0,r.Z)((0,r.Z)({},null===(U=J.hAxis)||void 0===U?void 0:U.minorGridlines),{},{color:(null===(L=J.hAxis)||void 0===L||null===(Q=L.gridlines)||void 0===Q?void 0:Q.color)||Y.palette.chart.gridlines})}),J.legend=(0,r.Z)((0,r.Z)({},J.legend),{},{textStyle:K}),J.annotations=(0,r.Z)((0,r.Z)({},J.annotations),{},{highContrast:!0,textStyle:{color:Y.palette.primary.contrastText,fontSize:E({isPortrait:G,isSmaller:!0}),opacity:.8},stem:(0,r.Z)((0,r.Z)({},null===(F=J.annotations)||void 0===F?void 0:F.stem),{},{color:Y.palette.chart.axisTitle,thickness:2}),boxStyle:{rx:Y.shape.borderRadius,ry:Y.shape.borderRadius,fill:Y.palette.chart.annotationBoxFill,fillOpacity:.5}}),V&&(J=(0,r.Z)((0,r.Z)({},J),{},{chartArea:(0,r.Z)((0,r.Z)({},J.chartArea),{},{width:"80%",height:"80%"}),seriesSelector:!1,pointSize:0,enableInteractivity:!1,annotations:_,legend:"none",vAxis:(0,r.Z)((0,r.Z)({},J.vAxis),{},{textPosition:"none",titleTextStyle:(0,r.Z)((0,r.Z)({},J.vAxis.titleTextStyle),{},{bold:!1}),gridlines:{color:"transparent",count:0},viewWindowMode:"maximized"}),hAxis:(0,r.Z)((0,r.Z)({},J.hAxis),{},{textPosition:"none",gridlines:{color:"transparent",count:0},titleTextStyle:(0,r.Z)((0,r.Z)({},J.hAxis.titleTextStyle),{},{bold:!1})})})),J}((0,r.Z)((0,r.Z)({},e),{},{theme:V}));"Calendar"===l.chartType&&(fe=function(e){var t=M({cellSizeMin:14,cellSizeMax:18});return(0,r.Z)((0,r.Z)({},e),{},{width:t.chartWidth,calendar:{cellSize:t.cellSize,yearLabel:{fontSize:t.yearLabelFontSize}},noDataPattern:{backgroundColor:"none",color:"none"}})}(fe));var xe,be=!1,ye=l.control||(null===(o=l.subcharts)||void 0===o?void 0:o[c].control);ye&&!0!==h&&(be=!0,xe=(0,r.Z)((0,r.Z)({},ye.options),{},{ui:D({chartControl:ye,mainChartData:l,mainChartOptions:fe,subchartIndex:c,theme:V,isPortrait:d})}),"ChartRangeFilter"===ye.controlType&&(0,a.useEffect)((function(){var e=function(e){var t=e.controlWrapper,o=e.chartID,i=function(e){var t=e.changedTouches[0],o="";switch(e.type){case"touchstart":o="mousedown";break;case"touchmove":o="mousemove";break;case"touchend":o="mouseup";break;default:return}var i=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,detail:1,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,button:0,relatedTarget:null});t.target.dispatchEvent(i),e.preventDefault()};if(t){var n=document.querySelector("#control-".concat(o));if(n)return["touchstart","touchmove","touchend","touchcancel"].forEach((function(e){n.addEventListener(e,i,{capture:!0})})),function(){["touchstart","touchmove","touchend","touchcancel"].forEach((function(e){n.removeEventListener(e,i,{capture:!0})}))}}}({controlWrapper:B,chartID:he});return e}),[B]));var Ze=fe.seriesSelector||!1;(0,a.useEffect)((function(){Ze?je(re):(null===H||void 0===H||H.setOptions((0,r.Z)((0,r.Z)({},fe),"Calendar"===l.chartType&&{height:ve})),null===H||void 0===H||H.draw(),be&&(null===B||void 0===B||B.setOptions(xe),null===B||void 0===B||B.draw()))}),[V,d,u,ve]),(0,a.useEffect)((function(){re&&Ze&&"setViewColumn"==Ze.method&&(Se({dataColumns:re}),je(re))}),[V]);var Se=function(e){e.dataColumns.forEach((function(e){var t;e.color=fe.colors[e.seriesIndex%fe.colors.length],e.serieAttribute=null===(t=fe.series)||void 0===t?void 0:t[e.seriesIndex]}))},we=function(e){var t,o,i=e.dataTable;return e.allInitialColumns.forEach((function(e,n){if(0!==n){var r=i.getColumnRange(e.sourceColumn);!isNaN(r.min)&&r.min&&(t=t?Math.min(t,r.min):r.min),!isNaN(r.max)&&r.max&&(o=o?Math.max(o,r.max):r.max)}})),{min:t,max:o}},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;if(te){if(ae(e),"toggleVisibility"===Ze.method||null===Ze.method){var o={};e.forEach((function(e){e.selected||(o[e.seriesIndex]={color:"transparent",enableInteractivity:!1,visibleInLegend:!1})})),null===t||void 0===t||t.setOptions((0,r.Z)((0,r.Z)({},fe),{},{series:(0,r.Z)((0,r.Z)({},fe.series),o)}))}else if("setViewColumn"===Ze.method){var i=[];i.push(0),e.forEach((function(e){if(e.selected){i.push(e);for(var t=e.indexInAllInitialColumns+1;t<te.length&&"data"!==te[t].role;t++)i.push(te[t])}})),null===t||void 0===t||t.setView({columns:i});var n=(0,r.Z)({},fe);n.colors=e.filter((function(e){return e.selected})).map((function(e){return e.color}));var a={},l=0;e.forEach((function(e){e.selected&&(null!=e.serieAttribute&&(a[l]=e.serieAttribute),l++)})),n.series=a,null===t||void 0===t||t.setOptions(n)}null===t||void 0===t||t.draw(),be&&(null===B||void 0===B||B.draw())}};(0,a.useEffect)((function(){if(j&&!H&&n){var e=j.visualization.arrayToDataTable(n);T(e);var t=new j.visualization.ChartWrapper({chartType:l.chartType,dataTable:be?void 0:e,options:fe,view:{columns:l.columns||l.subcharts&&l.subcharts[c].columns||null},containerId:he});if(N(t),be){var o=new j.visualization.Dashboard(document.getElementById("dashboard-".concat(he)));Q(o),j.visualization.events.addListener(o,"ready",Ce);var i=new j.visualization.ControlWrapper({controlType:ye.controlType,options:xe,containerId:"control-".concat(he)});G(i),o.bind(i,t),o.draw(e)}else j.visualization.events.addListener(t,"ready",Ce),t.draw();if(Ze){var r=function(e){var t=e.chartWrapper,o=e.dataTable,i=e.seriesSelector,n=t.getView();if(null==n.columns){var r=new j.visualization.DataView(o);t.setView({columns:r.columns}),n=t.getView()}var a=!0,l=0,s=n.columns.map((function(e,t){return"number"===typeof e&&(e={role:a?"domain":"data",sourceColumn:e}),e.label=o.getColumnLabel(e.sourceColumn),e.indexInAllInitialColumns=t,a=a&&!1,"data"===e.role&&(null!==i&&void 0!==i&&i.allowMultiple?e.selected=!0:e.selected=0===l,e.seriesIndex=l,l++),e}));oe(s);var c=we({dataTable:o,allInitialColumns:s});ce(c);var u=s.filter((function(e){var t,o;return"data"===e.role&&!1!==(null===(t=fe.series)||void 0===t||null===(o=t[e.seriesIndex])||void 0===o?void 0:o.visibleInLegend)}));return"setViewColumn"===i.method&&Se({dataColumns:u}),ae(u),u}({chartWrapper:t,dataTable:e,seriesSelector:Ze});je(r,t)}}}),[j,n]);var Ce=function(){if("Calendar"===l.chartType){var e=document.getElementById(he).querySelector("svg > g:nth-of-type(1)").getBBox().height;"none"===fe.legend.position&&(e+=50),ge(e)}K&&J(!1)};return(0,g.jsxs)(q,{isPortrait:d,className:Z,position:"relative",height:"100%",minHeight:"Calendar"===l.chartType&&"200px",children:[K&&(0,g.jsx)(s.Z,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:(0,g.jsx)(W.Z,{})}),Ze&&!K&&(0,g.jsx)(P,{items:re,allowMultiple:Ze.allowMultiple,selectorID:"".concat(l.title,"-selector"),onSeriesSelection:je}),function(){var e;return be?(0,g.jsxs)(m.Z,{id:"dashboard-".concat(he),direction:(null===(e=z[ye.controlType])||void 0===e?void 0:e.stackDirection)||"column-reverse",sx:{height:"100%"},children:[(0,g.jsx)(s.Z,{id:"control-".concat(he),sx:{height:"calc(".concat(f," / 8)"),opacity:.8,filter:"saturate(0.3)"}}),(0,g.jsx)(s.Z,{id:he,sx:{height:f,maxHeight:b}})]}):(0,g.jsx)(s.Z,{id:he,sx:{height:f,maxHeight:b}})}()]})}var N=(0,l.ZP)(s.Z)((function(e){var t=e.theme;return(0,r.Z)((0,r.Z)({},"dark"===t.palette.mode&&{filter:"saturate(0.85)","& .heat-map-iframe":{filter:"invert(0.848) hue-rotate(180deg)"}}),{},{'& .historical-snapshot-aqi svg [clip-path*="ABSTRACT_RENDERER"] > g:nth-of-type(1), .historical-snapshot-aqi [id*="googlechart-control"] svg [clip-path*="ABSTRACT_RENDERER"] > g:nth-of-type(2)':{opacity:.6},"& .Calendar [dir]:not(:empty)":{margin:"auto"},"& .Calendar > div > div:last-of-type > div":{overflowX:"auto",overflowY:"hidden",scrollbarGutter:"stable"}})})),U=(0,l.ZP)(c.Z)((function(e){var t=e.theme;return{"& .MuiTabScrollButton-root":{color:t.palette.text.primary},"& .MuiTab-root":(0,n.Z)({},t.breakpoints.down("sm"),{fontSize:"0.75rem",paddingLeft:t.spacing(1),paddingRight:t.spacing(1)})}}));var L=function(e){var t,o,l=e.chartData,c=e.chartHeight,p=e.isHomepage,m=e.dataArray,v=(0,u.Z)((function(e){return e.breakpoints.down("sm")})),f=(0,a.useState)(window.matchMedia("(orientation: portrait)").matches),x=(0,i.Z)(f,2),b=x[0],y=x[1],Z=(0,a.useState)([window.innerWidth,window.innerHeight]),S=(0,i.Z)(Z,2),w=S[0],j=S[1],C=c,A=l,T=(0,a.useContext)(h.q),I=(0,i.Z)(T,2),k=(I[0],I[1]),P=(0,a.useState)(0),z=(0,i.Z)(P,2),_=z[0],E=z[1];if((0,a.useEffect)((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){y(window.matchMedia("(orientation: portrait)").matches),j([window.innerWidth,window.innerHeight])}),100)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[A]),"Calendar"===A.chartType||C||(C=b?"80vw":"35vw",t=b?"800px":"500px"),"HeatMap"===A.chartType&&(A=(0,r.Z)((0,r.Z)({},A),A[b?"subchartsPortrait":"subchartsLandscape"])),A.subcharts){o=p?(0,g.jsx)(H,{dataArray:m,chartData:A,subchartIndex:0,isPortrait:b,isHomepage:p,windowSize:w,height:A.height?A.height:C,maxHeight:"HeatMap"===A.chartType?"":t}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(U,{value:_,onChange:function(e,t){k((function(e){return(0,r.Z)((0,r.Z)({},e),{},(0,n.Z)({},A.chartIndex,t))})),E(t)},variant:v?"fullWidth":"standard",children:A.subcharts.map((function(e,t){return(0,g.jsx)(d.Z,{value:t,label:A.subcharts[t].subchartTitle},t)}))}),(0,g.jsx)(s.Z,{position:"relative",children:A.subcharts.map((function(e,o){return(0,g.jsx)(s.Z,{width:"100%",height:"100%",role:"tabpanel",sx:{transition:"0.35s",position:0===o?"":"absolute",opacity:_===o?"1":"0",pointerEvents:_===o?"auto":"none",top:0===o?"":0},children:(0,g.jsx)(H,{dataArray:m,chartData:A,subchartIndex:o,isPortrait:b,isHomepage:p,windowSize:w,height:A.height?A.height:C,maxHeight:["HeatMap","Calendar"].includes(A.chartType)?"":t})},o)}))})]})}else o=(0,g.jsx)(H,{dataArray:m,chartData:A,isPortrait:b,isHomepage:p,windowSize:w,height:A.height?A.height:C,maxHeight:"HeatMap"===A.chartType?"":t});return(0,g.jsx)(N,{height:"100%",children:o})}},692:function(e,t,o){"use strict";o.r(t),o.d(t,{StyledTable:function(){return f}});var i=o(4942),n=o(277),r=o(1680),a=o(6015),l=o(9827),s=o(807),c=o(4390),u=o(9773),d=o(3540),h=o(7138),p=o(7038),m=o(3511),v=o(604),g=o(184),f=(0,n.ZP)(r.Z)((function(e){var t=e.theme,o=e.isTiny;return{minWidth:o||700,"& th, td":(0,i.Z)({fontSize:o?"0.625rem":"0.6875rem",color:t.palette.text.secondary},t.breakpoints.down("sm"),{fontSize:o?"0.5rem":"0.6875rem"}),"& th":{fontWeight:500,color:t.palette.text.primary,lineHeight:"1rem"}}}));t.default=function(e){var t=e.isTiny,o=e.hideAQIDescription,i=e.themePreference;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a.Z,{overflow:"auto",children:(0,g.jsxs)(f,{size:"small",isTiny:t,children:[(0,g.jsx)(l.Z,{children:(0,g.jsxs)(s.Z,{children:[(0,g.jsx)(c.Z,{sx:{pr:0},children:(0,g.jsx)(a.Z,{sx:{width:"1em",height:"1em"}})}),(0,g.jsx)(c.Z,{sx:{pl:1},children:"Category"}),(0,g.jsx)(c.Z,{align:"right",children:"US AQI"}),(0,g.jsxs)(c.Z,{align:"right",children:["PM2.5 Concentration (\xb5g/m",(0,g.jsx)("sup",{children:"3"}),")"]}),!o&&(0,g.jsx)(c.Z,{align:"left",children:"Description"}),!o&&(0,g.jsx)(c.Z,{align:"left",children:"CITIESair' Suggested Actions"})]})}),(0,g.jsx)(u.Z,{children:m.Z.map((function(e,t){return(0,g.jsxs)(s.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,g.jsx)(c.Z,{sx:{pr:0},children:(0,g.jsx)(a.Z,{sx:{width:"1em",height:"1em",backgroundColor:i===v.Z.light?e.lightThemeColor:e.darkThemeColor}})}),(0,g.jsx)(c.Z,{sx:{pl:1},children:e.name}),(0,g.jsxs)(c.Z,{align:"right",children:[e.aqiUS.low,"\xa0 - \xa0",e.aqiUS.high]}),(0,g.jsxs)(c.Z,{align:"right",children:[e.rawPM2_5.low,"\xa0 - \xa0",e.rawPM2_5.high]}),!o&&(0,g.jsx)(c.Z,{align:"left",children:e.description}),!o&&(0,g.jsx)(c.Z,{align:"left",children:(0,d.ZP)(e.healthSuggestions.outdoors,{replace:h.T})})]},t)}))})]})}),!o&&(0,g.jsx)(p.Z,{chartHeight:"4rem",chartData:{sheetId:"157f6vu47RBEvnBnW24jGI7cz-ov1aSBUFPdkb5sDKDc",gid:1958405288,query:'SELECT * WHERE A = "US AQI"',headers:1,chartType:"BarChart",columns:[0,1,3,5,7,9,11],options:{legend:{position:"none"},enableInteractivity:!1,hAxis:{ticks:[0,50,100,150,200,300,500]},chartArea:{width:{portrait:"98%",landscape:"50%"},height:{portrait:"20%",landscape:"30%"}},isStacked:!0,colors:"aqi",bar:{groupWidth:"100%"}}}})]})}},5276:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return a}});var i=o(2791),n=o(6694),r=o(184);function a(e){var t=e.chartSubstituteComponentName;return(0,r.jsx)(i.Suspense,{fallback:(0,r.jsx)(n.Z,{}),children:function(){var e=(0,i.lazy)((function(){return o(6598)("./".concat(t))}));return(0,r.jsx)(e,{})}()})}},405:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return pe}});var i=o(885),n=o(2791),r=o(6871),a=o(8914),l=o(1413),s=o(5987),c=o(5973),u=o(229),d=o(3540),h=o(7038),p=o(1745),m=o(5814),v=o(5209),g=o(6015),f=o(803),x=o(5953),b=o(4565),y=o(4162),Z=o(1872),S=o(4142),w=o(604),j=o(173),C=o(5590),A=o(3245),T=o(7962),I=o(286),k=o(1162),P=o(8388),z=o(7438),_=o(692),E=o(184);function D(e){e.themePreference;var t=(0,n.useState)(null),o=(0,i.Z)(t,2),r=o[0],a=o[1],s=function(e){a(e.currentTarget),z.y(z.z.airQualityIndexLegendQuickGlance)},c=function(){a(null)},u=Boolean(r);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(P.T,(0,l.Z)((0,l.Z)({},e),{},{distanceFromBottomOfWindow:"5.5rem",children:(0,E.jsx)(C.Z,{sx:{mt:1},"aria-owns":u?z.z.airQualityIndexLegendQuickGlance:void 0,"aria-haspopup":"true",onMouseEnter:s,onMouseLeave:c,onClick:function(e){return j.tq&&(u?c():s(e))},"aria-label":z.z.airQualityIndexLegendQuickGlance,color:"primary",children:(0,E.jsxs)(y.Z,{direction:"column",alignItems:"center",children:[(0,E.jsx)(k.Z,{fontSize:"1rem"}),(0,E.jsx)(b.Z,{variant:"body2",fontWeight:"500",children:"AQI"})]})})})),(0,E.jsx)(A.Z,{id:z.z.airQualityIndexLegendQuickGlance,sx:{pointerEvents:"none",mt:-1},open:u,anchorEl:r,placement:"top-end",onClose:c,keepMounted:!0,disableRestoreFocus:!0,transition:!0,children:function(e){var t=e.TransitionProps;return(0,E.jsx)(T.Z,(0,l.Z)((0,l.Z)({},t),{},{timeout:350,children:(0,E.jsxs)(I.Z,{elevation:8,sx:{py:.5,mb:1},children:[(0,E.jsx)(b.Z,{sx:{mx:2,mt:1},color:"text.disabled",variant:"body1",fontWeight:500,children:"AQI at quick glance"}),(0,E.jsx)(_.default,{isTiny:!0,hideAQIDescription:!0,themePreference:!0})]})}))}})]})}var M=JSON.parse('{"TN":"Air Quality Dashboard","WL":"This page provides detailed analytics of the air quality sensors deployed at your school. Our team at CITIESair is working hard to bring the existing data visualizations on <a href=\'https://citiesdashboard.com/project/air-quality\'>NYUAD\'s Air Quality Dashboard</a> to your dashboard here. We expect the transition to be completed by the end of <b>October 2023</b>.<br/><br/>In the meantime, you can browse the descriptions of various air quality categories and historical air quality data at your school below. You can also click on the <b>TV Screen</b> button below to visualize on a big public TV screen real-time air quality comparison between the indoor and outdoor sensors.","O3":[{"title":"An Introduction of the US Air Quality Index (AQI)","subtitle":"CITIESair uses the <a href=\'https://www.airnow.gov/aqi/aqi-basics/\'>Air Quality Index (AQI)</a> developed by the United States Environmental Protection Agency (EPA) to effectively communicate different levels of PM2.5 air pollution. To calculate the AQI from the raw measurement of PM2.5 concentration (\xb5g/m\xb3), different breakpoints and piecewise linear function are utilized (read more <a href=\'https://en.wikipedia.org/wiki/Air_quality_index#United_States\'>here</a>). Higher AQI values correspond to poorer air quality and greater heath risks to humans.<br><br>The US EPA sets thresholds for PM2.5 concentration: <sup>[1]</sup><ul><li><b>Annual average</b>: 12.0 \xb5g/m\xb3, corresponding to US AQI <b>50</b></li><li><b>24-hour average</b>: 35.0 \xb5g/m\xb3, corresponding to US AQI <b>100</b></li></ul>In 2021, the World\'s Heath Organization (WHO) proposed a new guideline for PM2.5<sup>[2]</sup> with stricter thresholds than those of the US EPA:<ul><li><b>Annual average</b>: 5.0 \xb5g/m\xb3, corresponding to US AQI <b>21</b></li><li><b>24-hour average</b>: 15.0 \xb5g/m\xb3, corresponding to US AQI <b>56</b></li></ul>","reference":"[1] \\"National Ambient Air Quality Standards (NAAQS) for PM.\\" EPA, Environmental Protection Agency, https://www.epa.gov/pm-pollution/national-ambient-air-quality-standards-naaqs-pm.<br>[2] World Health Organization. \\"WHO global air quality guidelines: particulate matter (PM2. 5 and PM10), ozone, nitrogen dioxide, sulfur dioxide and carbon monoxide: executive summary.\\" (2021).","chartSubstituteComponentName":"AirQualityIndexTable"},{"title":"Historical Snapshots of AQI","customClassName":"historical-snapshot-aqi","subcharts":[{"subchartTitle":"Hourly (Last 7 Days)","query":"SELECT A, E, F, G, H, I, J, B, C, D","subchartSubtitle":"<b>Adjust the slider to zoom in.</b><br><br>Explore the <b>latest</b> hourly average AQI over the past month to see the differences in the air quality between different locations on the NYUAD campus.","options":{"hAxis":{"title":"Date Time","gridlines":{"color":"transparent"}}},"control":{"controlType":"ChartRangeFilter","options":{"filterColumnIndex":0,"ui":{"minRangeSize":172800000}}}}],"headers":1,"chartType":"ComboChart","options":{"seriesSelector":{"allowMultiple":true,"method":"toggleVisibility"},"colors":"reverseAqi","chartArea":{"backgroundColor":"#fff"},"seriesType":"area","lineWidth":0,"areaOpacity":1,"series":{"0":{"pointSize":0,"visibleInLegend":false,"enableInteractivity":false},"1":{"pointSize":0,"visibleInLegend":false,"enableInteractivity":false},"2":{"pointSize":0,"visibleInLegend":false,"enableInteractivity":false},"3":{"pointSize":0,"visibleInLegend":false,"enableInteractivity":false},"4":{"pointSize":0,"visibleInLegend":false,"enableInteractivity":false},"5":{"pointSize":0,"visibleInLegend":false,"enableInteractivity":false},"6":{"lineWidth":1.5,"type":"line","color":"#555"},"7":{"lineWidth":1.25,"type":"line","color":"#555","lineDashStyle":[5,1.5]},"8":{"lineWidth":1.25,"type":"line","color":"#555","lineDashStyle":[1.25,0.75]}},"vAxis":{"title":"US AQI","gridlines":{"count":0}}}}]}'),q=o(1478),W=o(501),O=o(4281),H=(o(4058),o(4853)),N=o(7138),U=(o(230),o(7892),o(277)),L=o(5203);(0,U.ZP)(L.H)((function(e){return{"&:after, :hover::after":{content:'"."',fontSize:"1.5rem",bottom:"-0.5rem",position:"absolute",color:e.theme.palette.primary.main,opacity:.5},"&:hover::after":{opacity:1}}}));var Q=o(7205),F=o(3504),R=o(2981),B=o(6830),G=o(6886),V=o(5570),Y=o(1131),X=o(1440),K=function(e){var t=e.schoolID,o=e.screens;return(0,E.jsx)(G.ZP,{variant:"popover",popupId:"tv-screens-list",children:function(e){return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(Q.Z,(0,l.Z)((0,l.Z)((0,l.Z)({variant:"contained"},(0,V.b8)(e)),(0,V.bs)(e)),{},{children:[(0,E.jsx)(R.Z,{sx:{fontSize:"1rem"}}),"\xa0TV Screens List"]})),(0,E.jsx)(B.Z,(0,l.Z)((0,l.Z)({},(0,V.wK)(e)),{},{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},onClick:e.close,children:o.map((function(e,o){return(0,E.jsx)(Y.ZP,{behavior:X.Z.toNewPage,to:"/screen/".concat(t,"/").concat(e.screen_name),label:e.location_long,sx:{fontSize:"0.8rem"}},o)}))}))]})}})},J=function(e){var t=e.url;return(0,E.jsxs)(Q.Z,{variant:"contained",component:F.rU,to:t,children:[(0,E.jsx)(R.Z,{sx:{fontSize:"1rem"}}),"\xa0TV Screen"]})},$=function(e){var t=e.schoolID,o=e.screens;return Array.isArray(o)?o.length<=1?(0,E.jsx)(J,{url:"/screen/".concat(t)}):(0,E.jsx)(K,{schoolID:t,screens:o}):null},ee=o(6344),te=o(5276),oe=o(8124),ie=o(1577),ne=o(7244),re=o(324),ae=o(8562),le=function(e){var t=e.currentSchoolID,o=e.currentSchoolName,r=e.allowedSchools,a=e.fetchDashboardData;if(!Array.isArray(r)||r.length<=1)return(0,E.jsx)(ce,{icon:(0,E.jsx)(ae.Z,{}),label:o,tooltipTitle:"School"});var l=(0,n.useState)(""),s=(0,i.Z)(l,2),c=(s[0],s[1]),u=(0,n.useState)(null),d=(0,i.Z)(u,2),h=d[0],p=d[1],m=function(){p(null)},v=function(e){return function(){t!==e&&(c(e),a(e)),m()}};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ce,{icon:(0,E.jsx)(ae.Z,{}),label:o,tooltipTitle:"Click to Select School",clickable:!0,onClick:function(e){p(e.currentTarget)},"aria-controls":open?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":open?"true":void 0}),(0,E.jsx)(ie.Z,{anchorEl:h,open:Boolean(h),onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},children:(0,E.jsx)(ne.Z,{dense:!0,children:r.map((function(e,t){return(0,E.jsx)(re.Z,{onClick:v(e.school_id),children:e.name},t)}))})})]})},se=["tooltipTitle"],ce=function(e){var t=e.tooltipTitle,o=(0,s.Z)(e,se);return(0,E.jsx)(m.Z,{title:t,enterDelay:0,leaveDelay:200,children:(0,E.jsx)(v.Z,(0,l.Z)({size:"small"},o))})},ue=function(e){var t,o,r,a,s,m,v,j,C=e.themePreference,A=e.currentSensorData,T=e.dashboardData,I=e.fetchDashboardData,k=e.temperatureUnitPreference,P=(0,n.useContext)(c.F),_=(0,i.Z)(P,4),U=(_[0],_[1],_[2],_[3]),L=(0,n.useState)(!1),Q=(0,i.Z)(L,2),F=(Q[0],Q[1],(0,n.useContext)(u.q)),R=(0,i.Z)(F,2),B=R[0];R[1];(0,n.useEffect)((function(){var e=M.O3.map((function(e,t){return{chartTitle:e.title,chartID:"chart-".concat(t+1)}}));U(e)}),[]);var G=(0,S.Z)();return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)(g.Z,{width:"100%",children:[(0,E.jsx)(D,{themePreference:C}),(0,E.jsx)(ee.Z,{backgroundColor:"customAlternateBackground",children:(0,E.jsxs)(f.Z,{sx:{pt:5,pb:3},children:[(0,E.jsx)(p.Z,{text:M.TN}),(0,E.jsxs)(x.ZP,{container:!0,spacing:1,sx:{mt:-3,pb:3},children:[(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(le,{currentSchoolID:null===(t=T.currentSchool)||void 0===t?void 0:t.school_id,currentSchoolName:null===(o=T.currentSchool)||void 0===o?void 0:o.name,allowedSchools:T.allowedSchools,fetchDashboardData:I})}),(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(ce,{icon:(0,E.jsx)(W.Z,{}),label:null===(r=T.currentSchool)||void 0===r?void 0:r.contactPerson,tooltipTitle:"Contact Person"})}),(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(ce,{icon:(0,E.jsx)(O.Z,{}),label:null===(a=T.currentSchool)||void 0===a?void 0:a.contactEmail,tooltipTitle:"Contact Email",component:"a",href:"mailto:".concat(null===(s=T.currentSchool)||void 0===s?void 0:s.contactEmail),clickable:!0})}),(0,E.jsx)(x.ZP,{item:!0,children:(0,E.jsx)(ce,{icon:(0,E.jsx)(H.Z,{}),label:"".concat(M.O3.length," Chart").concat(M.O3.length>1&&"s"),tooltipTitle:"Number of Charts",onClick:function(){(0,Y.Qj)(q.O3.id),z.y(z.z.internalNavigation,{destination_id:q.O3.id,destination_label:q.project.toString(),origin_id:"chip"})}})}),j]}),(0,E.jsx)(g.Z,{textAlign:"center",sx:{mb:2},children:(0,E.jsx)(oe.Z,{currentData:A,isScreen:!1,temperatureUnitPreference:k})}),(0,E.jsx)(b.Z,{component:"div",variant:"body1",color:"text.secondary",sx:{textAlign:"justify",pb:2,mb:0,"& table *":{color:"".concat(G.palette.text.secondary)}},gutterBottom:!0,children:(0,d.ZP)(M.WL,{replace:N.T})}),(0,E.jsx)(y.Z,{direction:"row",spacing:2,children:(0,E.jsx)($,{schoolID:null===(m=T.currentSchool)||void 0===m?void 0:m.school_id,screens:null===(v=T.currentSchool)||void 0===v?void 0:v.screens})})]})}),(0,E.jsx)(g.Z,{id:q.O3.id,children:M.O3.map((function(e,t){return(0,E.jsx)(ee.Z,{backgroundColor:t%2!=0&&"customAlternateBackground",children:(0,E.jsxs)(f.Z,{sx:{pt:4,pb:4},height:"auto",className:C===w.Z.dark?"dark":"",children:[(0,E.jsxs)(b.Z,{variant:"h6",color:"text.primary",children:[t+1,". ",e.title]}),e.chartSubstituteComponentName?(0,E.jsx)(te.default,{chartSubstituteComponentName:e.chartSubstituteComponentName}):(0,E.jsx)(h.Z,{chartData:(0,l.Z)({chartIndex:t,sheetId:M.sheetId},e),dataArray:null===T||void 0===T?void 0:T.charts}),(0,E.jsxs)(g.Z,{sx:{my:3},children:[(0,E.jsxs)(b.Z,{component:"div",variant:"body1",color:"text.secondary",children:[e.subtitle&&(0,d.ZP)(e.subtitle,{replace:N.T}),Object.keys(B)[t]==t&&e.subcharts&&e.subcharts[Object.values(B)[t]].subchartSubtitle&&(0,d.ZP)(e.subcharts[Object.values(B)[t]].subchartSubtitle,{replace:N.T})]}),(0,E.jsxs)(b.Z,{variant:"caption",color:"text.secondary",children:[e.reference&&(0,d.ZP)(e.reference,{replace:N.T}),Object.keys(B)[t]==t&&e.subcharts&&e.subcharts[Object.values(B)[t]].reference&&(0,d.ZP)(e.subcharts[Object.values(B)[t]].reference,{replace:N.T})]})]})]})},t)}))}),(0,E.jsx)(Z.Z,{})]})})},de=o(8206),he=o(1781),pe=function(e){var t=e.themePreference,o=e.temperatureUnitPreference,l=e.title;(0,n.useEffect)((function(){document.title=l}),[l]);var s=(0,n.useContext)(c.F),u=(0,i.Z)(s,4),d=(u[0],u[1]);u[2],u[3];(0,n.useEffect)((function(){d("dashboard")}),[]);var h=(0,n.useContext)(he.S),p=h.authenticated,m=h.checkAuthentication,v=(0,r.s0)();(0,n.useEffect)((function(){!0===m&&!1===p&&v("/login")}),[p,m]);var g=(0,n.useState)({}),f=(0,i.Z)(g,2),x=f[0],b=f[1],y=(0,n.useState)({}),Z=(0,i.Z)(y,2),S=Z[0],w=Z[1],j=(0,n.useState)([]),C=(0,i.Z)(j,2),A=(C[0],C[1]),T=function(e){var t;t=e?"https://api.citiesair.com/dashboard/".concat(e):"https://api.citiesair.com/dashboard",(0,a.m)(t,"json",!0).then((function(e){var t;if(null!==(t=e.currentSchool)&&void 0!==t&&t.sensors){var o,i=(0,de.RO)(null===(o=e.currentSchool)||void 0===o?void 0:o.sensors);w(i)}b(e),A(e.allowedSchools||[])}))};return(0,n.useEffect)((function(){T()}),[]),(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(ue,{themePreference:t,currentSensorData:S,dashboardData:x,fetchDashboardData:T,temperatureUnitPreference:o})})}},4011:function(e,t,o){"use strict";o.d(t,{Zj:function(){return i},vI:function(){return n},Ay:function(){return a},Tm:function(){return l},KN:function(){return s},p7:function(){return c},c9:function(){return u},Pk:function(){return d}});var i=function(e){var t=new Date(e),o=new Date-t,i=Math.floor(o/1e3),n=Math.floor(i/60),r=Math.floor(n/60),a=Math.floor(r/24);return a>0?"".concat(a,"d"):r>0?"".concat(r,"h"):n>0?"".concat(n,"m"):"".concat(i,"s")},n={active:"active",temporaryOffline:"temporaryOffline",offline:"offline"},r=[{name:n.active,cutoffInHours:{low:0,high:2}},{name:n.temporaryOffline,cutoffInHours:{low:3,high:6}},{name:n.offline,cutoffInHours:{low:7,high:1/0}}],a=function(e){for(var t=0;t<r.length;t++){var o=r[t];if(o.cutoffInHours.low<=e&&e<=o.cutoffInHours.high)return o.name}},l=function(e){switch(e.sensor_status){case n.active:return null;case n.temporaryOffline:return"Last seen: ".concat(e.lastSeen,"h ago");case n.offline:return"Sensor offline";default:return null}},s=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):null},c=function(e){return new URL(e).hostname},u=function(e){var t="screen",o=e.split(t);return"".concat(t).concat(o.pop())},d=function(e,t){return e.bottom<t.top||e.top>t.bottom?0:e.top<t.top?-1:1}},2377:function(e,t,o){"use strict";var i=o(3511);function n(e,t,o,i,n){return parseInt((e-t)/(o-i)*(n-i)+t)}t.Z=function(e){if(null==e)return{aqi:null,aqi_category_index:null};for(var t=0;t<i.Z.length;t++){var o=i.Z[t];if(e>=o.rawPM2_5.low&&e<=o.rawPM2_5.high)return{aqi:n(o.aqiUS.high,o.aqiUS.low,o.rawPM2_5.high,o.rawPM2_5.low,e),aqi_category_index:o.id}}}},3511:function(e,t,o){"use strict";var i=o(4809),n=[{id:0,category:"Good",lightThemeColor:i.Z.light.palette.chart.optionsColors.aqi[0],darkThemeColor:i.Z.dark.palette.chart.optionsColors.aqi[0],aqiUS:{low:0,high:50},rawPM2_5:{low:0,high:12},description:"Air quality is satisfactory, and air pollution poses little or no risk",healthSuggestions:{outdoors:"Enjoy outdoor activities, the air is great!",indoors_generic:"Enjoy clean indoor air",indoors_dining_hall:"Enjoy clean dining hall air",indoors_gym:"Enjoy clean air for physical activities indoors",indoors_vulnerable:"Enjoy clean indoor air"}},{id:1,category:"Moderate",lightThemeColor:i.Z.light.palette.chart.optionsColors.aqi[1],darkThemeColor:i.Z.dark.palette.chart.optionsColors.aqi[1],aqiUS:{low:51,high:100},rawPM2_5:{low:12.1,high:35.4},description:"Air quality is acceptable. However, there may be a risk for some people, particularly those who are unusually sensitive to air pollution",healthSuggestions:{outdoors:"Children and individuals with respiratory issues might need to reduce prolonged outdoor exertion",indoors_generic:"Indoor air is acceptable, but not great",indoors_dining_hall:"Indoor air is acceptable, but not great<br>Avoid Grill area",indoors_gym:"Indoor air is acceptable, but not great",indoors_vulnerable:"Indoor air is acceptable, but not great"}},{id:2,category:"Unhealthy for Sensitive Groups",lightThemeColor:i.Z.light.palette.chart.optionsColors.aqi[2],darkThemeColor:i.Z.dark.palette.chart.optionsColors.aqi[2],aqiUS:{low:101,high:150},rawPM2_5:{low:35.5,high:55.4},description:"Members of sensitive groups may experience health effects. The general public is less likely to be affected",healthSuggestions:{outdoors:"Children and individuals with respiratory issues should limit outdoor exertion",indoors_dining_hall:"Consider take-aways<br>Avoid Grill area",indoors_gym:"Individuals with respiratory issues should lower the intensity of indoor exercises",indoors_vulnerable:"Monitor closely individuals with respiratory issues for any symptom"}},{id:3,category:"Unhealthy",lightThemeColor:i.Z.light.palette.chart.optionsColors.aqi[3],darkThemeColor:i.Z.dark.palette.chart.optionsColors.aqi[3],aqiUS:{low:151,high:200},rawPM2_5:{low:55.5,high:150.4},description:"Some members of the general public may experience health effects; members of sensitive groups may experience more serious health effects",healthSuggestions:{outdoors:"Everyone should limit outdoor activities<br>Wear masks when going outside",indoors_dining_hall:"Consider take-aways<br>Avoid Grill area<br>Come back at off-peak hours",indoors_gym:"Everyone should lower the intensity of indoor exercises",indoors_vulnerable:"Monitor closely individuals with respiratory issues for any symptom"}},{id:4,category:"Very Unhealthy",lightThemeColor:i.Z.light.palette.chart.optionsColors.aqi[4],darkThemeColor:i.Z.dark.palette.chart.optionsColors.aqi[4],aqiUS:{low:201,high:300},rawPM2_5:{low:150.5,high:250.4},description:"Health alert: The risk of health effects is increased for everyone",healthSuggestions:{outdoors:"Avoid outdoor activities at all cost<br>Wear N95 masks when going outside",indoors_dining_hall:"Consider take-aways<br>Avoid Grill area<br>Come back at off-peak hours",indoors_gym:"Indoor air quality is not suitable for any physical activities",indoors_vulnerable:"Monitor closely individuals with respiratory issues for any symptom"}},{id:5,category:"Hazardous",lightThemeColor:i.Z.light.palette.chart.optionsColors.aqi[5],darkThemeColor:i.Z.dark.palette.chart.optionsColors.aqi[5],aqiUS:{low:300,high:500},rawPM2_5:{low:250.5,high:550.5},description:"Health warning of emergency conditions: everyone is more likely to be affected",healthSuggestions:{outdoors:"Avoid outdoor activities at all cost<br>Wear N95 masks when going outside",indoors_dining_hall:"Consider take-aways<br>Avoid Grill area<br>Come back at off-peak hours",indoors_gym:"Indoor air quality is not suitable for any physical activities",indoors_vulnerable:""}}];t.Z=n},8206:function(e,t,o){"use strict";o.d(t,{bE:function(){return p},RO:function(){return m}});var i=o(1413),n=o(885),r=o(5861),a=o(4687),l=o.n(a),s=o(8914),c=o(4011),u=o(2377),d=o(3511),h=o(3540),p=function(){var e=(0,r.Z)(l().mark((function e(t){var o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.m)(t,"json",!0);case 3:if(o=e.sent){e.next=6;break}throw new Error("Returned data is empty");case 6:return e.prev=6,e.abrupt("return",m(o));case 10:e.prev=10,e.t0=e.catch(6),console.error("Error: data is not iterable",e.t0);case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(0),new Error("Error fetching data: ".concat(e.t1.message));case 18:case"end":return e.stop()}}),e,null,[[0,15],[6,10]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){return Object.entries(e).map((function(e){var t,o,r=(0,n.Z)(e,2),a=(r[0],r[1]),l=new Date,s=new Date(null===(t=a.current)||void 0===t?void 0:t.timestamp),p=Math.round((l-s)/1e3/3600);if(a.current&&(a.current.lastSeenInHours=p,a.current.sensor_status=(0,c.Ay)(p)),null!==(o=a.current)&&void 0!==o&&o["pm2.5"]){var m=(0,u.Z)(a.current["pm2.5"]);if(m){var v,g,f=d.Z[m.aqi_category_index];if(a.current.aqi=m.aqi,a.current.category=f.category,a.current.sensor_status===c.vI.active)a.current=(0,i.Z)((0,i.Z)({},a.current),{},{color:f.lightThemeColor,healthSuggestion:f.healthSuggestions[null===(v=a.sensor)||void 0===v?void 0:v.location_type]&&(0,h.ZP)(f.healthSuggestions[null===(g=a.sensor)||void 0===g?void 0:g.location_type])})}}})),e}},6598:function(e,t,o){var i={"./AirQualityIndexTable":692,"./AirQualityIndexTable.jsx":692,"./ChartSubstituteComponentLoader":5276,"./ChartSubstituteComponentLoader.jsx":5276};function n(e){return Promise.resolve().then((function(){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o(i[e])}))}n.keys=function(){return Object.keys(i)},n.id=6598,e.exports=n}}]);
//# sourceMappingURL=405.add8703c.chunk.js.map